/*! koi-frontend - v1.0.0 - 2017-02-18 */
!function(a,b,c,d){var e=function(a){};e.prototype={initialize:function(){},formToJson:function(b){var c={},e=[];return e=a.prototype.isPrototypeOf(b)?b.serializeArray():a(b).serializeArray(),a.each(e,function(){c[this.name]!==d?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=this.value||""}),c},isUrl:function(a){var b=/^(http[s]?:\/\/(www\.)?|ftp:\/\/(www\.)?|www\.){1}([0-9A-Za-z-\.@:%_\+~#=]+)+(\/(.)*)?(\?(.)*)?/i;return b.test(a)},urlFull:function(a){if(!this.isUrl(c.url))return a;a||(a="");var b=/^\//;return b.test(a)||(a="/"+a),c.url+a},parseErrors:function(b){var c="";if(_.isObject(b)){var d="<ul>";a.each(b,function(a,b){d+="<li>"+b[0]+"</li>"}),d+="</ul>",c=d}return c},setSpinner:function(b){b&&a(b).prepend('<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>')},removeSpinner:function(b){var c=a(b).find(".overlay");c.length&&c.remove()},dataTableES:function(){return{sProcessing:'<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>',sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}},redirect:function(a){a!==d&&""!=a?b.location=a:b.location.reload()},successRedirect:function(a,c){alertify.success(a),setTimeout(function(){b.Misc.redirect(c)},500)},currency:function(a){return accounting.formatMoney(a,"",2,".",",")},evaluateActionsAccount:function(c){c||(c={});var d={callback:null,wrap:"body",data:null},e={};e=a.extend({},d,c),a.ajax({url:b.Misc.urlFull(Route.route("asientos.detalle.evaluate")),type:"POST",data:e.data,beforeSend:function(){b.Misc.setSpinner(e.wrap)}}).done(function(a){b.Misc.removeSpinner(e.wrap);var c=a.success?"":a.errors;return _.isObject(a.errors)&&(c=b.Misc.parseErrors(a.errors)),a.success?void("Function"==={}.toString.call(e.callback).slice(8,-1)&&e.callback(a.actions)):void alertify.error(c)}).fail(function(a,c,d){b.Misc.removeSpinner(e.wrap),alertify.error(d)})},evaluateFacturap:function(c){c||(c={});var d={callback:null,wrap:"body",facturap:null,tercero:null,naturaleza:null},e={};e=a.extend({},d,c),a.ajax({url:b.Misc.urlFull(Route.route("facturap.search")),type:"GET",data:{facturap1_factura:e.facturap,tercero_nit:e.tercero},beforeSend:function(){b.Misc.setSpinner(e.wrap)}}).done(function(a){b.Misc.removeSpinner(e.wrap);var c={actions:!1};a.success?(c.actions=!0,c.facturap=a.id,c.action="quota"):"C"==e.naturaleza?(c.actions=!0,c.action="add"):"D"==e.naturaleza&&(c.message="Para realizar movimientos de naturaleza débito de ingresar un numero de factura existente."),"Function"==={}.toString.call(e.callback).slice(8,-1)&&e.callback(c)}).fail(function(a,c,d){b.Misc.removeSpinner(e.wrap),alertify.error(d)})},cloneOrden:function(c){c||(c={});var d={callback:null,wrap:"body",data:null},e={};e=a.extend({},d,c),a.ajax({url:b.Misc.urlFull(Route.route("ordenes.clonar",{ordenes:e.data.orden_codigo})),type:"GET",beforeSend:function(){b.Misc.setSpinner(e.wrap)}}).done(function(a){b.Misc.removeSpinner(e.wrap);var c=a.success?"":a.errors;return _.isObject(a.errors)&&(c=b.Misc.parseErrors(a.errors)),a.success?void("Function"==={}.toString.call(e.callback).slice(8,-1)&&e.callback(a)):void alertify.error(c)}).fail(function(a,c,d){b.Misc.removeSpinner(e.wrap),alertify.error(d)})}},b.Misc=new e,b.Misc.initialize()}(jQuery,this,this.document),app||(app={}),function(a,b,c){app.AcabadopModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("acabadosp.index"))},idAttribute:"id",defaults:{acabadop_nombre:"",acabadop_descripcion:""}})}(this,this.document),app||(app={}),function(a,b,c){app.ActividadModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("actividades.index"))},idAttribute:"id",defaults:{actividad_codigo:"",actividad_nombre:"",actividad_tarifa:"0",actividad_categoria:""}})}(this,this.document),app||(app={}),function(a,b,c){app.AreapModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("areasp.index"))},idAttribute:"id",defaults:{areap_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.AsientoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("asientos.index"))},idAttribute:"id",defaults:{asiento1_ano:moment().format("YYYY"),asiento1_mes:moment().format("M"),asiento1_dia:moment().format("D"),asiento1_folder:"",asiento1_documento:"",documento_tipo_consecutivo:"",asiento1_numero:"",asiento1_beneficiario:"",tercero_nit:"",tercero_nombre:"",asiento1_sucursal:"",asiento1_preguardado:"",asiento1_detalle:"",asiento1_fecha_elaboro:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Asiento2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("asientos.detalle.index"))},idAttribute:"id",defaults:{asiento2_asiento:"",asiento2_cuenta:"",plancuentas_cuenta:"",plancuentas_nombre:"",asiento2_beneficiario:"",tercero_nit:"",tercero_nombre:"",asiento2_debito:0,asiento2_credito:0,asiento2_centro:"",centrocosto_nombre:"",asiento2_base:0,asiento2_detalle:"",asiento2_orden:"",ordenp_codigo:""}})}(this,this.document),app||(app={}),function(a,b,c){app.AsientoMovModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("asientos.detalle.movimientos"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.CentroCostoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("centroscosto.index"))},idAttribute:"id",defaults:{centrocosto_codigo:"",centrocosto_centro:"",centrocosto_nombre:"",centrocosto_descripcion1:"",centrocosto_descripcion2:"",centrocosto_estructura:"N",centrocosto_tipo:"N",centrocosto_activo:!0}})}(this,this.document),app||(app={}),function(a,b,c){app.ContactoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("terceros.contactos.index"))},idAttribute:"id",defaults:{tcontacto_nombres:"",tcontacto_apellidos:"",tcontacto_telefono:"",tcontacto_celular:"",tcontacto_municipio:"",tcontacto_direccion:"",tcontacto_email:"",tcontacto_cargo:""}})}(this,this.document),app||(app={}),function(a,b,c){app.DespachopModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("ordenes.despachos.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.DocumentoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("documentos.index"))},idAttribute:"id",defaults:{documento_codigo:"",documento_nombre:"",documento_folder:"",documento_tipo_consecutivo:"A"}})}(this,this.document),app||(app={}),function(a,b,c){app.EmpresaModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("empresa.index"))},idAttribute:"id",defaults:{tercero_nit:"",tercero_digito:"",tercero_regimen:"",tercero_tipo:"",tercero_persona:"",tercero_razonsocial:"",tercero_nombre1:"",tercero_nombre2:"",tercero_apellido1:"",tercero_apellido2:"",tercero_direccion:"",tercero_municipio:"",tercero_email:"",tercero_telefono1:"",tercero_telefono2:"",tercero_fax:"",tercero_celular:"",tercero_actividad:"",tercero_cc_representante:"",tercero_representante:"",tercero_responsable_iva:!1,tercero_autoretenedor_cree:!1,tercero_gran_contribuyente:!1,tercero_autoretenedor_renta:!1,tercero_autoretenedor_ica:!1,actividad_tarifa:"",empresa_niif:"",empresa_iva:""}})}(this,this.document),app||(app={}),function(a,b,c){app.FacturapModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("facturap.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.Facturap2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("facturap.cuotas.index"))},idAttribute:"id",defaults:{facturap2_factura:"",facturap2_cuota:"",facturap2_vencimiento:"",facturap2_valor:0,facturap2_saldo:0}})}(this,this.document),app||(app={}),function(a,b,c){app.FolderModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("folders.index"))},idAttribute:"id",defaults:{folder_codigo:"",folder_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.GrupoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("grupos.index"))},idAttribute:"id",defaults:{grupo_codigo:"",grupo_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.ItemRolloModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productos.rollos.index"))},idAttribute:"id",defaults:{prodboderollo_item:0,prodboderollo_centimetro:0,prodboderollo_saldo:0}})}(this,this.document),app||(app={}),function(a,b,c){app.MaquinapModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("maquinasp.index"))},idAttribute:"id",defaults:{maquinap_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.MaterialpModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("materialesp.index"))},idAttribute:"id",defaults:{materialp_nombre:"",materialp_descripcion:""}})}(this,this.document),app||(app={}),function(a,b,c){app.OrdenpModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("ordenes.index"))},idAttribute:"id",defaults:{orden_codigo:"",orden_referencia:"",orden_cliente:"",tercero_nit:"",tercero_nombre:"",orden_fecha_inicio:moment().format("YYYY-MM-DD"),orden_fecha_entrega:moment().format("YYYY-MM-DD"),orden_hora_entrega:"",orden_formapago:"CO",orden_iva:"",orden_contacto:"",tcontacto_nombre:"",tcontacto_telefono:"",orden_suministran:"",orden_observaciones:"",orden_terminado:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Ordenp2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("ordenes.productos.index"))},idAttribute:"id",defaults:{orden2_referencia:"",orden2_cantidad:0,orden2_precio_formula:"",orden2_round_formula:"",orden2_precio_venta:"",orden2_observaciones:"",orden2_ancho:0,orden2_alto:0,orden2_c_ancho:0,orden2_c_alto:0,orden2_3d_ancho:0,orden2_3d_alto:0,orden2_3d_profundidad:0,orden2_tiro:!1,orden2_yellow:!1,orden2_magenta:!1,orden2_cyan:!1,orden2_key:!1,orden2_color1:!1,orden2_color2:!1,orden2_nota_tiro:"",orden2_retiro:!1,orden2_yellow2:!1,orden2_magenta2:!1,orden2_cyan2:!1,orden2_key2:!1,orden2_color12:!1,orden2_color22:!1,orden2_nota_retiro:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Ordenp3Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("ordenes.productos.maquinas.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.Ordenp4Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("ordenes.productos.materiales.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.Ordenp5Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("ordenes.productos.acabados.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.PlanCuentaModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("plancuentas.index"))},idAttribute:"id",defaults:{plancuentas_cuenta:"",plancuentas_nivel:"",plancuentas_nombre:"",plancuentas_naturaleza:"D",plancuentas_centro:"",plancuentas_tercero:!1,plancuentas_tipo:"N",plancuentas_tasa:0}})}(this,this.document),app||(app={}),function(a,b,c){app.ProductoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productos.index"))},idAttribute:"id",defaults:{producto_nombre:"",producto_codigo:"",producto_codigoori:"",producto_referencia:"",producto_grupo:"",producto_subgrupo:"",producto_unidadmedida:"",producto_precio:0,producto_costo:0,producto_vidautil:0,producto_unidades:!0,producto_serie:!1,producto_metrado:!1}})}(this,this.document),app||(app={}),function(a,b,c){app.ProductopModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productosp.index"))},idAttribute:"id",defaults:{productop_nombre:"",productop_observaciones:"",productop_tiro:!1,productop_retiro:!1,productop_abierto:!1,productop_cerrado:!1,productop_3d:!1,productop_ancho_med:"",productop_alto_med:"",productop_c_med_ancho:"",productop_c_med_alto:"",productop_3d_profundidad_med:"",productop_3d_ancho_med:"",productop_3d_alto_med:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Productop2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productosp.tips.index"))},idAttribute:"id",defaults:{productop2_productop:"",productop2_tip:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Productop3Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productosp.areas.index"))},idAttribute:"id",defaults:{productop3_productop:"",productop3_areap:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Productop4Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productosp.maquinas.index"))},idAttribute:"id",defaults:{productop4_productop:"",productop4_maquinap:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Productop5Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productosp.materiales.index"))},idAttribute:"id",defaults:{productop5_productop:"",productop5_materialp:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Productop6Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("productosp.acabados.index"))},idAttribute:"id",defaults:{productop6_productop:"",productop6_acabadop:""}})}(this,this.document),app||(app={}),function(a,b,c){app.PuntoVentaModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("puntosventa.index"))},idAttribute:"id",defaults:{puntoventa_nombre:"",puntoventa_numero:"",puntoventa_prefijo:"",puntoventa_resolucion_dian:""}})}(this,this.document),app||(app={}),function(a,b,c){app.RolModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("roles.index"))},idAttribute:"id",defaults:{name:"",display_name:"",description:""}})}(this,this.document),app||(app={}),function(a,b,c){app.SubGrupoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("subgrupos.index"))},idAttribute:"id",defaults:{subgrupo_codigo:"",subgrupo_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.SucursalModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("sucursales.index"))},idAttribute:"id",defaults:{sucursal_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.TerceroModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("terceros.index"))},idAttribute:"id",defaults:{tercero_nit:"",tercero_digito:"",tercero_regimen:"",tercero_tipo:"",tercero_persona:"",tercero_razonsocial:"",tercero_nombre1:"",tercero_nombre2:"",tercero_apellido1:"",tercero_apellido2:"",tercero_direccion:"",tercero_municipio:"",tercero_email:"",tercero_telefono1:"",tercero_telefono2:"",tercero_fax:"",tercero_celular:"",tercero_actividad:"",tercero_cc_representante:"",tercero_representante:"",tercero_activo:!1,tercero_responsable_iva:!1,tercero_autoretenedor_cree:!1,tercero_gran_contribuyente:!1,tercero_autoretenedor_renta:!1,tercero_autoretenedor_ica:!1,tercero_socio:!1,tercero_cliente:!1,tercero_acreedor:!1,tercero_interno:!1,tercero_mandatario:!1,tercero_empleado:!1,tercero_proveedor:!1,tercero_extranjero:!1,tercero_afiliado:!1,tercero_otro:!1,tercero_cual:"",actividad_tarifa:""}})}(this,this.document),app||(app={}),function(a,b,c){app.TrasladoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("traslados.index"))},idAttribute:"id",defaults:{traslado1_sucursal:"",traslado1_numero:"",traslado1_destino:"",traslado1_fecha:moment().format("YYYY-MM-DD"),traslado1_observaciones:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Traslado2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("traslados.detalle.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.UnidadModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("unidades.index"))},idAttribute:"id",defaults:{unidadmedida_sigla:"",unidadmedida_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c,d){app.CreateAcabadospView=Backbone.View.extend({el:"#acabadosp-create",template:_.template(a("#add-acabadop-tpl").html()||""),events:{"submit #form-acabadosp":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-acabadop"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("acabadosp.show",{acabadosp:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainAcabadospView=Backbone.View.extend({el:"#acabadosp-main",initialize:function(){this.$acabadospSearchTable=this.$("#acabadosp-search-table"),this.$acabadospSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("acabadosp.index")),columns:[{data:"id",name:"id"},{data:"acabadop_nombre",name:"acabadop_nombre"},{data:"acabadop_descripcion",name:"acabadop_descripcion"}],buttons:[{text:'<i class="fa fa-plus"></i> Nuevo acabado',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("acabadosp.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("acabadosp.show",{acabadosp:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateActividadView=Backbone.View.extend({el:"#actividad-create",template:_.template(a("#add-actividad-tpl").html()||""),events:{"submit #form-actividad":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-actividad"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initSpinner&&b.initComponent.initSpinner()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("actividades.show",{actividades:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainActividadView=Backbone.View.extend({el:"#actividades-main",initialize:function(){this.$actividadesSearchTable=this.$("#actividades-search-table"),this.$actividadesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("actividades.index")),columns:[{data:"actividad_codigo",name:"actividad_codigo"},{data:"actividad_nombre",name:"actividad_nombre"},{data:"actividad_categoria",name:"actividad_categoria"},{data:"actividad_tarifa",name:"actividad_tarifa"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nueva actividad',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("actividades.create")))}}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("actividades.show",{actividades:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateAreapView=Backbone.View.extend({el:"#areasp-create",template:_.template(a("#add-areap-tpl").html()||""),events:{"submit #form-areasp":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-areap"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("areasp.show",{areasp:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainAreaspView=Backbone.View.extend({el:"#areasp-main",initialize:function(){this.$areaspSearchTable=this.$("#areasp-search-table"),this.$areaspSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("areasp.index")),columns:[{data:"id",name:"id"},{data:"areap_nombre",name:"areap_nombre"}],buttons:[{text:'<i class="fa fa-plus"></i> Nueva area',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("areasp.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("areasp.show",{areasp:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AsientoActionView=Backbone.View.extend({el:"#asiento-content-section",templateOrdenp:_.template(a("#searchordenp-asiento-tpl").html()||""),templateFacturap:_.template(a("#rfacturap-asiento-tpl").html()||""),templateAddFacturap:_.template(a("#add-rfacturap-asiento-tpl").html()||""),templateCuotasFacturap:_.template(a("#add-rfacturap2-asiento-tpl").html()||""),templateCartera:_.template(a("#rcartera-asiento-tpl").html()||""),templateAddFactura:_.template(a("#add-facturacartera-asiento-tpl").html()||""),templateCuotasFactura:_.template(a("#add-cuotasfacturacartera-asiento-tpl").html()||""),templateInventario:_.template(a("#add-inventario-asiento-tpl").html()||""),templateAddItemRollo:_.template(a("#add-itemrollo-asiento-tpl").html()||""),templateChooseItemsRollo:_.template(a("#choose-itemrollo-asiento-tpl").html()||""),templateAddSeries:_.template(a("#add-series-asiento-tpl").html()||""),events:{"submit #form-create-ordenp-asiento-component-source":"onStoreItemOrdenp","submit #form-create-asiento-component-source":"onStoreItemFacturap","change input#facturap1_factura":"facturapChanged","change select#factura_nueva":"facturaNuevaChanged","submit #form-create-inventario-asiento-component-source":"onStoreItemInventario","change .evaluate-producto-movimiento-asiento":"evaluateProductoInventario"},parameters:{data:{},actions:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$modalOp=this.$("#modal-asiento-ordenp-component"),this.$modalFp=this.$("#modal-asiento-facturap-component"),this.$modalIn=this.$("#modal-asiento-inventario-component"),this.$modalCt=this.$("#modal-asiento-cartera-component"),this.cuotasFPList=new app.CuotasFPList,this.itemRolloINList=new app.ItemRolloINList,this.productoSeriesINList=new app.ProductoSeriesINList,this.listenTo(this.cuotasFPList,"reset",this.addAllCuotasFacturap),this.listenTo(this.itemRolloINList,"reset",this.addAllItemRolloInventario),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.collection,"sync",this.responseServer)},render:function(){this.runAction()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},runAction:function(){var a=this.evaluateNextAction(),b=this,c={facturap:function(){b.$modalFp.find(".content-modal").empty().html(b.templateFacturap(b.parameters.data)),b.referenceFacturap()},cartera:function(){b.$modalCt.find(".content-modal").empty().html(b.templateCartera(b.parameters.data)),b.referenceCartera()},ordenp:function(){b.$modalOp.find(".content-modal").empty().html(b.templateOrdenp(b.parameters.data)),b.referenceOrdenp()},inventario:function(){b.$modalIn.find(".content-modal").empty().html(b.templateInventario(b.parameters.data)),b.referenceInventario()},store:function(){b.onStoreItem()}};c[a.action]&&c[a.action]()},evaluateNextAction:function(){var a;for(a=this.parameters.actions.length-1;a>=0;--a)if(action=this.parameters.actions[a],0==action.success)return action;return{action:"store"}},setSuccessAction:function(a){var b;for(b=this.parameters.actions.length-1;b>=0;--b)item=this.parameters.actions[b],item.action==a&&(item.success=!0)},isLastAction:function(a){var b;for(b=this.parameters.actions.length-1;b>=0;--b)if(item=this.parameters.actions[b],0==item.success&&item.action!=a)return!1;return!0},validateAction:function(c){c||(c={});var d={callback:null,action:null},e={},f={};_this=this,f=a.extend({},d,c),e.action=f.action,e=a.extend({},this.parameters.data,e),a.ajax({url:b.Misc.urlFull(Route.route("asientos.detalle.validate")),type:"POST",data:e,beforeSend:function(){b.Misc.setSpinner(_this.$wraper)}}).done(function(a){if(b.Misc.removeSpinner(_this.$wraper),!_.isUndefined(a.success)){var c=a.success?"":a.errors;if(_.isObject(a.errors)&&(c=b.Misc.parseErrors(a.errors)),!a.success)return void alertify.error(c);"Function"==={}.toString.call(f.callback).slice(8,-1)&&f.callback(a)}}).fail(function(a,c,d){b.Misc.removeSpinner(f.wrap),alertify.error(d)})},referenceFacturap:function(){this.$wraper=this.$("#modal-asiento-wrapper-facturap"),this.$wraperFormFp=this.$("#content-invoice"),this.$wraperErrorFp=this.$("#error-eval-facturap"),this.$wraperErrorFp.hide().empty(),this.$modalFp.modal("show")},referenceCartera:function(){this.$wraper=this.$("#modal-asiento-wrapper-cartera"),this.$wraperFormCt=this.$("#content-cartera"),this.$wraperErrorCt=this.$("#error-eval-cartera"),this.$wraperErrorCt.hide().empty(),this.$modalCt.modal("show")},referenceOrdenp:function(){this.$wraper=this.$("#modal-asiento-wrapper-ordenp"),this.$wraperFormOp=this.$modalOp.find(".content-modal"),this.$wraperErrorOp=this.$("#error-search-orden-asiento2"),this.$wraperErrorOp.hide().empty(),this.$modalOp.modal("show")},referenceInventario:function(){this.$wraper=this.$("#modal-asiento-wrapper-inventario"),this.$wraperFormIn=this.$modalIn.find(".content-modal"),this.$wraperDetailIn=this.$modalIn.find("#content-detail-inventory"),this.$wraperErrorIn=this.$("#error-inventario-asiento2"),this.$inputInProducto=this.$("#producto_codigo"),this.$inputInUnidades=this.$("#movimiento_cantidad"),this.$inputInSucursal=this.$("#movimiento_sucursal"),this.$wraperErrorIn.hide().empty(),this.$modalIn.modal("show")},onStoreItemOrdenp:function(c){c.isDefaultPrevented()||(c.preventDefault(),this.parameters.data=a.extend({},this.parameters.data,b.Misc.formToJson(c.target)),this.validateAction({action:"ordenp",callback:function(a){return function(b){b.success&&(a.setSuccessAction("ordenp",a.parameters.actions),a.isLastAction("ordenp")||a.$modalOp.modal("hide"),a.runAction())}}(this)}))},facturapChanged:function(c){this.$wraperErrorFp.hide().empty(),this.$wraperFormFp.empty(),b.Misc.evaluateFacturap({facturap:a(c.currentTarget).val(),naturaleza:this.parameters.data.asiento2_naturaleza,tercero:this.parameters.data.tercero_nit,wrap:this.$wraperFormFp,callback:function(a){return function(b){if(b.actions){var c={add:function(){a.$wraperFormFp.html(a.templateAddFacturap()),a.ready()},quota:function(){a.$wraperFormFp.html(a.templateCuotasFacturap()),a.$wraperCuotasFp=a.$("#browse-rfacturap2-list"),a.cuotasFPList.fetch({reset:!0,data:{facturap1:b.facturap}})}};c[b.action]&&c[b.action]()}else _.isUndefined(b.message)||_.isNull(b.message)||""==b.message||(a.$wraperErrorFp.empty().append(b.message),a.$wraperErrorFp.show())}}(this)})},addOneCuotaFacturap:function(a){var b=new app.CuotasFPListView({model:a});this.$wraperCuotasFp.append(b.render().el),this.ready()},addAllCuotasFacturap:function(){this.cuotasFPList.forEach(this.addOneCuotaFacturap,this)},onStoreItemFacturap:function(c){c.isDefaultPrevented()||(c.preventDefault(),this.parameters.data=a.extend({},this.parameters.data,b.Misc.formToJson(c.target)),this.validateAction({action:"facturap",callback:function(a){return function(b){b.success&&(a.setSuccessAction("facturap",a.parameters.actions),a.isLastAction("facturap")||a.$modalFp.modal("hide"),a.runAction())}}(this)}))},addOneItemRolloInventario:function(a,b){b||(b=!1);var c=new app.ItemRolloINListView({model:a,parameters:{choose:b}});this.$wraperItemRollo.append(c.render().el),this.ready()},addAllItemRolloInventario:function(){var a=this;this.itemRolloINList.forEach(function(b,c){a.addOneItemRolloInventario(b,!0)})},addOneSerieInventario:function(a){var b=new app.ProductoSeriesINListView({model:a});this.$wraperSeries.append(b.render().el),this.ready()},evaluateProductoInventario:function(c){var d=this,e=this.$inputInProducto.val(),f=this.$inputInSucursal.val(),g=this.$inputInUnidades.val();this.$wraperDetailIn.empty(),e&&f&&g&&a.ajax({url:b.Misc.urlFull(Route.route("productos.search")),type:"GET",data:{producto_codigo:e},beforeSend:function(){d.$wraperErrorIn.hide().empty(),b.Misc.setSpinner(d.$wraperFormIn)}}).done(function(a){if(b.Misc.removeSpinner(d.$wraperFormIn),a.success){if(!a.producto_unidades)return d.$wraperErrorIn.empty().append("No es posible realizar movimientos para productos que no manejan unidades"),void d.$wraperErrorIn.show();if(a.producto_metrado)if("D"==d.parameters.data.asiento2_naturaleza){
d.$wraperDetailIn.html(d.templateAddItemRollo()),d.$wraperItemRollo=d.$("#browse-itemtollo-list");for(var c=1;c<=g;c++)d.addOneItemRolloInventario(new app.ItemRolloModel({id:c}))}else d.$wraperDetailIn.html(d.templateChooseItemsRollo()),d.$wraperItemRollo=d.$("#browse-chooseitemtollo-list"),d.itemRolloINList.fetch({reset:!0,data:{producto:a.id,sucursal:f}});else if(a.producto_serie&&"D"==d.parameters.data.asiento2_naturaleza){d.$wraperDetailIn.html(d.templateAddSeries()),d.$wraperSeries=d.$("#browse-series-list");for(var c=1;c<=g;c++)d.addOneSerieInventario(new app.ProductoModel({id:c}))}}}).fail(function(a,b,c){d.$wraperErrorIn.empty().append(c),d.$wraperErrorIn.show()})},onStoreItemInventario:function(c){c.isDefaultPrevented()||(c.preventDefault(),this.parameters.data=a.extend({},this.parameters.data,b.Misc.formToJson(c.target)),this.validateAction({action:"inventario",callback:function(a){return function(b){b.success&&(a.setSuccessAction("inventario",a.parameters.actions),a.isLastAction("inventario")||a.$modalIn.modal("hide"),_.isUndefined(b.asiento2_valor)||_.isNull(b.asiento2_valor)||b.asiento2_valor==a.parameters.data.asiento2_valor||(a.parameters.data.asiento2_valor=b.asiento2_valor),a.runAction())}}(this)}))},facturaNuevaChanged:function(b){this.$wraperErrorCt.hide().empty(),this.$wraperFormCt.empty(),"N"==a(b.currentTarget).val()?this.$wraperFormCt.html(this.templateAddFactura()):this.$wraperFormCt.html(this.templateCuotasFactura()),this.ready()},onStoreItem:function(a){this.model.id!=d?this.collection.trigger("store",this.parameters.data):this.model.save(this.parameters.data,{patch:!0,silent:!0})},responseServer:function(a,b,c){_.isUndefined(b.success)||b.success&&(this.$modalOp.modal("hide"),this.$modalIn.modal("hide"),this.$modalFp.modal("hide"))}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AsientoCuentasListView=Backbone.View.extend({el:"#browse-detalle-asiento-list",events:{"click .item-asiento2-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$debitos=this.$("#total-debitos"),this.$creditos=this.$("#total-creditos"),this.$diferencia=this.$("#total-diferencia"),this.confCollection={reset:!0,data:{}},this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),_.isUndefined(this.parameters.dataFilter.asiento)||_.isNull(this.parameters.dataFilter.asiento)||(this.confCollection.data.asiento=this.parameters.dataFilter.asiento,this.collection.fetch(this.confCollection))},addOne:function(a){var b=new app.AsientoCuentasItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.append(b.render().el),this.totalize()},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper);var d=new app.Asiento2Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove(),f.collection.remove(a),f.totalize()}}})},totalize:function(){var a=this.collection.totalize();this.$debitos.length&&this.$debitos.html(b.Misc.currency(a.debitos)),this.$creditos.length&&this.$creditos.html(b.Misc.currency(a.creditos)),this.$diferencia.length&&this.$diferencia.html(b.Misc.currency(a.diferencia))},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AsientoCuentasItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#add-asiento2-item-tpl").html()||""),templateInfo:_.template(a("#show-info-asiento2-tpl").html()||""),templateInfoInsumo:_.template(a("#show-info-asiento2-movimientos-insumo-tpl").html()||""),events:{"click .item-asiento2-show-info":"showInfo"},parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$modalInfo=a("#modal-asiento-show-info-component"),this.asientoMovimientosList=new app.AsientoMovimientosList,this.listenTo(this.model,"change",this.render),this.listenTo(this.asientoMovimientosList,"request",this.loadSpinner),this.listenTo(this.asientoMovimientosList,"sync",this.responseServer),this.listenTo(this.asientoMovimientosList,"reset",this.addAll)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this},showInfo:function(){var a=this.model.toJSON();this.$modalInfo.find(".content-modal").empty().html(this.templateInfo(a)),this.$wrapperList=this.$modalInfo.find("#browse-showinfo-asiento-list"),this.$wrapperInsumo=this.$modalInfo.find("#browse-showinfo-asiento-insumo"),this.asientoMovimientosList.fetch({reset:!0,data:{asiento2:this.model.get("id")}}),this.$modalInfo.modal("show")},addOne:function(a){var b=new app.AsientoMovimientosItemView({model:a});this.$wrapperList.append(b.render().el)},addAll:function(){this.asientoMovimientosList.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$wrapperList)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.$wrapperList)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AsientoMovimientosItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#show-info-asiento2-movimientos-tpl").html()||""),initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateAsientoView=Backbone.View.extend({el:"#asientos-create",template:_.template(a("#add-asiento-tpl").html()||""),templateFp:_.template(a("#add-rfacturap-tpl").html()||""),events:{"change select#asiento1_documento":"documentoChanged","change input#asiento2_base":"baseChanged","submit #form-asientos":"onStore"},initialize:function(){this.$modalFactura=a("#modal-facturap-component"),this.$wraperForm=this.$("#render-form-asientos"),this.asientoCuentasList=new app.AsientoCuentasList,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();a.edit=!1,this.$wraperForm.html(this.template(a)),this.$numero=this.$("#asiento1_numero"),this.$form=this.$("#form-asientos"),this.$formItem=this.$("#form-item-asiento"),this.$inputTasa=this.$("#asiento2_tasa"),this.$inputValor=this.$("#asiento2_valor"),this.$inputBase=this.$("#asiento2_base"),this.referenceViews(),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker()},referenceViews:function(){this.cuentasListView=new app.AsientoCuentasListView({collection:this.asientoCuentasList,parameters:{wrapper:this.el,edit:!0,dataFilter:{asiento:this.model.get("id")}}})},documentoChanged:function(c){var d=this,e=a(c.currentTarget).val();d.$numero.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("documentos.show",{documentos:e})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),_.isObject(a)&&(_.isUndefined(a.documento_tipo_consecutivo)||_.isNull(a.documento_tipo_consecutivo)||(d.$numero.val(a.documento_consecutivo+1),"M"==a.documento_tipo_consecutivo?d.$numero.prop("readonly",!1):"A"==a.documento_tipo_consecutivo&&d.$numero.prop("readonly",!0)))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);c.asiento1_id=this.model.get("id"),c.tercero_nit=c.tercero_nit?c.tercero_nit:c.asiento1_beneficiario,c.tercero_nombre=c.tercero_nombre?c.tercero_nombre:c.asiento1_beneficiario_nombre,b.Misc.evaluateActionsAccount({data:c,wrap:this.$el,callback:function(a){return function(b){Array.isArray(b)&&b.length>0?(a.asientoActionView instanceof Backbone.View&&(a.asientoActionView.stopListening(),a.asientoActionView.undelegateEvents()),a.asientoActionView=new app.AsientoActionView({model:a.model,collection:a.asientoCuentasList,parameters:{data:c,actions:b}}),a.asientoActionView.render()):a.model.save(c,{patch:!0,silent:!0})}}(this)})}},baseChanged:function(a){var b=this.$inputTasa.val(),c=this.$inputBase.inputmask("unmaskedvalue");!_.isUndefined(b)&&!_.isNull(b)&&b>0?this.$inputValor.val(b*c/100):this.$inputValor.val("")},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);this.createFacturapView instanceof Backbone.View&&(this.createFacturapView.stopListening(),this.createFacturapView.undelegateEvents()),Backbone.history.navigate(Route.route("asientos.edit",{asientos:c.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.EditAsientoView=Backbone.View.extend({el:"#asientos-create",template:_.template(a("#add-asiento-tpl").html()||""),templateFp:_.template(a("#add-rfacturap-tpl").html()||""),events:{"change select#asiento1_documento":"documentoChanged","submit #form-item-asiento":"onStoreItem","change input#asiento2_base":"baseChanged","click .submit-asiento":"submitAsiento","submit #form-asientos":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-asientos"),this.asientoCuentasList=new app.AsientoCuentasList,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();a.edit=!0,this.$wraperForm.html(this.template(a)),this.$numero=this.$("#asiento1_numero"),this.$form=this.$("#form-asientos"),this.$formItem=this.$("#form-item-asiento"),this.$inputTasa=this.$("#asiento2_tasa"),this.$inputValor=this.$("#asiento2_valor"),this.$inputBase=this.$("#asiento2_base"),this.$inputDocumento=this.$("#asiento1_documento"),this.referenceViews(),this.ready(),"A"==this.model.get("documento_tipo_consecutivo")&&this.$inputDocumento.change()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask()},referenceViews:function(){this.cuentasListView=new app.AsientoCuentasListView({collection:this.asientoCuentasList,parameters:{wrapper:this.el,edit:!0,dataFilter:{asiento:this.model.get("id")}}})},documentoChanged:function(c){var d=this,e=a(c.currentTarget).val();d.$numero.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("documentos.show",{documentos:e})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),_.isObject(a)&&(_.isUndefined(a.documento_tipo_consecutivo)||_.isNull(a.documento_tipo_consecutivo)||(d.$numero.val(a.documento_consecutivo+1),"M"==a.documento_tipo_consecutivo?d.$numero.prop("readonly",!1):"A"==a.documento_tipo_consecutivo&&d.$numero.prop("readonly",!0)))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},submitAsiento:function(a){this.$form.submit()},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},onStoreItem:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);c.asiento1_id=this.model.get("id"),c.tercero_nit=c.tercero_nit?c.tercero_nit:this.model.get("tercero_nit"),c.tercero_nombre=c.tercero_nombre?c.tercero_nombre:this.model.get("tercero_nombre"),b.Misc.evaluateActionsAccount({data:c,wrap:this.$el,callback:function(a){return function(b){Array.isArray(b)&&b.length>0?(a.asientoActionView instanceof Backbone.View&&(a.asientoActionView.stopListening(),a.asientoActionView.undelegateEvents()),a.asientoActionView=new app.AsientoActionView({model:a.model,collection:a.asientoCuentasList,parameters:{data:c,actions:b}}),a.asientoActionView.render()):a.asientoCuentasList.trigger("store",c)}}(this)})}},baseChanged:function(a){var b=this.$inputTasa.val(),c=this.$inputBase.inputmask("unmaskedvalue");!_.isUndefined(b)&&!_.isNull(b)&&b>0?this.$inputValor.val(b*c/100):this.$inputValor.val("")},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("asientos.edit",{asientos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CuotasFPListView=Backbone.View.extend({tagName:"tr",template:_.template(a("#add-rfacturap2-item-tpl").html()||""),initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ItemRolloINListView=Backbone.View.extend({tagName:"tr",template:null,initialize:function(b){b.parameters.choose?this.template=_.template(a("#choose-itemrollo-tpl").html()||""):this.template=_.template(a("#add-itemrollo-tpl").html()||""),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainAsientosView=Backbone.View.extend({el:"#asientos-main",initialize:function(){this.$asientosSearchTable=this.$("#asientos-search-table"),this.$asientosSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("asientos.index")),columns:[{data:"asiento1_numero",name:"asiento1_numero"},{data:"asiento1_ano",name:"asiento1_ano"},{data:"asiento1_mes",name:"asiento1_mes"},{data:"tercero_nit",name:"tercero_nit"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"tercero_razonsocial",name:"tercero_razonsocial"},{data:"tercero_nombre1",name:"tercero_nombre1"},{data:"tercero_nombre2",name:"tercero_nombre2"},{data:"tercero_apellido1",name:"tercero_apellido1"},{data:"tercero_apellido2",name:"tercero_apellido2"},{data:"asiento1_preguardado",name:"asiento1_preguardado"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nueva asiento',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("asientos.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return d.asiento1_preguardado?'<a href="'+b.Misc.urlFull(Route.route("asientos.edit",{asientos:d.id}))+'">'+a+' <span class="label label-warning">PRE</span></a>':'<a href="'+b.Misc.urlFull(Route.route("asientos.show",{asientos:d.id}))+'">'+a+"</a>"}},{targets:[1,2],width:"10%"},{targets:3,width:"15%"},{targets:4,searchable:!1},{targets:[5,6,7,8,9],visible:!1},{targets:10,visible:!1,searchable:!1}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ProductoSeriesINListView=Backbone.View.extend({tagName:"tr",template:_.template(a("#add-serie-tpl").html()||""),initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ShowAsientoView=Backbone.View.extend({el:"#asientos-show",initialize:function(){this.model.id!=d&&(this.asientoCuentasList=new app.AsientoCuentasList,this.referenceViews())},referenceViews:function(){this.cuentasListView=new app.AsientoCuentasListView({collection:this.asientoCuentasList,parameters:{wrapper:this.el,dataFilter:{asiento:this.model.get("id")}}})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateCentroCostoView=Backbone.View.extend({el:"#centrocosto-create",template:_.template(a("#add-centrocosto-tpl").html()||""),events:{"submit #form-centrocosto":"onStore"},parameters:{callback:""},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.msgSuccess="Centro de costo guardado con exito!",this.$wraperForm=this.$("#render-form-centrocosto"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);var f=this,g={toShow:function(){b.Misc.redirect(b.Misc.urlFull(Route.route("centroscosto.show",{centroscosto:c.id})))},default:function(){alertify.success(f.msgSuccess)}};g[this.parameters.callback]?g[this.parameters.callback]():g.default()}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainCentrosCostoView=Backbone.View.extend({el:"#centroscosto-main",initialize:function(){this.$centroscostoSearchTable=this.$("#centroscosto-search-table"),this.$centroscostoSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("centroscosto.index")),columns:[{data:"centrocosto_codigo",name:"centrocosto_codigo"},{data:"centrocosto_centro",name:"centrocosto_centro"},{data:"centrocosto_nombre",name:"centrocosto_nombre"},{data:"centrocosto_estructura",name:"centrocosto_estructura"},{data:"centrocosto_activo",name:"centrocosto_activo"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo centro de costo',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("centroscosto.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("centroscosto.show",{centroscosto:d.id}))+'">'+a+"</a>"}},{targets:3,width:"10%",render:function(a,b,c,d){return"S"==a?"Si":"No"}},{targets:[4],width:"10%",render:function(a,b,c,d){return a?"Si":"No"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentAddressView=Backbone.View.extend({el:"body",template:_.template(a("#koi-address-component-tpl").html()||""),events:{"click .btn-address-koi-component":"focusComponent","submit #form-address-component":"addAddress","change select#koi_nomenclatura1":"nomenclatura1Changed","change input#koi_numero1":"numero1Changed","change select#koi_alfabeto1":"alfabeto1Changed","change select#koi_bis":"bisChanged","change select#koi_alfabeto2":"alfabeto2Changed","change select#koi_cardinales1":"cardinales1Changed","change input#koi_numero2":"numero2Changed","change select#koi_alfabeto3":"alfabeto3Changed","change input#koi_numero3":"numero3Changed","change select#koi_cardinales2":"cardinales2Changed","click .btn-address-component-add-complement":"addComplement","click .btn-address-component-remove-item":"removeItem"},initialize:function(){this.$modalComponent=this.$("#modal-address-component")},focusComponent:function(b){a("#"+a(b.currentTarget).attr("data-field")).focus()},addressChanged:function(c){this.inputContent=a(c.currentTarget),this.$modalComponent.find(".content-modal").html(this.template({})),this.$addressField=this.$modalComponent.find("#koi_direccion"),this.$postalField=this.$modalComponent.find("#koi_postal"),this.$formComponent=this.$modalComponent.find("#form-address-component"),this.addressData=new Array(10),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),this.$formComponent.validator(),this.$modalComponent.modal("show")},addAddress:function(a){a.isDefaultPrevented()||(a.preventDefault(),this.inputContent.val(this.$addressField.val()),this.$modalComponent.modal("hide"))},nomenclatura1Changed:function(b){this.addressData[0]=a(b.currentTarget).val(),this.buildAddress()},numero1Changed:function(b){this.addressData[1]=a(b.currentTarget).val().trim(),this.buildAddress()},alfabeto1Changed:function(b){this.addressData[2]=a(b.currentTarget).val(),this.buildAddress()},bisChanged:function(b){this.addressData[3]=a(b.currentTarget).val(),this.buildAddress()},alfabeto2Changed:function(b){this.addressData[4]=a(b.currentTarget).val(),this.buildAddress()},cardinales1Changed:function(b){this.addressData[5]=a(b.currentTarget).val(),this.buildAddress()},numero2Changed:function(b){this.addressData[6]=a(b.currentTarget).val().trim(),this.buildAddress()},alfabeto3Changed:function(b){this.addressData[7]=a(b.currentTarget).val(),this.buildAddress()},numero3Changed:function(b){this.addressData[8]=a(b.currentTarget).val().trim(),this.buildAddress()},cardinales2Changed:function(b){this.addressData[9]=a(b.currentTarget).val(),this.buildAddress()},addComplement:function(a){a.preventDefault(),_.isUndefined(this.$("#koi_complementos1").val())||_.isNull(this.$("#koi_complementos1").val())||""==this.$("#koi_complementos1").val()||(this.addressData.push(this.$("#koi_complementos1").val()),_.isUndefined(this.$("#koi_complementos2").val())||_.isNull(this.$("#koi_complementos2").val())||""==this.$("#koi_complementos2").val()||this.addressData.push(this.$("#koi_complementos2").val()),this.$("#koi_complementos1").val(""),this.$("#koi_complementos2").val(""),this.buildAddress())},removeItem:function(a){a.preventDefault(),this.addressData.pop(),this.buildAddress()},buildAddress:function(){var b=a.grep(this.addressData,Boolean).join(" ").trim();this.$addressField.val(b)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ConfirmWindow=Backbone.View.extend({el:"#modal-confirm-component",parameters:{template:null,titleConfirm:"",onConfirm:null,callBack:null,dataFilter:{}},initialize:function(a){a!=d&&_.isObject(a.parameters)&&(this.parameters=_.extend({},this.parameters,a.parameters))},render:function(){var b={};return _.extend(b,this.parameters.dataFilter),this.$el.find(".content-modal").html(this.parameters.template(b)),this.$el.find(".inner-title-modal").html(this.parameters.titleConfirm),this.$el.modal("show"),a(this.el).off("click",".confirm-action"),this.undelegateEvents(),this.delegateEvents({"click .confirm-action":"onConfirm"}),this},onConfirm:function(a){a.preventDefault();this.$el.modal("hide"),"function"==typeof this.parameters.onConfirm&&this.parameters.onConfirm.call(null,this.parameters.dataFilter)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentConsecutiveView=Backbone.View.extend({el:"body",events:{"change .change-sucursal-consecutive-koi-component":"sucursalChange"},initialize:function(){},sucursalChange:function(c){var d=this;module=a(c.currentTarget).attr("data-module"),sucursal=a(c.currentTarget).val(),this.$consecutive=a("#"+a(c.currentTarget).attr("data-field")),this.$wrapperContent=a("#"+a(c.currentTarget).attr("data-wrapper")),a.ajax({url:b.Misc.urlFull(Route.route("sucursales.show",{sucursales:sucursal})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.$wrapperContent)}}).done(function(a){b.Misc.removeSpinner(d.$wrapperContent);var c=0;"traslados"==module&&(c=a.sucursal_traslado),d.$consecutive.val(c+1)}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wrapperContent),alertify.error(e)})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentCreateResourceView=Backbone.View.extend({el:"body",events:{"click .btn-add-resource-koi-component":"addResource","submit #form-create-resource-component":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$modalComponent=this.$("#modal-add-resource-component"),this.$wraperError=this.$("#error-resource-component"),this.$wraperContent=this.$("#content-create-resource-component").find(".modal-body")},addResource:function(b){if(this.resource=a(b.currentTarget).attr("data-resource"),this.$resourceField=a("#"+a(b.currentTarget).attr("data-field")),this.parameters={},"contacto"==this.resource&&(this.$inputPhone=this.$("#"+a(b.currentTarget).attr("data-phone")),this.$inputAddress=this.$("#"+a(b.currentTarget).attr("data-address")),this.$inputCity=this.$("#"+a(b.currentTarget).attr("data-city")),this.$inputEmail=this.$("#"+a(b.currentTarget).attr("data-email")),this.parameters.tcontacto_tercero=a(b.currentTarget).attr("data-tercero"),_.isUndefined(this.parameters.tcontacto_tercero)||_.isNull(this.parameters.tcontacto_tercero)||""==this.parameters.tcontacto_tercero))return void alertify.error("Por favor ingrese cliente antes agregar contacto.");var c=this,d={centrocosto:function(){c.$modalComponent.find(".inner-title-modal").html("Centros de costo"),c.model=new app.CentroCostoModel;var b=_.template(a("#add-centrocosto-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},folder:function(){c.$modalComponent.find(".inner-title-modal").html("Folder"),c.model=new app.FolderModel;var b=_.template(a("#add-folder-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},tercero:function(){c.$modalComponent.find(".inner-title-modal").html("Tercero"),c.model=new app.TerceroModel;var b=_.template(a("#add-tercero-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},grupo:function(){c.$modalComponent.find(".inner-title-modal").html("Grupo inventario"),c.model=new app.GrupoModel;var b=_.template(a("#add-grupo-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},subgrupo:function(){c.$modalComponent.find(".inner-title-modal").html("Subrupo inventario"),c.model=new app.SubGrupoModel;var b=_.template(a("#add-subgrupo-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},unidadmedida:function(){c.$modalComponent.find(".inner-title-modal").html("Unidad de medida"),c.model=new app.UnidadModel;var b=_.template(a("#add-unidad-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},producto:function(){c.$modalComponent.find(".inner-title-modal").html("Producto"),c.model=new app.ProductoModel;var b=_.template(a("#add-producto-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},contacto:function(){c.$resourceName=a("#"+a(b.currentTarget).attr("data-name")),c.$modalComponent.find(".inner-title-modal").html("Contacto"),c.model=new app.ContactoModel;var d=_.template(a("#add-contacto-tpl").html());c.$modalComponent.find(".content-modal").html(d(c.model.toJSON()))},areap:function(){c.$modalComponent.find(".inner-title-modal").html("Área de producción"),c.model=new app.AreapModel;var b=_.template(a("#add-areap-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},maquinap:function(){c.$modalComponent.find(".inner-title-modal").html("Máquina de producción"),c.model=new app.MaquinapModel;var b=_.template(a("#add-maquinap-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},materialp:function(){c.$modalComponent.find(".inner-title-modal").html("Material de producción"),c.model=new app.MaterialpModel;var b=_.template(a("#add-materialp-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},acabadop:function(){c.$modalComponent.find(".inner-title-modal").html("Acabado de producción"),c.model=new app.AcabadopModel;var b=_.template(a("#add-acabadop-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))}};d[this.resource]&&(d[this.resource](),this.$wraperError.hide().empty(),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner),this.ready(),this.$modalComponent.modal("show"))},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},onStore:function(c){if(!c.isDefaultPrevented()){this.$wraperError.hide().empty(),c.preventDefault();var d=a.extend({},this.parameters,b.Misc.formToJson(c.target));this.model.save(d,{patch:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$wraperContent)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.$wraperContent);var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return this.$wraperError.empty().append(e),void this.$wraperError.show();var f=this,g={centrocosto:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("centrocosto_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},folder:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("folder_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},tercero:function(){f.$resourceField.val(f.model.get("tercero_nit")).trigger("change")},grupo:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("grupo_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},subgrupo:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("subgrupo_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},unidadmedida:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("unidadmedida_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},producto:function(){f.$resourceField.val(f.model.get("producto_codigo")).trigger("change")},contacto:function(){f.$resourceField.val(f.model.get("id")),f.$resourceName.val(f.model.get("tcontacto_nombre")),f.$inputPhone.length&&f.$inputPhone.val(f.model.get("tcontacto_telefono")),
f.$inputAddress.length&&f.$inputAddress.val(f.model.get("tcontacto_direccion")),f.$inputEmail.length&&f.$inputEmail.val(f.model.get("tcontacto_email")),f.$inputCity.length&&f.$inputCity.val(f.model.get("tcontacto_municipio")).trigger("change")},areap:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("areap_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},maquinap:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("maquinap_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},materialp:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("materialp_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},acabadop:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("acabadop_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")}};g[this.resource]&&(g[this.resource](),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),this.$modalComponent.modal("hide"))}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentDocumentView=Backbone.View.extend({el:"body",events:{"change .select-filter-document-koi-component":"folderChanged"},initialize:function(){},folderChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper")),this.$inputDocument=this.$("#"+a(c.currentTarget).attr("data-documents"));var e=this.$inputContent.val();this.$inputDocument.find("option:gt(0)").remove(),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("documentos.filter")),type:"GET",data:{folder:e},beforeSend:function(){b.Misc.setSpinner(d.$wraperConten)}}).done(function(c){b.Misc.removeSpinner(d.$wraperConten),c.success&&_.isObject(c.documents)&&(a.each(c.documents,function(b,c){d.$inputDocument.append(a("<option></option>").attr("value",c.id).text(c.documento_nombre))}),d.$inputDocument.change())}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentGlobalView=Backbone.View.extend({el:"body",events:{"click .sidebar-toggle":"clickSidebar"},initialize:function(){},clickSidebar:function(a){a.preventDefault();var b=new Date;b.setFullYear(b.getFullYear()+1),c.cookie="sidebar_toggle="+(this.$el.hasClass("sidebar-collapse")?"":"sidebar-collapse")+"; path=/; expires="+b.toUTCString()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentReportView=Backbone.View.extend({el:"body",events:{"click .btn-export-pdf-koi-component":"onPdf","click .btn-export-xls-koi-component":"onXls"},initialize:function(){},onPdf:function(a){this.$("#type-report-koi-component").val("pdf")},onXls:function(a){this.$("#type-report-koi-component").val("xls")}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchContactoView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-contacto-component-tpl").html()||""),events:{"click .btn-koi-search-contacto-component-table":"searchOrden","click .btn-search-koi-search-contacto-component":"search","click .btn-clear-koi-search-contacto-component":"clear","click .a-koi-search-contacto-component-table":"setContacto"},initialize:function(){this.$modalComponent=this.$("#modal-search-contacto-component")},searchOrden:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchContactoNombres=this.$("#koi_search_contacto_nombres"),this.$searchContactoApellidos=this.$("#koi_search_contacto_apellidos"),this.$resourceTercero=this.$("#"+a(c.currentTarget).attr("data-tercero"));var e=this.$resourceTercero.attr("data-tercero");return _.isUndefined(e)||_.isNull(e)||""==e?void alertify.error("Por favor ingrese cliente antes agregar contacto."):(this.$contactoSearchTable=this.$modalComponent.find("#koi-search-contacto-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$inputPhone=this.$("#"+a(c.currentTarget).attr("data-phone")),this.$inputAddress=this.$("#"+a(c.currentTarget).attr("data-address")),this.$inputCity=this.$("#"+a(c.currentTarget).attr("data-city")),this.$inputEmail=this.$("#"+a(c.currentTarget).attr("data-email")),this.contactoSearchTable=this.$contactoSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("terceros.contactos.index")),data:function(a){a.tcontacto_nombres=d.$searchContactoNombres.val(),a.tcontacto_apellidos=d.$searchContactoApellidos.val(),a.tcontacto_tercero=e}},columns:[{data:"id",name:"id"},{data:"tcontacto_nombres",name:"tcontacto_nombres"},{data:"tcontacto_apellidos",name:"tcontacto_apellidos"},{data:"tcontacto_nombre",name:"tcontacto_nombre"},{data:"tcontacto_telefono",name:"tcontacto_telefono"},{data:"municipio_nombre",name:"municipio_nombre"},{data:"tcontacto_direccion",name:"tcontacto_direccion"},{data:"tcontacto_municipio",name:"tcontacto_municipio"},{data:"tcontacto_email",name:"tcontacto_email"}],columnDefs:[{targets:3,width:"40%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-contacto-component-table">'+a+"</a>"}},{targets:[0,1,2,7,8],visible:!1}]}),this.ready(),void this.$modalComponent.modal("show"))},setContacto:function(b){b.preventDefault();var c=this.contactoSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.id),this.$inputName.val(c.tcontacto_nombre),this.$inputPhone.length&&this.$inputPhone.val(c.tcontacto_telefono),this.$inputAddress.length&&this.$inputAddress.val(c.tcontacto_direccion),this.$inputCity.length&&this.$inputCity.val(c.tcontacto_municipio).trigger("change"),this.$inputEmail.length&&this.$inputEmail.val(c.tcontacto_email),this.$modalComponent.modal("hide")},search:function(a){a.preventDefault(),this.contactoSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchContactoNombres.val(""),this.$searchContactoApellidos.val(""),this.contactoSearchTable.ajax.reload()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchCuentaView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-plancuenta-component-tpl").html()||""),events:{"change input.plancuenta-koi-component":"cuentaChanged","click .btn-koi-search-plancuenta-component":"searchCuenta","click .btn-search-koi-search-plancuenta-component":"search","click .btn-clear-koi-search-plancuenta-component":"clear","click .a-koi-search-plancuenta-component-table":"setCuenta"},initialize:function(){this.$modalComponent=this.$("#modal-search-component")},searchCuenta:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchCuenta=this.$("#koi_search_plancuentas_cuenta"),this.$searchName=this.$("#koi_search_plancuentas_nombre"),this.$plancuentasSearchTable=this.$modalComponent.find("#koi-search-plancuenta-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+this.$inputContent.attr("data-name")),this.$inputCentro=this.$("#"+this.$inputContent.attr("data-centro")),this.$inputBase=this.$("#"+this.$inputContent.attr("data-base")),this.$inputValor=this.$("#"+this.$inputContent.attr("data-valor")),this.$inputTasa=this.$("#"+this.$inputContent.attr("data-tasa")),this.plancuentasSearchTable=this.$plancuentasSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("plancuentas.index")),data:function(a){a.plancuentas_cuenta=d.$searchCuenta.val(),a.plancuentas_nombre=d.$searchName.val()}},columns:[{data:"plancuentas_cuenta",name:"plancuentas_cuenta"},{data:"plancuentas_nivel",name:"plancuentas_nivel"},{data:"plancuentas_nombre",name:"plancuentas_nombre"},{data:"plancuentas_naturaleza",name:"plancuentas_naturaleza"},{data:"plancuentas_tercero",name:"plancuentas_tercero"}],columnDefs:[{targets:0,width:"15%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-plancuenta-component-table">'+a+"</a>"}},{targets:1,width:"10%",searchable:!1},{targets:3,width:"10%",searchable:!1,render:function(a,b,c,d){return"D"==a?"Débito":"Crédito"}},{targets:4,width:"10%",searchable:!1,render:function(a,b,c,d){return a?"Si":"No"}}]}),this.ready(),this.$modalComponent.modal("show")},setCuenta:function(b){b.preventDefault();var c=this.plancuentasSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.plancuentas_cuenta),this.$inputName.val(c.plancuentas_nombre),this.$inputName.val(c.plancuentas_nombre),this.$inputCentro.length&&this.$inputCentro.val("").trigger("change"),this.$inputBase.length&&this.$inputBase.prop("readonly",!0),this.$modalComponent.modal("hide"),this.actions(c)},search:function(a){a.preventDefault(),this.plancuentasSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCuenta.val(""),this.$searchName.val(""),this.plancuentasSearchTable.ajax.reload()},cuentaChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$inputBase=this.$("#"+a(c.currentTarget).attr("data-base")),this.$inputTasa=this.$("#"+a(c.currentTarget).attr("data-tasa")),this.$inputValor=this.$("#"+a(c.currentTarget).attr("data-valor")),this.$inputCentro=this.$("#"+a(c.currentTarget).attr("data-centro")),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper"));var e=this.$inputContent.val();this.$inputName.val(""),this.$inputCentro.length&&this.$inputCentro.val("").trigger("change"),this.$inputBase.length&&this.$inputBase.prop("readonly",!0),this.$inputTasa.length&&this.$inputTasa.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("plancuentas.search")),type:"GET",data:{plancuentas_cuenta:e},beforeSend:function(){b.Misc.setSpinner(d.$wraperConten)}}).done(function(a){b.Misc.removeSpinner(d.$wraperConten),a.success&&(_.isUndefined(a.plancuentas_nombre)||_.isNull(a.plancuentas_nombre)||d.$inputName.val(a.plancuentas_nombre),d.actions(a))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})},actions:function(a){if(this.$inputBase.length)if(!_.isUndefined(a.plancuentas_tasa)&&!_.isNull(a.plancuentas_tasa)&&a.plancuentas_tasa>0){this.$inputBase.prop("readonly",!1);var b=this.$inputBase.inputmask("unmaskedvalue");this.$inputValor.val(a.plancuentas_tasa*b/100)}else this.$inputBase.val("");this.$inputCentro.length&&!_.isUndefined(a.plancuentas_centro)&&!_.isNull(a.plancuentas_centro)&&a.plancuentas_centro>0&&this.$inputCentro.val(a.plancuentas_centro).trigger("change"),this.$inputTasa.length&&(!_.isUndefined(a.plancuentas_tasa)&&!_.isNull(a.plancuentas_tasa)&&a.plancuentas_tasa>0?this.$inputTasa.val(a.plancuentas_tasa):this.$inputTasa.val(""))},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchOrdenPView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-ordenp-component-tpl").html()||""),events:{"change input.ordenp-koi-component":"ordenpChanged","click .btn-koi-search-orden-component-table":"searchOrden","click .btn-search-koi-search-ordenp-component":"search","click .btn-clear-koi-search-ordenp-component":"clear","click .a-koi-search-ordenp-component-table":"setOrden"},initialize:function(){this.$modalComponent=this.$("#modal-search-ordenp-component")},searchOrden:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchordenpOrden=this.$("#searchordenp_ordenp_numero"),this.$searchordenpTercero=this.$("#searchordenp_tercero"),this.$searchordenpTerceroNombre=this.$("#searchordenp_tercero_nombre"),this.$ordersSearchTable=this.$modalComponent.find("#koi-search-ordenp-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+this.$inputContent.attr("data-name")),this.ordersSearchTable=this.$ordersSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("ordenes.index")),data:function(a){a.orden_numero=d.$searchordenpOrden.val(),a.orden_tercero_nit=d.$searchordenpTercero.val()}},columns:[{data:"orden_codigo",name:"orden_codigo"},{data:"orden_ano",name:"orden_ano"},{data:"orden_numero",name:"orden_numero"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"orden_fecha",name:"orden_fecha"}],order:[[1,"desc"],[2,"desc"]],columnDefs:[{targets:0,width:"10%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-ordenp-component-table">'+a+"</a>"}},{targets:[1,2],visible:!1},{targets:4,render:function(a,c,d,e){return b.moment(a).format("YYYY-MM-DD")}}]}),this.ready(),this.$modalComponent.modal("show")},setOrden:function(b){b.preventDefault();var c=this.ordersSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.orden_codigo),this.$inputName.val(c.tercero_nombre),this.$modalComponent.modal("hide")},search:function(a){a.preventDefault(),this.ordersSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchordenpOrden.val(""),this.$searchordenpTercero.val(""),this.$searchordenpTerceroNombre.val(""),this.ordersSearchTable.ajax.reload()},ordenpChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper"));var e=this.$inputContent.val();this.$inputName.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("ordenes.search")),type:"GET",data:{orden_codigo:e},beforeSend:function(){d.$inputName.val(""),b.Misc.setSpinner(d.$wraperConten)}}).done(function(a){b.Misc.removeSpinner(d.$wraperConten),a.success&&(_.isUndefined(a.tercero_nombre)||_.isNull(a.tercero_nombre)||d.$inputName.val(a.tercero_nombre))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchProductoView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-producto-component-tpl").html()||""),events:{"change input.producto-koi-component":"productoChanged","click .btn-koi-search-producto-component":"searchProducto","click .btn-search-koi-search-producto-component":"search","click .btn-clear-koi-search-producto-component":"clear","click .a-koi-search-producto-component-table":"setProducto"},initialize:function(){this.$modalComponent=this.$("#modal-search-producto-component")},searchProducto:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchCodigo=this.$("#koi_search_producto_codigo"),this.$searchNombre=this.$("#koi_search_producto_nombre"),this.$productosSearchTable=this.$modalComponent.find("#koi-search-producto-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+this.$inputContent.attr("data-name")),this.productosSearchTable=this.$productosSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("productos.index")),data:function(a){a.producto_codigo=d.$searchCodigo.val(),a.producto_nombre=d.$searchNombre.val()}},columns:[{data:"producto_codigo",name:"producto_codigo"},{data:"producto_nombre",name:"producto_nombre"}],columnDefs:[{targets:0,width:"10%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-producto-component-table">'+a+"</a>"}}]}),this.ready(),this.$modalComponent.modal("show")},setProducto:function(b){b.preventDefault();var c=this.productosSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.producto_codigo),this.$inputName.val(c.producto_nombre),this.$modalComponent.modal("hide")},search:function(a){a.preventDefault(),this.productosSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCodigo.val(""),this.$searchNombre.val(""),this.productosSearchTable.ajax.reload()},productoChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper"));var e=this.$inputContent.val();this.$inputName.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("productos.search")),type:"GET",data:{producto_codigo:e},beforeSend:function(){d.$inputName.val(""),b.Misc.setSpinner(d.$wraperConten)}}).done(function(a){b.Misc.removeSpinner(d.$wraperConten),a.success&&(_.isUndefined(a.producto_nombre)||_.isNull(a.producto_nombre)||d.$inputName.val(a.producto_nombre))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchTerceroView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-tercero-component-tpl").html()||""),events:{"change input.tercero-koi-component":"terceroChanged","click .btn-koi-search-tercero-component-table":"searchTercero","click .btn-search-koi-search-tercero-component":"search","click .btn-clear-koi-search-tercero-component":"clear","click .a-koi-search-tercero-component-table":"setTercero"},initialize:function(){this.$modalComponent=this.$("#modal-search-component")},searchTercero:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchNit=this.$("#koi_search_tercero_nit"),this.$searchName=this.$("#koi_search_tercero_nombre"),this.$tercerosSearchTable=this.$modalComponent.find("#koi-search-tercero-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+this.$inputContent.attr("data-name")),this.$btnContact=this.$("#"+this.$inputContent.attr("data-contacto")),this.tercerosSearchTable=this.$tercerosSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("terceros.index")),data:function(a){a.tercero_nit=d.$searchNit.val(),a.tercero_nombre=d.$searchName.val()}},columns:[{data:"tercero_nit",name:"tercero_nit"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"tercero_razonsocial",name:"tercero_razonsocial"},{data:"tercero_nombre1",name:"tercero_nombre1"},{data:"tercero_nombre2",name:"tercero_nombre2"},{data:"tercero_apellido1",name:"tercero_apellido1"},{data:"tercero_apellido2",name:"tercero_apellido2"}],columnDefs:[{targets:0,width:"15%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-tercero-component-table">'+a+"</a>"}},{targets:1,width:"85%",searchable:!1},{targets:[2,3,4,5,6],visible:!1,searchable:!1}]}),this.ready(),this.$modalComponent.modal("show")},setTercero:function(b){b.preventDefault();var c=this.tercerosSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.tercero_nit),this.$inputName.val(c.tercero_nombre),this.$btnContact.length>0&&this.$btnContact.attr("data-tercero",c.id),this.$modalComponent.modal("hide")},search:function(a){a.preventDefault(),this.tercerosSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchNit.val(""),this.$searchName.val(""),this.tercerosSearchTable.ajax.reload()},terceroChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper")),this.$btnContact=this.$("#"+this.$inputContent.attr("data-contacto")),this.$btnContact.length>0&&this.$btnContact.attr("data-tercero","");var e=this.$inputContent.val();this.$inputName.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("terceros.search")),type:"GET",data:{tercero_nit:e},beforeSend:function(){d.$inputName.val(""),b.Misc.setSpinner(d.$wraperConten)}}).done(function(a){b.Misc.removeSpinner(d.$wraperConten),a.success&&(_.isUndefined(a.tercero_nombre)||_.isNull(a.tercero_nombre)||d.$inputName.val(a.tercero_nombre),d.$btnContact.length>0&&d.$btnContact.attr("data-tercero",a.id))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentTerceroView=Backbone.View.extend({el:"body",templateName:_.template(a("#tercero-name-tpl").html()||""),events:{"change .change-nit-koi-component":"nitChanged","change .change-actividad-koi-component":"actividadChanged"},initialize:function(){},nitChanged:function(c){var d=this;this.$dv=a("#"+a(c.currentTarget).attr("data-field")),this.$wraperContent=this.$("#tercero-create"),this.$wraperContent.length||(this.$modalComponent=this.$("#modal-add-resource-component"),this.$wraperContent=this.$modalComponent.find(".modal-body")),a.ajax({url:b.Misc.urlFull(Route.route("terceros.dv")),type:"GET",data:{tercero_nit:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.$wraperContent)}}).done(function(a){b.Misc.removeSpinner(d.$wraperContent),a.success&&d.$dv.val(a.dv)}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperContent),alertify.error(e)})},actividadChanged:function(c){var d=this;this.$retecree=a("#"+a(c.currentTarget).attr("data-field")),this.$wraperContent=this.$("#tercero-create"),this.$wraperContent.length||(this.$modalComponent=this.$("#modal-add-resource-component"),this.$wraperContent=this.$modalComponent.find(".modal-body")),a.ajax({url:b.Misc.urlFull(Route.route("terceros.rcree")),type:"GET",data:{tercero_actividad:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.$wraperContent)}}).done(function(a){b.Misc.removeSpinner(d.$wraperContent),a.success&&(_.isUndefined(a.rcree)||_.isNull(a.rcree)||d.$retecree.html(a.rcree))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperContent),alertify.error(e)})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainDepartamentoView=Backbone.View.extend({el:"#departamentos-main",initialize:function(){this.$departamentosSearchTable=this.$("#departamentos-search-table"),this.$departamentosSearchTable.DataTable({processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("departamentos.index")),columns:[{data:"departamento_codigo",name:"departamento_codigo"},{data:"departamento_nombre",name:"departamento_nombre"}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateDocumentoView=Backbone.View.extend({el:"#documento-create",template:_.template(a("#add-documento-tpl").html()||""),events:{"submit #form-documento":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-documento"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("documentos.show",{documentos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainDocumentosView=Backbone.View.extend({el:"#documentos-main",initialize:function(){this.$documentosSearchTable=this.$("#documentos-search-table"),this.$documentosSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("documentos.index")),columns:[{data:"documento_codigo",name:"documento_codigo"},{data:"documento_nombre",name:"documento_nombre"},{data:"folder_codigo",name:"folder_codigo"},{data:"folder_id",name:"folder_id"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo documento',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("documentos.create")))}}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("documentos.show",{documentos:d.id}))+'">'+a+"</a>"}},{targets:1,width:"70%"},{targets:2,width:"15%",render:function(a,c,d,e){return _.isNull(d.folder_codigo)||_.isUndefined(d.folder_codigo)?"":'<a href="'+b.Misc.urlFull(Route.route("folders.show",{folders:d.folder_id}))+'">'+a+"</a>"}},{targets:3,visible:!1,searchable:!1}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateEmpresaView=Backbone.View.extend({el:"#empresa-create",template:_.template(a("#add-company-tpl").html()||""),templateName:_.template(a("#tercero-name-tpl").html()||""),events:{"change input#tercero_nit":"nitChanged","change select#tercero_persona":"personaChanged","change select#tercero_actividad":"actividadChanged","submit #form-create-empresa":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-empresa"),this.listenTo(this.model,"change:id",this.render),this.listenTo(this.model,"change:tercero_persona",this.renderName),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$dv=this.$("#tercero_digito"),this.$retecree=this.$("#tercero_retecree"),this.ready()},renderName:function(a,b,c){this.$("#content-render-name").html(this.templateName(this.model.toJSON())),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},nitChanged:function(c){var d=this;a.ajax({url:b.Misc.urlFull(Route.route("terceros.dv")),type:"GET",data:{tercero_nit:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),a.success&&d.$dv.val(a.dv)}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},personaChanged:function(b){this.model.set({tercero_persona:a(b.currentTarget).val()})},actividadChanged:function(c){var d=this;a.ajax({url:b.Misc.urlFull(Route.route("terceros.rcree")),type:"GET",data:{tercero_actividad:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),a.success&&(_.isUndefined(a.rcree)||_.isNull(a.rcree)||d.$retecree.html(a.rcree))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);alertify.success("Empresa fue actualizada con éxito.")}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateFolderView=Backbone.View.extend({el:"#folder-create",template:_.template(a("#add-folder-tpl").html()||""),events:{"submit #form-folder":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-folder"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("folders.show",{folders:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainFoldersView=Backbone.View.extend({el:"#folders-main",initialize:function(){this.$foldersSearchTable=this.$("#folders-search-table"),this.$foldersSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("folders.index")),columns:[{data:"folder_codigo",name:"folder_codigo"},{data:"folder_nombre",name:"folder_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Agregar Folder',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("folders.create")))}}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("folders.show",{folders:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateGrupoView=Backbone.View.extend({el:"#grupos-create",template:_.template(a("#add-grupo-tpl").html()||""),events:{"submit #form-grupos":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-grupo"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),
!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("grupos.show",{grupos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainGruposView=Backbone.View.extend({el:"#grupos-main",initialize:function(){this.$gruposSearchTable=this.$("#grupos-search-table"),this.$gruposSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("grupos.index")),columns:[{data:"grupo_codigo",name:"grupo_codigo"},{data:"grupo_nombre",name:"grupo_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo grupo',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("grupos.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("grupos.show",{grupos:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.UserLoginView=Backbone.View.extend({el:"#login-box",initialize:function(){this.$loginForm=a("#form-login-account"),this.$loginForm.validator()},render:function(){}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateMaquinapView=Backbone.View.extend({el:"#maquinasp-create",template:_.template(a("#add-maquinap-tpl").html()||""),events:{"submit #form-maquinasp":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-maquinap"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("maquinasp.show",{maquinasp:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainMaquinaspView=Backbone.View.extend({el:"#maquinasp-main",initialize:function(){this.$maquinaspSearchTable=this.$("#maquinasp-search-table"),this.$maquinaspSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("maquinasp.index")),columns:[{data:"id",name:"id"},{data:"maquinap_nombre",name:"maquinap_nombre"}],buttons:[{text:'<i class="fa fa-plus"></i> Nueva máquina',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("maquinasp.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("maquinasp.show",{maquinasp:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateMaterialpView=Backbone.View.extend({el:"#materialesp-create",template:_.template(a("#add-materialp-tpl").html()||""),events:{"submit #form-materialesp":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-materialp"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("materialesp.show",{materialesp:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainMaterialespView=Backbone.View.extend({el:"#materialesp-main",initialize:function(){this.$materialespSearchTable=this.$("#materialesp-search-table"),this.$materialespSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("materialesp.index")),columns:[{data:"id",name:"id"},{data:"materialp_nombre",name:"materialp_nombre"}],buttons:[{text:'<i class="fa fa-plus"></i> Nuevo material',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("materialesp.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("materialesp.show",{materialesp:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainMunicipioView=Backbone.View.extend({el:"#municipios-main",initialize:function(){this.$municipiosSearchTable=this.$("#municipios-search-table"),this.$municipiosSearchTable.DataTable({processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("municipios.index")),columns:[{data:"departamento_codigo",name:"koi_departamento.departamento_codigo"},{data:"departamento_nombre",name:"departamento_nombre"},{data:"municipio_codigo",name:"municipio_codigo"},{data:"municipio_nombre",name:"municipio_nombre"},{data:"departamento_id",name:"departamento_id"}],columnDefs:[{targets:0,width:"15%"},{targets:1,width:"35%"},{targets:2,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("departamentos.show",{departamentos:d.departamento_id}))+'">'+a+"</a>"}},{targets:3,width:"35%"},{targets:4,visible:!1,searchable:!1}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AcabadosProductopListView=Backbone.View.extend({el:"#browse-orden-producto-acabados-list",events:{},parameters:{wrapper:null,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:this.parameters.dataFilter,reset:!0})},render:function(){},addOne:function(a){var b=new app.AcabadosProductopItemView({model:a});a.view=b,this.$el.append(b.render().el)},addAll:function(){this.$el.find("tbody").html(""),this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$el)},responseServer:function(a,c,d){this.ready(),b.Misc.removeSpinner(this.$el)},ready:function(){"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AcabadosProductopItemView=Backbone.View.extend({tagName:"div",className:"row",template:_.template(a("#orden-producto-acabado-item-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateOrdenpView=Backbone.View.extend({el:"#ordenes-create",template:_.template(a("#add-ordenp-tpl").html()||""),events:{"click .submit-ordenp":"submitOrdenp","click .close-ordenp":"closeOrdenp","click .clone-ordenp":"cloneOrdenp","click .export-ordenp":"exportOrdenp","submit #form-ordenes":"onStore","submit #form-despachosp":"onStoreDespacho"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-orden"),this.model.id!=d&&(this.productopOrdenList=new app.ProductopOrdenList,this.despachopOrdenList=new app.DespachopOrdenList,this.despachospPendientesOrdenList=new app.DespachospPendientesOrdenList),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$form=this.$("#form-ordenes"),this.model.id!=d&&this.referenceViews(),this.ready()},renderIva:function(a,b,c){},referenceViews:function(){this.productopOrdenListView=new app.ProductopOrdenListView({collection:this.productopOrdenList,parameters:{edit:!0,iva:this.model.get("orden_iva"),wrapper:this.$("#wrapper-productop-orden"),dataFilter:{orden2_orden:this.model.get("id")}}}),this.despachospPendientesOrdenListView=new app.DespachospPendientesOrdenListView({collection:this.despachospPendientesOrdenList,parameters:{dataFilter:{orden2_orden:this.model.get("id")}}}),this.despachopOrdenListView=new app.DespachopOrdenListView({collection:this.despachopOrdenList,parameters:{edit:!0,wrapper:this.$el,collectionPendientes:this.despachospPendientesOrdenList,dataFilter:{despachop1_orden:this.model.get("id")}}})},submitOrdenp:function(a){this.$form.submit()},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},onStoreDespacho:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);c.despachop1_orden=this.model.get("id"),this.despachopOrdenList.trigger("store",c)}},exportOrdenp:function(a){a.preventDefault(),b.open(b.Misc.urlFull(Route.route("ordenes.exportar",{ordenes:this.model.get("id")})),"_blank")},closeOrdenp:function(c){c.preventDefault();var d=this,e=new b.app.ConfirmWindow({parameters:{dataFilter:{orden_codigo:d.model.get("orden_codigo")},template:_.template(a("#ordenp-close-confirm-tpl").html()||""),titleConfirm:"Cerrar orden de producción",onConfirm:function(){a.ajax({url:b.Misc.urlFull(Route.route("ordenes.cerrar",{ordenes:d.model.get("id")})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){if(b.Misc.removeSpinner(d.el),!_.isUndefined(a.success)){var c=a.success?"":a.errors;if(_.isObject(a.errors)&&(c=b.Misc.parseErrors(a.errors)),!a.success)return void alertify.error(c);b.Misc.successRedirect(a.msg,b.Misc.urlFull(Route.route("ordenes.show",{ordenes:d.model.get("id")})))}}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})}}});e.render()},cloneOrdenp:function(c){c.preventDefault();var d=this;data={orden_codigo:this.model.get("id")};var e=new b.app.ConfirmWindow({parameters:{dataFilter:data,template:_.template(a("#ordenp-clone-confirm-tpl").html()||""),titleConfirm:"Clonar orden de producción",onConfirm:function(){b.Misc.cloneOrden({data:data,wrap:d.$el,callback:function(a){return function(a){b.Misc.successRedirect(a.msg,b.Misc.urlFull(Route.route("ordenes.edit",{ordenes:a.id})))}}(d)})}}});e.render()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initTimePicker&&b.initComponent.initTimePicker(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);this.createOrdenpView instanceof Backbone.View&&(this.createOrdenpView.stopListening(),this.createOrdenpView.undelegateEvents()),Backbone.history.navigate(Route.route("ordenes.edit",{ordenes:c.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateOrdenp2View=Backbone.View.extend({el:"#ordenes-productos-create",template:_.template(a("#add-orden-producto-tpl").html()||""),events:{"change #orden2_precio_formula":"changeFormula","change #orden2_round_formula":"changeFormula","ifChanged #orden2_tiro":"changedTiro","ifChanged #orden2_retiro":"changedRetiro","click .submit-ordenp2":"submitOrdenp2","submit #form-orden-producto":"onStore"},parameters:{data:{orden2_productop:null}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-orden-producto"),this.maquinasProductopList=new app.MaquinasProductopList,this.materialesProductopList=new app.MaterialesProductopList,this.acabadosProductopList=new app.AcabadosProductopList,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$form=this.$("#form-orden-producto"),this.$inputFormula=this.$("#orden2_precio_formula"),this.$inputRound=this.$("#orden2_round_formula"),this.$inputPrecio=this.$("#orden2_precio_venta"),this.$inputYellow=this.$("#orden2_yellow"),this.$inputMagenta=this.$("#orden2_magenta"),this.$inputCyan=this.$("#orden2_cyan"),this.$inputKey=this.$("#orden2_key"),this.$inputYellow2=this.$("#orden2_yellow2"),this.$inputMagenta2=this.$("#orden2_magenta2"),this.$inputCyan2=this.$("#orden2_cyan2"),this.$inputKey2=this.$("#orden2_key2"),this.referenceViews(),this.ready()},referenceViews:function(){var a={productop:this.parameters.data.orden2_productop};this.model.id!=d&&(a.orden2=this.model.get("id"),a.productop=this.model.get("orden2_productop")),this.maquinasProductopListView=new app.MaquinasProductopListView({collection:this.maquinasProductopList,parameters:{dataFilter:a}}),this.materialesProductopListView=new app.MaterialesProductopListView({collection:this.materialesProductopList,parameters:{dataFilter:a}}),this.acabadosProductopListView=new app.AcabadosProductopListView({collection:this.acabadosProductopList,parameters:{dataFilter:a}})},changeFormula:function(){var c=this,d=this.$inputFormula.val(),e=this.$inputRound.val();d=d.replaceAll("(","n"),d=d.replaceAll(")","m"),d=d.replaceAll("+","t"),a.ajax({url:b.Misc.urlFull(Route.route("ordenes.productos.formula")),type:"GET",data:{equation:d,round:e},beforeSend:function(){b.Misc.setSpinner(c.el)}}).done(function(a){b.Misc.removeSpinner(c.el),c.$inputPrecio.val(a.precio_venta)}).fail(function(a,d,e){c.$inputPrecio.val(0),b.Misc.removeSpinner(c.el),alertify.error(e)})},changedTiro:function(b){var c=a(b.target).is(":checked");c?(this.$inputYellow.iCheck("check"),this.$inputMagenta.iCheck("check"),this.$inputCyan.iCheck("check"),this.$inputKey.iCheck("check")):(this.$inputYellow.iCheck("uncheck"),this.$inputMagenta.iCheck("uncheck"),this.$inputCyan.iCheck("uncheck"),this.$inputKey.iCheck("uncheck"))},changedRetiro:function(b){var c=a(b.target).is(":checked");c?(this.$inputYellow2.iCheck("check"),this.$inputMagenta2.iCheck("check"),this.$inputCyan2.iCheck("check"),this.$inputKey2.iCheck("check")):(this.$inputYellow2.iCheck("uncheck"),this.$inputMagenta2.iCheck("uncheck"),this.$inputCyan2.iCheck("uncheck"),this.$inputKey2.iCheck("uncheck"))},submitOrdenp2:function(a){this.$form.submit()},onStore:function(c){if(!c.isDefaultPrevented()){c.preventDefault();var d=a.extend({},b.Misc.formToJson(c.target),this.parameters.data);this.model.save(d,{patch:!0,silent:!0})}},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initTimePicker&&b.initComponent.initTimePicker(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("ordenes.edit",{ordenes:this.model.get("orden2_orden")})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.DespachopOrdenListView=Backbone.View.extend({el:"#browse-orden-despachosp-list",events:{"click .item-orden-despacho-remove":"removeOne"},parameters:{wrapper:null,collectionPendientes:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{despachop1_orden:this.parameters.dataFilter.despachop1_orden},reset:!0})},render:function(){},addOne:function(a){var b=new app.DespachopOrdenItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.append(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper);var d=new app.DespachopModel;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a),c.parameters.collectionPendientes.fetch({data:{orden2_orden:c.parameters.dataFilter.despachop1_orden},reset:!0})}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove(),f.collection.remove(a),f.parameters.collectionPendientes.fetch({data:{orden2_orden:f.parameters.dataFilter.despachop1_orden},reset:!0})}}})},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.DespachopOrdenItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#ordenp-despacho-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.DespachospPendientesOrdenListView=Backbone.View.extend({el:"#browse-orden-despachosp-pendientes-list",events:{},parameters:{wrapper:null,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{orden2_orden:this.parameters.dataFilter.orden2_orden},reset:!0})},render:function(){},addOne:function(a){var b=new app.DespachopPendienteOrdenItemView({model:a});a.view=b,this.$el.prepend(b.render().el)},addAll:function(){this.$el.find("tbody").html(""),this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$el)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.$el)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.DespachopPendienteOrdenItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#ordenp-despacho-pendiente-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainOrdenesView=Backbone.View.extend({el:"#ordenes-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var c=this;this.$ordersSearchTable=this.$("#ordenes-search-table"),this.$searchordenpOrden=this.$("#searchordenp_ordenp_numero"),this.$searchordenpTercero=this.$("#searchordenp_tercero"),this.$searchordenpTerceroName=this.$("#searchordenp_tercero_nombre"),this.$searchordenpEstado=this.$("#searchordenp_ordenp_estado"),this.$searchordenpReferencia=this.$("#searchordenp_ordenp_referencia"),this.$searchordenpProductop=this.$("#searchordenp_ordenp_productop"),this.ordersSearchTable=this.$ordersSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("ordenes.index")),data:function(a){a.persistent=!0,a.orden_numero=c.$searchordenpOrden.val(),a.orden_tercero_nit=c.$searchordenpTercero.val(),a.orden_tercero_nombre=c.$searchordenpTerceroName.val(),a.orden_estado=c.$searchordenpEstado.val(),a.orden_referencia=c.$searchordenpReferencia.val(),a.orden_productop=c.$searchordenpProductop.val()}},columns:[{data:"orden_codigo",name:"orden_codigo"},{data:"orden_ano",name:"orden_ano"},{data:"orden_numero",name:"orden_numero"},{data:"orden_fecha_inicio",name:"orden_fecha_inicio"},{data:"orden_fecha_entrega",name:"orden_fecha_entrega"},{data:"orden_hora_entrega",name:"orden_hora_entrega"},{data:"tercero_nombre",name:"tercero_nombre"}],order:[[1,"desc"],[2,"desc"]],columnDefs:[{targets:0,width:"10%",searchable:!1,render:function(a,c,d,e){return!d.orden_abierta||d.orden_anulada?'<a href="'+b.Misc.urlFull(Route.route("ordenes.show",{ordenes:d.id}))+'">'+a+"</a>":'<a href="'+b.Misc.urlFull(Route.route("ordenes.edit",{ordenes:d.id}))+'">'+a+"</a>"}},{targets:[1,2],visible:!1,width:"10%"},{targets:3,width:"10%"}],fnRowCallback:function(b,c){c.orden_abierta?a(b).css({color:"#00a65a"}):c.orden_anulada&&a(b).css({color:"red"})}})},search:function(a){a.preventDefault(),this.ordersSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchordenpOrden.val(""),this.$searchordenpTercero.val(""),this.$searchordenpTerceroName.val(""),this.$searchordenpEstado.val(""),this.$searchordenpReferencia.val(""),this.$searchordenpProductop.val("").trigger("change"),this.ordersSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaquinasProductopListView=Backbone.View.extend({el:"#browse-orden-producto-maquinas-list",events:{},parameters:{wrapper:null,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:this.parameters.dataFilter,reset:!0})},render:function(){},addOne:function(a){var b=new app.MaquinasProductopItemView({model:a});a.view=b,this.$el.append(b.render().el)},addAll:function(){this.$el.find("tbody").html(""),this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$el)},responseServer:function(a,c,d){this.ready(),b.Misc.removeSpinner(this.$el)},ready:function(){"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaquinasProductopItemView=Backbone.View.extend({tagName:"div",className:"row",template:_.template(a("#orden-producto-maquina-item-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaterialesProductopListView=Backbone.View.extend({el:"#browse-orden-producto-materiales-list",events:{},parameters:{wrapper:null,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:this.parameters.dataFilter,reset:!0})},render:function(){},addOne:function(a){var b=new app.MaterialesProductopItemView({model:a});a.view=b,this.$el.append(b.render().el)},addAll:function(){this.$el.find("tbody").html(""),this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$el)},responseServer:function(a,c,d){this.ready(),b.Misc.removeSpinner(this.$el)},ready:function(){"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaterialesProductopItemView=Backbone.View.extend({tagName:"div",className:"row",template:_.template(a("#orden-producto-material-item-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ProductopOrdenListView=Backbone.View.extend({el:"#browse-orden-productop-list",events:{"click .item-orden-producto-remove":"removeOne","click .item-orden-producto-clone":"cloneOne"},parameters:{wrapper:null,edit:!1,iva:0,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$unidades=this.$("#subtotal-cantidad"),this.$subtotal=this.$("#subtotal-total"),this.$iva=this.$("#iva-total"),this.$total=this.$("#total-total"),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{orden2_orden:this.parameters.dataFilter.orden2_orden},reset:!0})},render:function(){},addOne:function(a){var b=new app.ProductopOrdenItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.append(b.render().el),this.totalize()},addAll:function(){this.collection.forEach(this.addOne,this)},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove(),f.collection.remove(a),f.totalize()}}})},cloneOne:function(c){c.preventDefault();var d=this,e=a(c.currentTarget).attr("data-resource"),f=this.collection.get(e),g={orden2_codigo:f.get("id"),productop_nombre:f.get("productop_nombre")},h=new b.app.ConfirmWindow({parameters:{dataFilter:g,template:_.template(a("#ordenp-productop-clone-confirm-tpl").html()||""),titleConfirm:"Clonar producto orden de producción",onConfirm:function(){a.ajax({url:b.Misc.urlFull(Route.route("ordenes.productos.clonar",{productos:g.orden2_codigo})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.parameters.wrapper)}}).done(function(a){if(b.Misc.removeSpinner(d.parameters.wrapper),!_.isUndefined(a.success)){var c=a.success?"":a.errors;if(_.isObject(a.errors)&&(c=b.Misc.parseErrors(a.errors)),!a.success)return void alertify.error(c);b.Misc.successRedirect(a.msg,b.Misc.urlFull(Route.route("ordenes.productos.show",{productos:a.id})))}}).fail(function(a,c,e){b.Misc.removeSpinner(d.parameters.wrapper),alertify.error(e)})}}});h.render()},totalize:function(){var a=this.collection.totalize();this.$unidades.length&&this.$unidades.html(a.unidades),this.$subtotal.length&&this.$subtotal.html(b.Misc.currency(a.subtotal));var c=a.subtotal*(this.parameters.iva/100);this.$iva.length&&this.$iva.html(b.Misc.currency(c));var d=a.subtotal+c;this.$total.length&&this.$total.html(b.Misc.currency(d))},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={});!function(a,b,c,d){app.ProductopOrdenItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#ordenp-producto-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document);app||(app={}),function(a,b,c,d){app.ShowOrdenesView=Backbone.View.extend({el:"#ordenes-show",events:{"click .export-ordenp":"exportOrdenp","click .open-ordenp":"openOrdenp","click .clone-ordenp":"cloneOrdenp"},initialize:function(){this.model.id!=d&&(this.productopOrdenList=new app.ProductopOrdenList,this.despachopOrdenList=new app.DespachopOrdenList,this.referenceViews())},referenceViews:function(){this.productopOrdenListView=new app.ProductopOrdenListView({collection:this.productopOrdenList,parameters:{wrapper:this.$("#wrapper-productop-orden"),dataFilter:{orden2_orden:this.model.get("id")}}}),this.despachopOrdenListView=new app.DespachopOrdenListView({collection:this.despachopOrdenList,parameters:{wrapper:this.$el,dataFilter:{despachop1_orden:this.model.get("id")}}})},openOrdenp:function(c){c.preventDefault();var d=this,e=new b.app.ConfirmWindow({parameters:{dataFilter:{orden_codigo:d.model.get("orden_codigo")},template:_.template(a("#ordenp-open-confirm-tpl").html()||""),titleConfirm:"Reabir orden de producción",onConfirm:function(){a.ajax({url:b.Misc.urlFull(Route.route("ordenes.abrir",{ordenes:d.model.get("id")})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){if(b.Misc.removeSpinner(d.el),!_.isUndefined(a.success)){var c=a.success?"":a.errors;if(_.isObject(a.errors)&&(c=b.Misc.parseErrors(a.errors)),!a.success)return void alertify.error(c);b.Misc.successRedirect(a.msg,b.Misc.urlFull(Route.route("ordenes.edit",{ordenes:d.model.get("id")})))}}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),
alertify.error(e)})}}});e.render()},cloneOrdenp:function(c){c.preventDefault();var d=this,e={orden_codigo:this.model.get("id")},f=new b.app.ConfirmWindow({parameters:{dataFilter:e,template:_.template(a("#ordenp-clone-confirm-tpl").html()||""),titleConfirm:"Clonar orden de producción",onConfirm:function(){b.Misc.cloneOrden({data:e,wrap:d.$el,callback:function(a){return function(a){b.Misc.successRedirect(a.msg,b.Misc.urlFull(Route.route("ordenes.edit",{ordenes:a.id})))}}(d)})}}});f.render()},exportOrdenp:function(a){a.preventDefault(),b.open(b.Misc.urlFull(Route.route("ordenes.exportar",{ordenes:this.model.get("id")})),"_blank")}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainPermisoView=Backbone.View.extend({el:"#permisos-main",initialize:function(){this.$permisosSearchTable=this.$("#permisos-search-table"),this.$permisosSearchTable.DataTable({processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("permisos.index")),columns:[{data:"name",name:"name"},{data:"display_name",name:"display_name"},{data:"description",name:"description"}],columnDefs:[{targets:0,width:"15%"}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreatePlanCuentaView=Backbone.View.extend({el:"#plancuentas-create",template:_.template(a("#add-plancuentas-tpl").html()||""),events:{"change input#plancuentas_cuenta":"cuentaChanged","submit #form-plancuentas":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-plancuentas"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$nivel=this.$("#plancuentas_nivel"),"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2()},cuentaChanged:function(c){var d=this;a.ajax({url:b.Misc.urlFull(Route.route("plancuentas.nivel")),type:"GET",data:{plancuentas_cuenta:a(c.currentTarget).val()},beforeSend:function(){d.$nivel.val(""),b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),a.success&&((_.isUndefined(a.nivel)||_.isNull(a.nivel)||!_.isNumber(a.nivel))&&alertify.error("Ocurrió un error definiendo el nivel de la cuenta, por favor verifique el número de caracteres."),d.$nivel.val(a.nivel))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("plancuentas.show",{plancuentas:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainPlanCuentasView=Backbone.View.extend({el:"#plancuentas-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var a=this;this.$plancuentasSearchTable=this.$("#plancuentas-search-table"),this.$searchCuenta=this.$("#plancuentas_cuenta"),this.$searchName=this.$("#plancuentas_nombre"),this.plancuentasSearchTable=this.$plancuentasSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("plancuentas.index")),data:function(b){b.persistent=!0,b.plancuentas_cuenta=a.$searchCuenta.val(),b.plancuentas_nombre=a.$searchName.val()}},columns:[{data:"plancuentas_cuenta",name:"plancuentas_cuenta"},{data:"plancuentas_nivel",name:"plancuentas_nivel"},{data:"plancuentas_nombre",name:"plancuentas_nombre"},{data:"plancuentas_naturaleza",name:"plancuentas_naturaleza"},{data:"plancuentas_tercero",name:"plancuentas_tercero"}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("plancuentas.show",{plancuentas:d.id}))+'">'+a+"</a>"}},{targets:1,width:"10%"},{targets:3,width:"10%",render:function(a,b,c,d){return"D"==a?"Débito":"Crédito"}},{targets:4,width:"10%",render:function(a,b,c,d){return a?"Si":"No"}}]})},search:function(a){a.preventDefault(),this.plancuentasSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCuenta.val(""),this.$searchName.val(""),this.plancuentasSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateProductoView=Backbone.View.extend({el:"#productos-create",template:_.template(a("#add-producto-tpl").html()||""),events:{"ifChecked #producto_serie":"serieChange","ifChecked #producto_metrado":"metradoChange","submit #form-productos":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-producto"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$inputSerie=this.$("#producto_serie"),this.$inputMetrado=this.$("#producto_metrado"),this.ready()},serieChange:function(b){var c=a(b.target).is(":checked");c&&this.$inputMetrado.iCheck("uncheck")},metradoChange:function(b){var c=a(b.target).is(":checked");c&&this.$inputSerie.iCheck("uncheck")},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("productos.show",{productos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainProductosView=Backbone.View.extend({el:"#productos-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var a=this;this.$productosSearchTable=this.$("#productos-search-table"),this.$searchCod=this.$("#producto_codigo"),this.$searchName=this.$("#producto_nombre"),this.productosSearchTable=this.$productosSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("productos.index")),data:function(b){b.persistent=!0,b.producto_codigo=a.$searchCod.val(),b.producto_nombre=a.$searchName.val()}},columns:[{data:"producto_codigo",name:"producto_codigo"},{data:"producto_nombre",name:"producto_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo producto',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("productos.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("productos.show",{productos:d.id}))+'">'+a+"</a>"}}]})},search:function(a){a.preventDefault(),this.productosSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCod.val(""),this.$searchName.val(""),this.productosSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AcabadoItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#productop-acabado-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AcabadosListView=Backbone.View.extend({el:"#browse-acabados-productop-list",events:{"click .item-productop6-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.parameters.wrapper,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{productop_id:this.parameters.dataFilter.productop_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.AcabadoItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.prepend(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper),a.productop6_productop=this.parameters.dataFilter.productop_id;var d=new app.Productop6Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove()}}})},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AreaItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#productop-area-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AreasListView=Backbone.View.extend({el:"#browse-areas-productop-list",events:{"click .item-productop3-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.parameters.wrapper,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{productop_id:this.parameters.dataFilter.productop_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.AreaItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.prepend(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper),a.productop3_productop=this.parameters.dataFilter.productop_id;var d=new app.Productop3Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove()}}})},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateProductopView=Backbone.View.extend({el:"#productosp-create",template:_.template(a("#add-productop-tpl").html()||""),events:{"ifChanged .change-productop-abierto-koi-component":"changedAbierto","ifChanged .change-productop-cerrado-koi-component":"changedCerrado","ifChanged .change-productop-3d-koi-component":"changed3d","click .submit-productosp":"submitProductop","submit #form-productosp":"onStore","submit #form-productosp2":"onStoreTip","submit #form-productosp3":"onStoreArea","submit #form-productosp4":"onStoreMaquina","submit #form-productosp5":"onStoreMaterial","submit #form-productosp6":"onStoreAcabado"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-productop"),this.model.id!=d&&(this.tipsList=new app.TipsList,this.areasList=new app.AreasList,this.maquinasList=new app.MaquinasList,this.materialesList=new app.MaterialesList,this.acabadosList=new app.AcabadosList),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var b=this.model.toJSON();this.$wraperForm.html(this.template(b)),this.$form=this.$("#form-productosp"),this.$inputAbierto=a("#productop_abierto"),this.$inputAbiertoAncho=a("#productop_ancho_med"),this.$inputAbiertoAlto=a("#productop_alto_med"),this.$inputCerrado=a("#productop_cerrado"),this.$inputCerradoAncho=a("#productop_c_med_ancho"),this.$inputCerradoAlto=a("#productop_c_med_alto"),this.$input3d=a("#productop_3d"),this.$input3dAncho=a("#productop_3d_ancho_med"),this.$input3dAlto=a("#productop_3d_alto_med"),this.$input3dProfundidad=a("#productop_3d_profundidad_med"),this.model.id!=d&&this.referenceViews(),this.ready()},referenceViews:function(){this.tipsListView=new app.TipsListView({collection:this.tipsList,parameters:{edit:!0,wrapper:this.$("#wrapper-productop-tips"),dataFilter:{productop_id:this.model.get("id")}}}),this.areasListView=new app.AreasListView({collection:this.areasList,parameters:{edit:!0,wrapper:this.$("#wrapper-productop-areas"),dataFilter:{productop_id:this.model.get("id")}}}),this.maquinasListView=new app.MaquinasListView({collection:this.maquinasList,parameters:{edit:!0,wrapper:this.$("#wrapper-productop-maquinas"),dataFilter:{productop_id:this.model.get("id")}}}),this.materialesListView=new app.MaterialesListView({collection:this.materialesList,parameters:{edit:!0,wrapper:this.$("#wrapper-productop-materiales"),dataFilter:{productop_id:this.model.get("id")}}}),this.acabadosListView=new app.AcabadosListView({collection:this.acabadosList,parameters:{edit:!0,wrapper:this.$("#wrapper-productop-acabados"),dataFilter:{productop_id:this.model.get("id")}}})},submitProductop:function(a){this.$form.submit()},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},changedAbierto:function(b){var c=a(b.target).is(":checked");c?(this.$input3d.iCheck("uncheck"),this.$input3d.iCheck("disable"),this.$input3dAncho.prop("disabled",!0).val(""),this.$input3dAlto.prop("disabled",!0).val(""),this.$input3dProfundidad.prop("disabled",!0).val("")):(this.$input3d.iCheck("enable"),this.$input3dAncho.prop("disabled",!1),this.$input3dAlto.prop("disabled",!1),this.$input3dProfundidad.prop("disabled",!1))},changedCerrado:function(b){var c=a(b.target).is(":checked");c?(this.$input3d.iCheck("uncheck"),this.$input3d.iCheck("disable"),this.$input3dAncho.prop("disabled",!0).val(""),this.$input3dAlto.prop("disabled",!0).val(""),this.$input3dProfundidad.prop("disabled",!0).val("")):(this.$input3d.iCheck("enable"),this.$input3dAncho.prop("disabled",!1),this.$input3dAlto.prop("disabled",!1),this.$input3dProfundidad.prop("disabled",!1))},changed3d:function(b){var c=a(b.target).is(":checked");c?(this.$inputAbierto.iCheck("uncheck"),this.$inputAbierto.iCheck("disable"),this.$inputAbiertoAncho.prop("disabled",!0).val(""),this.$inputAbiertoAlto.prop("disabled",!0).val(""),this.$inputCerrado.iCheck("uncheck"),this.$inputCerrado.iCheck("disable"),this.$inputCerradoAncho.prop("disabled",!0).val(""),this.$inputCerradoAlto.prop("disabled",!0).val("")):(this.$inputAbierto.iCheck("enable"),this.$inputAbiertoAncho.prop("disabled",!1),this.$inputAbiertoAlto.prop("disabled",!1),this.$inputCerrado.iCheck("enable"),this.$inputCerradoAncho.prop("disabled",!1),this.$inputCerradoAlto.prop("disabled",!1))},onStoreTip:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.tipsList.trigger("store",c)}},onStoreArea:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.areasList.trigger("store",c)}},onStoreMaquina:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.maquinasList.trigger("store",c)}},onStoreMaterial:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.materialesList.trigger("store",c)}},onStoreAcabado:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.acabadosList.trigger("store",c)}},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);this.createProductopView instanceof Backbone.View&&(this.createProductopView.stopListening(),this.createProductopView.undelegateEvents()),Backbone.history.navigate(Route.route("productosp.edit",{productosp:c.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainProductospView=Backbone.View.extend({el:"#productosp-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var a=this;this.$productospSearchTable=this.$("#productosp-search-table"),this.$searchCod=this.$("#productop_codigo"),this.$searchName=this.$("#productop_nombre"),this.productospSearchTable=this.$productospSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("productosp.index")),data:function(b){b.persistent=!0,b.productop_codigo=a.$searchCod.val(),b.productop_nombre=a.$searchName.val()}},columns:[{data:"productop_codigo",name:"productop_codigo"},{data:"productop_nombre",name:"productop_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo producto',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("productosp.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("productosp.show",{productosp:d.id}))+'">'+a+"</a>"}}]})},search:function(a){a.preventDefault(),this.productospSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCod.val(""),this.$searchName.val(""),this.productospSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaquinaItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#productop-maquina-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaquinasListView=Backbone.View.extend({el:"#browse-maquinas-productop-list",events:{"click .item-productop4-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.parameters.wrapper,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{productop_id:this.parameters.dataFilter.productop_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.MaquinaItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.prepend(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper),a.productop4_productop=this.parameters.dataFilter.productop_id;var d=new app.Productop4Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove()}}})},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaterialesListView=Backbone.View.extend({el:"#browse-materiales-productop-list",events:{"click .item-productop5-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.parameters.wrapper,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{productop_id:this.parameters.dataFilter.productop_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.MaterialItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.prepend(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper),a.productop5_productop=this.parameters.dataFilter.productop_id;var d=new app.Productop5Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove()}}})},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MaterialItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#productop-material-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ShowProductopView=Backbone.View.extend({el:"#terceros-main",initialize:function(){this.model.id!=d&&(this.tipsList=new app.TipsList,this.areasList=new app.AreasList,this.maquinasList=new app.MaquinasList,this.materialesList=new app.MaterialesList,this.acabadosList=new app.AcabadosList,this.referenceViews())},referenceViews:function(){this.tipsListView=new app.TipsListView({collection:this.tipsList,parameters:{edit:!1,wrapper:this.$("#wrapper-productop-tips"),dataFilter:{productop_id:this.model.get("id")}}}),this.areasListView=new app.AreasListView({collection:this.areasList,parameters:{edit:!1,wrapper:this.$("#wrapper-productop-areas"),dataFilter:{productop_id:this.model.get("id")}}}),this.maquinasListView=new app.MaquinasListView({collection:this.maquinasList,parameters:{edit:!1,wrapper:this.$("#wrapper-productop-maquinas"),dataFilter:{productop_id:this.model.get("id")}}}),this.materialesListView=new app.MaterialesListView({collection:this.materialesList,parameters:{edit:!1,wrapper:this.$("#wrapper-productop-materiales"),dataFilter:{productop_id:this.model.get("id")}}}),this.acabadosListView=new app.AcabadosListView({collection:this.acabadosList,parameters:{edit:!1,wrapper:this.$("#wrapper-productop-acabados"),dataFilter:{productop_id:this.model.get("id")}}})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.TipItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#productop-tip-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.TipsListView=Backbone.View.extend({el:"#browse-tips-productop-list",events:{"click .item-productop2-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.parameters.wrapper,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{productop_id:this.parameters.dataFilter.productop_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.TipItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.prepend(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper),a.productop2_productop=this.parameters.dataFilter.productop_id;var d=new app.Productop2Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove()}}})},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreatePuntoventaView=Backbone.View.extend({el:"#puntosventa-create",template:_.template(a("#add-puntoventa-tpl").html()||""),events:{"submit #form-puntosventa":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-puntosventa"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("puntosventa.show",{puntosventa:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainPuntoventaView=Backbone.View.extend({el:"#puntosventa-main",initialize:function(){this.$puntosventaSearchTable=this.$("#puntosventa-search-table"),this.$puntosventaSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("puntosventa.index")),columns:[{data:"puntoventa_nombre",name:"puntoventa_nombre"},{data:"puntoventa_prefijo",name:"puntoventa_prefijo"},{data:"puntoventa_resolucion_dian",name:"puntoventa_resolucion_dian"},{data:"puntoventa_numero",name:"puntoventa_numero"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo punto de venta',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("puntosventa.create")))}}],columnDefs:[{targets:0,render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("puntosventa.show",{puntosventa:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateRolView=Backbone.View.extend({el:"#rol-create",template:_.template(a("#add-rol-tpl").html()||""),events:{"submit #form-rol":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-rol"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a));
},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("roles.index")))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainRolesView=Backbone.View.extend({el:"#roles-main",initialize:function(){this.$rolesSearchTable=this.$("#roles-search-table"),this.$rolesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("roles.index")),columns:[{data:"display_name",name:"display_name"},{data:"name",name:"name"},{data:"description",name:"description"}],buttons:[{text:'<i class="fa fa-plus"></i> Nuevo Rol',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("roles.create")))}}],columnDefs:[{targets:0,width:"25%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("roles.show",{roles:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateSubGrupoView=Backbone.View.extend({el:"#subgrupos-create",template:_.template(a("#add-subgrupo-tpl").html()||""),events:{"submit #form-subgrupos":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-subgrupo"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("subgrupos.show",{subgrupos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainSubGruposView=Backbone.View.extend({el:"#subgrupos-main",initialize:function(){this.$subgruposSearchTable=this.$("#subgrupos-search-table"),this.$subgruposSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("subgrupos.index")),columns:[{data:"subgrupo_codigo",name:"subgrupo_codigo"},{data:"subgrupo_nombre",name:"subgrupo_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo subgrupo',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("subgrupos.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("subgrupos.show",{subgrupos:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateSucursalView=Backbone.View.extend({el:"#sucursales-create",template:_.template(a("#add-sucursal-tpl").html()||""),events:{"submit #form-sucursales":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-sucursal"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("sucursales.show",{sucursales:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainSucursalesView=Backbone.View.extend({el:"#sucursales-main",initialize:function(){this.$sucursalesSearchTable=this.$("#sucursales-search-table"),this.$sucursalesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("sucursales.index")),columns:[{data:"sucursal_nombre",name:"sucursal_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nueva sucursal',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("sucursales.create")))}}],columnDefs:[{targets:0,render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("sucursales.show",{sucursales:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ContactItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#contact-item-list-tpl").html()||""),events:{"click .btn-edit-tcontacto":"editContacto"},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this},editContacto:function(){var a=new app.CreateTContactoView({model:this.model});a.render()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ContactsListView=Backbone.View.extend({el:"#browse-contact-list",events:{},parameters:{dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{tercero_id:this.parameters.dataFilter.tercero_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.ContactItemView({model:a});this.$el.append(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.el)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateTerceroView=Backbone.View.extend({el:"#tercero-create",template:_.template(a("#add-tercero-tpl").html()||""),events:{"submit #form-create-tercero":"onStore","click .btn-add-tcontacto":"addContacto"},initialize:function(a){this.msgSuccess="Tercero guardado con exito!",this.$wraperForm=this.$("#render-form-tercero"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.model.id!=d&&(this.contactsList=new app.ContactsList,this.referenceViews()),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},referenceViews:function(){this.contactsListView=new app.ContactsListView({collection:this.contactsList,parameters:{dataFilter:{tercero_id:this.model.get("id")}}})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},addContacto:function(){this.contactoModel=new app.ContactoModel,this.createTContactoView=new app.CreateTContactoView({model:this.contactoModel,collection:this.contactsList,parameters:{tercero_id:this.model.get("id")}}),this.createTContactoView.render()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);this.createTerceroView instanceof Backbone.View&&(this.createTerceroView.stopListening(),this.createTerceroView.undelegateEvents()),Backbone.history.navigate(Route.route("terceros.edit",{terceros:c.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateTContactoView=Backbone.View.extend({el:"body",template:_.template(a("#add-contacto-tpl").html()||""),events:{"submit #form-tcontacto-component":"onStore"},parameters:{tercero_id:null},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change:id",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){this.$modalComponent=this.$("#modal-tcontacto-component");var a=this.model.toJSON();this.$modalComponent.find(".content-modal").html("").html(this.template(a)),this.$wraperContent=this.$("#content-tcontacto-component").find(".modal-body"),this.ready(),this.$modalComponent.modal("show")},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2()},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);_.isUndefined(this.parameters.tercero_id)||_.isNull(this.parameters.tercero_id)||""==this.parameters.tercero_id||(c.tcontacto_tercero=this.parameters.tercero_id),this.model.save(c,{patch:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$wraperContent)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.$wraperContent),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);this.collection instanceof Backbone.Collection&&this.collection.add(a),this.$modalComponent.modal("hide")}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.FacturaptListView=Backbone.View.extend({el:"#browse-facturap-list",events:{},parameters:{dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{tercero_id:this.parameters.dataFilter.tercero_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.FacturaptItemView({model:a});this.$el.append(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.el)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.FacturaptItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#facturapt-item-list-tpl").html()||""),events:{},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainTerceroView=Backbone.View.extend({el:"#terceros-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var a=this;this.$tercerosSearchTable=this.$("#terceros-search-table"),this.$searchNit=this.$("#tercero_nit"),this.$searchName=this.$("#tercero_nombre"),this.tercerosSearchTable=this.$tercerosSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("terceros.index")),data:function(b){b.persistent=!0,b.tercero_nit=a.$searchNit.val(),b.tercero_nombre=a.$searchName.val()}},columns:[{data:"tercero_nit",name:"tercero_nit"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"tercero_razonsocial",name:"tercero_razonsocial"},{data:"tercero_nombre1",name:"tercero_nombre1"},{data:"tercero_nombre2",name:"tercero_nombre2"},{data:"tercero_apellido1",name:"tercero_apellido1"},{data:"tercero_apellido2",name:"tercero_apellido2"}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("terceros.show",{terceros:d.id}))+'">'+a+"</a>"}},{targets:1,width:"85%",searchable:!1},{targets:[2,3,4,5,6],visible:!1}]})},search:function(a){a.preventDefault(),this.tercerosSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchNit.val(""),this.$searchName.val(""),this.tercerosSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ShowTerceroView=Backbone.View.extend({el:"#terceros-main",initialize:function(){this.model.id!=d&&(this.contactsList=new app.ContactsList,this.facturaptList=new app.FacturaptList,this.referenceViews())},referenceViews:function(){this.contactsListView=new app.ContactsListView({collection:this.contactsList,parameters:{dataFilter:{tercero_id:this.model.get("id")}}}),this.facturaptListView=new app.FacturaptListView({collection:this.facturaptList,parameters:{dataFilter:{tercero_id:this.model.get("id")}}})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateTrasladoView=Backbone.View.extend({el:"#traslados-create",template:_.template(a("#add-traslado-tpl").html()||""),events:{"click .submit-traslado":"submitTraslado","submit #form-item-traslado":"onStoreItem","submit #form-traslado":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-traslado"),this.trasladoProductosList=new app.TrasladoProductosList,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$form=this.$("#form-traslado"),this.$formItem=this.$("#form-item-traslado"),this.referenceViews()},referenceViews:function(){this.productosListView=new app.TrasladoProductosListView({collection:this.trasladoProductosList,parameters:{wrapper:this.el,edit:!0}})},submitTraslado:function(a){this.$form.submit()},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);c.detalle=this.trasladoProductosList.toJSON(),this.model.save(c,{patch:!0,silent:!0})}},onStoreItem:function(a){a.isDefaultPrevented()||(a.preventDefault(),this.trasladoProductosList.trigger("store",this.$(a.target)))},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("traslados.show",{traslados:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainTrasladosView=Backbone.View.extend({el:"#traslados-main",initialize:function(){this.$trasladosSearchTable=this.$("#traslados-search-table"),this.$trasladosSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("traslados.index")),columns:[{data:"traslado1_numero",name:"traslado1_numero"},{data:"sucursa_origen",name:"sucursa_origen"},{data:"sucursa_destino",name:"sucursa_destino"},{data:"traslado1_fecha",name:"traslado1_fecha"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo traslado',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("traslados.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("traslados.show",{traslados:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ShowTrasladoView=Backbone.View.extend({el:"#traslados-show",initialize:function(){this.model.id!=d&&(this.trasladoProductosList=new app.TrasladoProductosList,this.referenceViews())},referenceViews:function(){this.productosListView=new app.TrasladoProductosListView({collection:this.trasladoProductosList,parameters:{wrapper:this.el,edit:!1,dataFilter:{traslado:this.model.get("id")}}})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.TrasladoProductosListView=Backbone.View.extend({el:"#browse-detalle-traslado-list",events:{"click .item-traslado2-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$costoTotal=this.$("#total-costo"),this.confCollection={reset:!0,data:{}},this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),_.isUndefined(this.parameters.dataFilter.traslado)||_.isNull(this.parameters.dataFilter.traslado)||(this.confCollection.data.traslado=this.parameters.dataFilter.traslado,this.collection.fetch(this.confCollection))},addOne:function(a){var b=new app.TrasladoProductosItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.append(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this,d=b.Misc.formToJson(a);b.Misc.setSpinner(this.parameters.wrapper);var e=new app.Traslado2Model;e.save(d,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(b){b.preventDefault();var c=a(b.currentTarget).attr("data-resource"),d=this.collection.get(c);d instanceof Backbone.Model&&(d.view.remove(),this.collection.remove(d))},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.TrasladoProductosItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#add-traslado2-item-tpl").html()||""),events:{},parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateUnidadView=Backbone.View.extend({el:"#unidades-create",template:_.template(a("#add-unidad-tpl").html()||""),events:{"submit #form-unidades":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-unidad"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("unidades.show",{unidades:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainUnidadesView=Backbone.View.extend({el:"#unidades-main",initialize:function(){this.$unidadesSearchTable=this.$("#unidades-search-table"),this.$unidadesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("unidades.index")),columns:[{data:"unidadmedida_sigla",name:"unidadmedida_sigla"},{data:"unidadmedida_nombre",name:"unidadmedida_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo unidad',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("unidades.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("unidades.show",{unidades:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c){app.AsientoCuentasList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("asientos.detalle.index"))},model:app.Asiento2Model,initialize:function(){},debitos:function(){return this.reduce(function(a,b){return a+parseFloat(b.get("asiento2_debito"))},0)},creditos:function(){return this.reduce(function(a,b){return a+parseFloat(b.get("asiento2_credito"))},0)},totalize:function(){var a=this.debitos(),b=this.creditos();return{debitos:a,creditos:b,diferencia:Math.abs(b-a)}}})}(this,this.document),app||(app={}),function(a,b,c){app.AsientoMovimientosList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("asientos.detalle.movimientos"))},model:app.AsientoMovModel,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.CuotasFPList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("facturap.cuotas.index"))},model:app.Facturap2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.AcabadosProductopList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("ordenes.productos.acabados.index"))},model:app.Ordenp5Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.DespachospPendientesOrdenList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("ordenes.despachos.pendientes"))},model:app.Ordenp2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.DespachopOrdenList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("ordenes.despachos.index"))},model:app.DespachopModel,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.MaquinasProductopList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("ordenes.productos.maquinas.index"))},model:app.Ordenp3Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.MaterialesProductopList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("ordenes.productos.materiales.index"))},model:app.Ordenp4Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.ProductopOrdenList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("ordenes.productos.index"))},model:app.Ordenp2Model,initialize:function(){},unidades:function(){return this.reduce(function(a,b){return a+b.get("orden2_cantidad")},0)},subtotal:function(){return this.reduce(function(a,b){return a+parseFloat(b.get("orden2_precio_total"))},0)},totalize:function(){var a=this.unidades(),b=this.subtotal();return{unidades:a,subtotal:b}}})}(this,this.document),app||(app={}),function(a,b,c){app.ItemRolloINList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productos.rollos.index"))},model:app.ItemRolloModel,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.ProductoSeriesINList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productos.index"))},model:app.ProductoModel,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.AcabadosList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productosp.acabados.index"))},model:app.Productop6Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.AreasList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productosp.areas.index"))},model:app.Productop3Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.MaquinasList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productosp.maquinas.index"))},model:app.Productop4Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.MaterialesList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productosp.materiales.index"))},model:app.Productop5Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.TipsList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("productosp.tips.index"))},model:app.Productop2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.ContactsList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("terceros.contactos.index"))},model:app.ContactoModel,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.FacturaptList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("terceros.facturap"))},model:app.Facturap2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.TrasladoProductosList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("traslados.detalle.index"))},model:app.Traslado2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c,d){app.AppRouter=new(Backbone.Router.extend({routes:{"login(/)":"getLogin","terceros(/)":"getTercerosMain","terceros/create(/)":"getTercerosCreate","terceros/:tercero(/)":"getTercerosShow","terceros/:tercero/edit(/)":"getTercerosEdit","empresa(/)":"getEmpresaEdit","municipios(/)":"getMunicipiosMain","departamentos(/)":"getDepartamentosMain","actividades(/)":"getActividadesMain","actividades/create(/)":"getActividadesCreate","actividades/:actividad/edit(/)":"getActividadesEdit","sucursales(/)":"getSucursalesMain","sucursales/create(/)":"getSucursalesCreate","sucursales/:sucursal/edit(/)":"getSucursalesEdit","roles(/)":"getRolesMain","roles/create(/)":"getRolesCreate","roles/:rol/edit(/)":"getRolesEdit","permisos(/)":"getPermisosMain","puntosventa(/)":"getPuntosVentaMain","puntosventa/create(/)":"getPuntosVentaCreate","puntosventa/:puntoventa/edit(/)":"getPuntosVentaEdit","plancuentas(/)":"getPlanCuentasMain","plancuentas/create(/)":"getPlanCuentasCreate","plancuentas/:plancuenta/edit(/)":"getPlanCuentasEdit","centroscosto(/)":"getCentrosCostoMain","centroscosto/create(/)":"getCentrosCostoCreate","centroscosto/:centrocosto/edit(/)":"getCentrosCostoEdit","asientos(/)":"getAsientosMain","asientos/create(/)":"getAsientosCreate","asientos/:asientos(/)":"getAsientosShow","asientos/:asiento/edit(/)":"getAsientosEdit","documentos(/)":"getDocumentosMain","documentos/create(/)":"getDocumentosCreate","documentos/:documento/edit(/)":"getDocumentosEdit","folders(/)":"getFoldersMain","folders/create(/)":"getFoldersCreate","folders/:folder/edit(/)":"getFoldersEdit","subgrupos(/)":"getSubGruposMain","subgrupos/create(/)":"getSubGruposCreate","subgrupos/:subgrupo/edit(/)":"getSubGruposEdit","grupos(/)":"getGruposMain","grupos/create(/)":"getGruposCreate","grupos/:grupo/edit(/)":"getGruposEdit","unidades(/)":"getUnidadesMain","unidades/create(/)":"getUnidadesCreate","unidades/:unidad/edit(/)":"getUnidadesEdit","productos(/)":"getProductosMain","productos/create(/)":"getProductosCreate","productos/:producto/edit(/)":"getProductosEdit","traslados(/)":"getTrasladosMain","traslados/create(/)":"getTrasladosCreate","traslados/:traslado(/)":"getTrasladosShow","areasp(/)":"getAreaspMain","areasp/create(/)":"getAreaspCreate","areasp/:areap/edit(/)":"getAreaspEdit","acabadosp(/)":"getAcabadospMain","acabadosp/create(/)":"getAcabadospCreate","acabadosp/:acabadop/edit(/)":"getAcabadospEdit","maquinasp(/)":"getMaquinaspMain","maquinasp/create(/)":"getMaquinaspCreate","maquinasp/:maquinap/edit(/)":"getMaquinaspEdit","materialesp(/)":"getMaterialespMain","materialesp/create(/)":"getMaterialespCreate","materialesp/:materialp/edit(/)":"getMaterialespEdit","ordenes(/)":"getOrdenesMain","ordenes/create(/)":"getOrdenesCreate","ordenes/:orden(/)":"getOrdenesShow","ordenes/:orden/edit(/)":"getOrdenesEdit","ordenes/productos/create(/)(?*queryString)":"getOrdenesProductoCreate","ordenes/productos/:producto/edit(/)":"getOrdenesProductoEdit","productosp(/)":"getProductospMain","productosp/create(/)":"getProductospCreate","productosp/:producto(/)":"getProductospShow","productosp/:producto/edit(/)":"getProductospEdit"},parseQueryString:function(a){var b={};return a&&_.each(_.map(decodeURI(a).split(/&/g),function(a,b){var c=a.split("="),e={};if(c.length>=1){var f=d;2==c.length&&(f=c[1]),e[c[0]]=f}return e}),function(a){_.extend(b,a)}),b},initialize:function(a){this.componentGlobalView=new app.ComponentGlobalView,this.componentAddressView=new app.ComponentAddressView,this.componentCreateResourceView=new app.ComponentCreateResourceView,this.componentSearchTerceroView=new app.ComponentSearchTerceroView,this.componentSearchCuentaView=new app.ComponentSearchCuentaView,this.componentDocumentView=new app.ComponentDocumentView,this.componentReportView=new app.ComponentReportView,this.componentTerceroView=new app.ComponentTerceroView,this.componentSearchOrdenPView=new app.ComponentSearchOrdenPView,this.componentSearchProductoView=new app.ComponentSearchProductoView,this.componentSearchContactoView=new app.ComponentSearchContactoView,this.componentConsecutiveView=new app.ComponentConsecutiveView},start:function(){var a={pushState:!0};"-1"!=c.domain.search("localhost")&&(a.root="/vaziko/public/"),Backbone.history.start(a)},getLogin:function(){this.loginView instanceof Backbone.View&&(this.loginView.stopListening(),this.loginView.undelegateEvents()),this.loginView=new app.UserLoginView},getTercerosMain:function(){this.mainTerceroView instanceof Backbone.View&&(this.mainTerceroView.stopListening(),this.mainTerceroView.undelegateEvents()),this.mainTerceroView=new app.MainTerceroView},getTercerosCreate:function(){this.terceroModel=new app.TerceroModel,this.createTerceroView instanceof Backbone.View&&(this.createTerceroView.stopListening(),this.createTerceroView.undelegateEvents()),this.createTerceroView=new app.CreateTerceroView({model:this.terceroModel}),this.createTerceroView.render()},getTercerosShow:function(a){this.terceroModel=new app.TerceroModel,
this.terceroModel.set({id:a},{silent:!0}),this.showTerceroView instanceof Backbone.View&&(this.showTerceroView.stopListening(),this.showTerceroView.undelegateEvents()),this.showTerceroView=new app.ShowTerceroView({model:this.terceroModel})},getTercerosEdit:function(a){this.terceroModel=new app.TerceroModel,this.terceroModel.set({id:a},{silent:!0}),this.createTerceroView instanceof Backbone.View&&(this.createTerceroView.stopListening(),this.createTerceroView.undelegateEvents()),this.createTerceroView=new app.CreateTerceroView({model:this.terceroModel}),this.terceroModel.fetch()},getEmpresaEdit:function(){this.empresaModel=new app.EmpresaModel,this.createEmpresaView instanceof Backbone.View&&(this.createEmpresaView.stopListening(),this.createEmpresaView.undelegateEvents()),this.createEmpresaView=new app.CreateEmpresaView({model:this.empresaModel}),this.empresaModel.fetch()},getMunicipiosMain:function(){this.mainMunicipioView instanceof Backbone.View&&(this.mainMunicipioView.stopListening(),this.mainMunicipioView.undelegateEvents()),this.mainMunicipioView=new app.MainMunicipioView},getDepartamentosMain:function(){this.mainDepartamentoView instanceof Backbone.View&&(this.mainDepartamentoView.stopListening(),this.mainDepartamentoView.undelegateEvents()),this.mainDepartamentoView=new app.MainDepartamentoView},getActividadesMain:function(){this.mainActividadView instanceof Backbone.View&&(this.mainActividadView.stopListening(),this.mainActividadView.undelegateEvents()),this.mainActividadView=new app.MainActividadView},getActividadesCreate:function(){this.actividadModel=new app.ActividadModel,this.createActividadView instanceof Backbone.View&&(this.createActividadView.stopListening(),this.createActividadView.undelegateEvents()),this.createActividadView=new app.CreateActividadView({model:this.actividadModel}),this.createActividadView.render()},getActividadesEdit:function(a){this.actividadModel=new app.ActividadModel,this.actividadModel.set({id:a},{silent:!0}),this.createActividadView instanceof Backbone.View&&(this.createActividadView.stopListening(),this.createActividadView.undelegateEvents()),this.createActividadView=new app.CreateActividadView({model:this.actividadModel}),this.actividadModel.fetch()},getSucursalesMain:function(){this.mainSucursalesView instanceof Backbone.View&&(this.mainSucursalesView.stopListening(),this.mainSucursalesView.undelegateEvents()),this.mainSucursalesView=new app.MainSucursalesView},getSucursalesCreate:function(){this.sucursalModel=new app.SucursalModel,this.createSucursalView instanceof Backbone.View&&(this.createSucursalView.stopListening(),this.createSucursalView.undelegateEvents()),this.createSucursalView=new app.CreateSucursalView({model:this.sucursalModel}),this.createSucursalView.render()},getSucursalesEdit:function(a){this.sucursalModel=new app.SucursalModel,this.sucursalModel.set({id:a},{silent:!0}),this.createSucursalView instanceof Backbone.View&&(this.createSucursalView.stopListening(),this.createSucursalView.undelegateEvents()),this.createSucursalView=new app.CreateSucursalView({model:this.sucursalModel}),this.sucursalModel.fetch()},getRolesMain:function(){this.mainRolesView instanceof Backbone.View&&(this.mainRolesView.stopListening(),this.mainRolesView.undelegateEvents()),this.mainRolesView=new app.MainRolesView},getRolesCreate:function(){this.rolModel=new app.RolModel,this.createRolView instanceof Backbone.View&&(this.createRolView.stopListening(),this.createRolView.undelegateEvents()),this.createRolView=new app.CreateRolView({model:this.rolModel}),this.createRolView.render()},getRolesEdit:function(a){this.rolModel=new app.RolModel,this.rolModel.set({id:a},{silent:!0}),this.createRolView instanceof Backbone.View&&(this.createRolView.stopListening(),this.createRolView.undelegateEvents()),this.createRolView=new app.CreateRolView({model:this.rolModel}),this.rolModel.fetch()},getPermisosMain:function(){this.mainPermisoView instanceof Backbone.View&&(this.mainPermisoView.stopListening(),this.mainPermisoView.undelegateEvents()),this.mainPermisoView=new app.MainPermisoView},getPuntosVentaMain:function(){this.mainPuntoventaView instanceof Backbone.View&&(this.mainPuntoventaView.stopListening(),this.mainPuntoventaView.undelegateEvents()),this.mainPuntoventaView=new app.MainPuntoventaView},getPuntosVentaCreate:function(){this.puntoVentaModel=new app.PuntoVentaModel,this.createPuntoventaView instanceof Backbone.View&&(this.createPuntoventaView.stopListening(),this.createPuntoventaView.undelegateEvents()),this.createPuntoventaView=new app.CreatePuntoventaView({model:this.puntoVentaModel}),this.createPuntoventaView.render()},getPuntosVentaEdit:function(a){this.puntoVentaModel=new app.PuntoVentaModel,this.puntoVentaModel.set({id:a},{silent:!0}),this.createPuntoventaView instanceof Backbone.View&&(this.createPuntoventaView.stopListening(),this.createPuntoventaView.undelegateEvents()),this.createPuntoventaView=new app.CreatePuntoventaView({model:this.puntoVentaModel}),this.puntoVentaModel.fetch()},getPlanCuentasMain:function(){this.mainPlanCuentasView instanceof Backbone.View&&(this.mainPlanCuentasView.stopListening(),this.mainPlanCuentasView.undelegateEvents()),this.mainPlanCuentasView=new app.MainPlanCuentasView},getPlanCuentasCreate:function(){this.planCuentaModel=new app.PlanCuentaModel,this.createPlanCuentaView instanceof Backbone.View&&(this.createPlanCuentaView.stopListening(),this.createPlanCuentaView.undelegateEvents()),this.createPlanCuentaView=new app.CreatePlanCuentaView({model:this.planCuentaModel}),this.createPlanCuentaView.render()},getPlanCuentasEdit:function(a){this.planCuentaModel=new app.PlanCuentaModel,this.planCuentaModel.set({id:a},{silent:!0}),this.createPlanCuentaView instanceof Backbone.View&&(this.createPlanCuentaView.stopListening(),this.createPlanCuentaView.undelegateEvents()),this.createPlanCuentaView=new app.CreatePlanCuentaView({model:this.planCuentaModel}),this.planCuentaModel.fetch()},getCentrosCostoMain:function(){this.mainCentrosCostoView instanceof Backbone.View&&(this.mainCentrosCostoView.stopListening(),this.mainCentrosCostoView.undelegateEvents()),this.mainCentrosCostoView=new app.MainCentrosCostoView},getCentrosCostoCreate:function(){this.centroCostoModel=new app.CentroCostoModel,this.createCentroCostoView instanceof Backbone.View&&(this.createCentroCostoView.stopListening(),this.createCentroCostoView.undelegateEvents()),this.createCentroCostoView=new app.CreateCentroCostoView({model:this.centroCostoModel,parameters:{callback:"toShow"}}),this.createCentroCostoView.render()},getCentrosCostoEdit:function(a){this.centroCostoModel=new app.CentroCostoModel,this.centroCostoModel.set({id:a},{silent:!0}),this.createCentroCostoView instanceof Backbone.View&&(this.createCentroCostoView.stopListening(),this.createCentroCostoView.undelegateEvents()),this.createCentroCostoView=new app.CreateCentroCostoView({model:this.centroCostoModel,parameters:{callback:"toShow"}}),this.centroCostoModel.fetch()},getAsientosMain:function(){this.mainAsientosView instanceof Backbone.View&&(this.mainAsientosView.stopListening(),this.mainAsientosView.undelegateEvents()),this.mainAsientosView=new app.MainAsientosView},getAsientosCreate:function(){this.asientoModel=new app.AsientoModel,this.createAsientoView instanceof Backbone.View&&(this.createAsientoView.stopListening(),this.createAsientoView.undelegateEvents()),this.createAsientoView=new app.CreateAsientoView({model:this.asientoModel}),this.createAsientoView.render()},getAsientosShow:function(a){this.asientoModel=new app.AsientoModel,this.asientoModel.set({id:a},{silent:!0}),this.showAsientoView instanceof Backbone.View&&(this.showAsientoView.stopListening(),this.showAsientoView.undelegateEvents()),this.showAsientoView=new app.ShowAsientoView({model:this.asientoModel})},getAsientosEdit:function(a){this.asientoModel=new app.AsientoModel,this.asientoModel.set({id:a},{silent:!0}),this.editAsientoView instanceof Backbone.View&&(this.editAsientoView.stopListening(),this.editAsientoView.undelegateEvents()),this.createAsientoView instanceof Backbone.View&&(this.createAsientoView.stopListening(),this.createAsientoView.undelegateEvents()),this.editAsientoView=new app.EditAsientoView({model:this.asientoModel}),this.asientoModel.fetch()},getFoldersMain:function(){this.mainFoldersView instanceof Backbone.View&&(this.mainFoldersView.stopListening(),this.mainFoldersView.undelegateEvents()),this.mainFoldersView=new app.MainFoldersView},getFoldersCreate:function(){this.folderModel=new app.FolderModel,this.createFolderView instanceof Backbone.View&&(this.createFolderView.stopListening(),this.createFolderView.undelegateEvents()),this.createFolderView=new app.CreateFolderView({model:this.folderModel}),this.createFolderView.render()},getFoldersEdit:function(a){this.folderModel=new app.FolderModel,this.folderModel.set({id:a},{silent:!0}),this.createFolderView instanceof Backbone.View&&(this.createFolderView.stopListening(),this.createFolderView.undelegateEvents()),this.createFolderView=new app.CreateFolderView({model:this.folderModel}),this.folderModel.fetch()},getDocumentosMain:function(){this.mainDocumentosView instanceof Backbone.View&&(this.mainDocumentosView.stopListening(),this.mainDocumentosView.undelegateEvents()),this.mainDocumentosView=new app.MainDocumentosView},getDocumentosCreate:function(){this.documentoModel=new app.DocumentoModel,this.createDocumentoView instanceof Backbone.View&&(this.createDocumentoView.stopListening(),this.createDocumentoView.undelegateEvents()),this.createDocumentoView=new app.CreateDocumentoView({model:this.documentoModel}),this.createDocumentoView.render()},getDocumentosEdit:function(a){this.documentoModel=new app.DocumentoModel,this.documentoModel.set({id:a},{silent:!0}),this.createDocumentoView instanceof Backbone.View&&(this.createDocumentoView.stopListening(),this.createDocumentoView.undelegateEvents()),this.createDocumentoView=new app.CreateDocumentoView({model:this.documentoModel}),this.documentoModel.fetch()},getSubGruposMain:function(){this.mainSubGruposView instanceof Backbone.View&&(this.mainSubGruposView.stopListening(),this.mainSubGruposView.undelegateEvents()),this.mainSubGruposView=new app.MainSubGruposView},getSubGruposCreate:function(){this.subGrupoModel=new app.SubGrupoModel,this.createSubGrupoView instanceof Backbone.View&&(this.createSubGrupoView.stopListening(),this.createSubGrupoView.undelegateEvents()),this.createSubGrupoView=new app.CreateSubGrupoView({model:this.subGrupoModel}),this.createSubGrupoView.render()},getSubGruposEdit:function(a){this.subGrupoModel=new app.SubGrupoModel,this.subGrupoModel.set({id:a},{silent:!0}),this.createSubGrupoView instanceof Backbone.View&&(this.createSubGrupoView.stopListening(),this.createSubGrupoView.undelegateEvents()),this.createSubGrupoView=new app.CreateSubGrupoView({model:this.subGrupoModel}),this.subGrupoModel.fetch()},getGruposMain:function(){this.mainGruposView instanceof Backbone.View&&(this.mainGruposView.stopListening(),this.mainGruposView.undelegateEvents()),this.mainGruposView=new app.MainGruposView},getGruposCreate:function(){this.grupoModel=new app.GrupoModel,this.createGrupoView instanceof Backbone.View&&(this.createGrupoView.stopListening(),this.createGrupoView.undelegateEvents()),this.createGrupoView=new app.CreateGrupoView({model:this.grupoModel}),this.createGrupoView.render()},getGruposEdit:function(a){this.grupoModel=new app.GrupoModel,this.grupoModel.set({id:a},{silent:!0}),this.createGrupoView instanceof Backbone.View&&(this.createGrupoView.stopListening(),this.createGrupoView.undelegateEvents()),this.createGrupoView=new app.CreateGrupoView({model:this.grupoModel}),this.grupoModel.fetch()},getUnidadesMain:function(){this.mainUnidadesView instanceof Backbone.View&&(this.mainUnidadesView.stopListening(),this.mainUnidadesView.undelegateEvents()),this.mainUnidadesView=new app.MainUnidadesView},getUnidadesCreate:function(){this.unidadModel=new app.UnidadModel,this.createUnidadView instanceof Backbone.View&&(this.createUnidadView.stopListening(),this.createUnidadView.undelegateEvents()),this.createUnidadView=new app.CreateUnidadView({model:this.unidadModel}),this.createUnidadView.render()},getUnidadesEdit:function(a){this.unidadModel=new app.UnidadModel,this.unidadModel.set({id:a},{silent:!0}),this.createUnidadView instanceof Backbone.View&&(this.createUnidadView.stopListening(),this.createUnidadView.undelegateEvents()),this.createUnidadView=new app.CreateUnidadView({model:this.unidadModel}),this.unidadModel.fetch()},getProductosMain:function(){this.mainProductosView instanceof Backbone.View&&(this.mainProductosView.stopListening(),this.mainProductosView.undelegateEvents()),this.mainProductosView=new app.MainProductosView},getProductosCreate:function(){this.productoModel=new app.ProductoModel,this.createProductoView instanceof Backbone.View&&(this.createProductoView.stopListening(),this.createProductoView.undelegateEvents()),this.createProductoView=new app.CreateProductoView({model:this.productoModel}),this.createProductoView.render()},getProductosEdit:function(a){this.productoModel=new app.ProductoModel,this.productoModel.set({id:a},{silent:!0}),this.createProductoView instanceof Backbone.View&&(this.createProductoView.stopListening(),this.createProductoView.undelegateEvents()),this.createProductoView=new app.CreateProductoView({model:this.productoModel}),this.productoModel.fetch()},getTrasladosMain:function(){this.mainTrasladosView instanceof Backbone.View&&(this.mainTrasladosView.stopListening(),this.mainTrasladosView.undelegateEvents()),this.mainTrasladosView=new app.MainTrasladosView},getTrasladosCreate:function(){this.trasladoModel=new app.TrasladoModel,this.createTrasladoView instanceof Backbone.View&&(this.createTrasladoView.stopListening(),this.createTrasladoView.undelegateEvents()),this.createTrasladoView=new app.CreateTrasladoView({model:this.trasladoModel}),this.createTrasladoView.render()},getTrasladosShow:function(a){this.trasladoModel=new app.TrasladoModel,this.trasladoModel.set({id:a},{silent:!0}),this.showTrasladoView instanceof Backbone.View&&(this.showTrasladoView.stopListening(),this.showTrasladoView.undelegateEvents()),this.showTrasladoView=new app.ShowTrasladoView({model:this.trasladoModel})},getAreaspMain:function(){this.mainAreaspView instanceof Backbone.View&&(this.mainAreaspView.stopListening(),this.mainAreaspView.undelegateEvents()),this.mainAreaspView=new app.MainAreaspView},getAreaspCreate:function(){this.areapModel=new app.AreapModel,this.createAreapView instanceof Backbone.View&&(this.createAreapView.stopListening(),this.createAreapView.undelegateEvents()),this.createAreapView=new app.CreateAreapView({model:this.areapModel}),this.createAreapView.render()},getAreaspEdit:function(a){this.areapModel=new app.AreapModel,this.areapModel.set({id:a},{silent:!0}),this.createAreapView instanceof Backbone.View&&(this.createAreapView.stopListening(),this.createAreapView.undelegateEvents()),this.createAreapView=new app.CreateAreapView({model:this.areapModel}),this.areapModel.fetch()},getAcabadospMain:function(){this.mainAcabadospView instanceof Backbone.View&&(this.mainAcabadospView.stopListening(),this.mainAcabadospView.undelegateEvents()),this.mainAcabadospView=new app.MainAcabadospView},getAcabadospCreate:function(){this.acabadopModel=new app.AcabadopModel,this.createAcabadospView instanceof Backbone.View&&(this.createAcabadospView.stopListening(),this.createAcabadospView.undelegateEvents()),this.createAcabadospView=new app.CreateAcabadospView({model:this.acabadopModel}),this.createAcabadospView.render()},getAcabadospEdit:function(a){this.acabadopModel=new app.AcabadopModel,this.acabadopModel.set({id:a},{silent:!0}),this.createAcabadospView instanceof Backbone.View&&(this.createAcabadospView.stopListening(),this.createAcabadospView.undelegateEvents()),this.createAcabadospView=new app.CreateAcabadospView({model:this.acabadopModel}),this.acabadopModel.fetch()},getMaquinaspMain:function(){this.mainMaquinaspView instanceof Backbone.View&&(this.mainMaquinaspView.stopListening(),this.mainMaquinaspView.undelegateEvents()),this.mainMaquinaspView=new app.MainMaquinaspView},getMaquinaspCreate:function(){this.maquinapModel=new app.MaquinapModel,this.createMaquinapView instanceof Backbone.View&&(this.createMaquinapView.stopListening(),this.createMaquinapView.undelegateEvents()),this.createMaquinapView=new app.CreateMaquinapView({model:this.maquinapModel}),this.createMaquinapView.render()},getMaquinaspEdit:function(a){this.maquinapModel=new app.MaquinapModel,this.maquinapModel.set({id:a},{silent:!0}),this.createMaquinapView instanceof Backbone.View&&(this.createMaquinapView.stopListening(),this.createMaquinapView.undelegateEvents()),this.createMaquinapView=new app.CreateMaquinapView({model:this.maquinapModel}),this.maquinapModel.fetch()},getMaterialespMain:function(){this.mainMaterialespView instanceof Backbone.View&&(this.mainMaterialespView.stopListening(),this.mainMaterialespView.undelegateEvents()),this.mainMaterialespView=new app.MainMaterialespView},getMaterialespCreate:function(){this.materialpModel=new app.MaterialpModel,this.createMaterialpView instanceof Backbone.View&&(this.createMaterialpView.stopListening(),this.createMaterialpView.undelegateEvents()),this.createMaterialpView=new app.CreateMaterialpView({model:this.materialpModel}),this.createMaterialpView.render()},getMaterialespEdit:function(a){this.materialpModel=new app.MaterialpModel,this.materialpModel.set({id:a},{silent:!0}),this.createMaterialpView instanceof Backbone.View&&(this.createMaterialpView.stopListening(),this.createMaterialpView.undelegateEvents()),this.createMaterialpView=new app.CreateMaterialpView({model:this.materialpModel}),this.materialpModel.fetch()},getOrdenesMain:function(){this.mainOrdenesView instanceof Backbone.View&&(this.mainOrdenesView.stopListening(),this.mainOrdenesView.undelegateEvents()),this.mainOrdenesView=new app.MainOrdenesView},getOrdenesCreate:function(){this.ordenpModel=new app.OrdenpModel,this.createOrdenpView instanceof Backbone.View&&(this.createOrdenpView.stopListening(),this.createOrdenpView.undelegateEvents()),this.createOrdenpView=new app.CreateOrdenpView({model:this.ordenpModel}),this.createOrdenpView.render()},getOrdenesShow:function(a){this.ordenpModel=new app.OrdenpModel,this.ordenpModel.set({id:a},{silent:!0}),this.showOrdenesView instanceof Backbone.View&&(this.showOrdenesView.stopListening(),this.showOrdenesView.undelegateEvents()),this.showOrdenesView=new app.ShowOrdenesView({model:this.ordenpModel})},getOrdenesEdit:function(a){this.ordenpModel=new app.OrdenpModel,this.ordenpModel.set({id:a},{silent:!0}),this.createOrdenpView instanceof Backbone.View&&(this.createOrdenpView.stopListening(),this.createOrdenpView.undelegateEvents()),this.createOrdenpView=new app.CreateOrdenpView({model:this.ordenpModel}),this.ordenpModel.fetch()},getProductospMain:function(){this.mainProductospView instanceof Backbone.View&&(this.mainProductospView.stopListening(),this.mainProductospView.undelegateEvents()),this.mainProductospView=new app.MainProductospView},getOrdenesProductoCreate:function(a){var b=this.parseQueryString(a);this.ordenp2Model=new app.Ordenp2Model,this.createOrdenp2View instanceof Backbone.View&&(this.createOrdenp2View.stopListening(),this.createOrdenp2View.undelegateEvents()),this.createOrdenp2View=new app.CreateOrdenp2View({model:this.ordenp2Model,parameters:{data:{orden2_orden:b.ordenp,orden2_productop:b.productop}}}),this.createOrdenp2View.render()},getOrdenesProductoEdit:function(a){this.ordenp2Model=new app.Ordenp2Model,this.ordenp2Model.set({id:a},{silent:!0}),this.createOrdenp2View instanceof Backbone.View&&(this.createOrdenp2View.stopListening(),this.createOrdenp2View.undelegateEvents()),this.createOrdenp2View=new app.CreateOrdenp2View({model:this.ordenp2Model}),this.ordenp2Model.fetch()},getProductospCreate:function(){this.productopModel=new app.ProductopModel,this.createProductopView instanceof Backbone.View&&(this.createProductopView.stopListening(),this.createProductopView.undelegateEvents()),this.createProductopView=new app.CreateProductopView({model:this.productopModel}),this.createProductopView.render()},getProductospShow:function(a){this.productopModel=new app.ProductopModel,this.productopModel.set({id:a},{silent:!0}),this.showProductopView instanceof Backbone.View&&(this.showProductopView.stopListening(),this.showProductopView.undelegateEvents()),this.showProductopView=new app.ShowProductopView({model:this.productopModel})},getProductospEdit:function(a){this.productopModel=new app.ProductopModel,this.productopModel.set({id:a},{silent:!0}),this.createProductopView instanceof Backbone.View&&(this.createProductopView.stopListening(),this.createProductopView.undelegateEvents()),this.createProductopView=new app.CreateProductopView({model:this.productopModel}),this.productopModel.fetch()}}))}(jQuery,this,this.document);var app=app||{};!function(a,b,c,d){var e=function(){a.ajaxSetup({cache:!1,headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}})};String.prototype.replaceAll=function(a,b){return b?this.replace(new RegExp("["+a+"]","g"),b):this},e.prototype={initialize:function(){this.initApp(),this.initICheck(),this.initAlertify(),this.initInputMask(),this.initSelect2(),this.initToUpper(),this.initSpinner(),this.initDatePicker(),this.initTimePicker()},initApp:function(){b.app.AppRouter.start()},initICheck:function(){a("input").iCheck({checkboxClass:"icheckbox_minimal-green",radioClass:"iradio_minimal-green"})},initAlertify:function(){alertify.logPosition("bottom right")},initInputMask:function(){a("[data-mask]").inputmask(),a("[data-currency]").inputmask({radixPoint:",",alias:"currency",removeMaskOnSubmit:!0,unmaskAsNumber:!0,min:0})},initSelect2:function(){a(".select2-default").select2({language:"es",placeholder:"Seleccione",allowClear:!1}),a(".select2-default-clear").select2({language:"es",placeholder:"Seleccione",allowClear:!0})},initToUpper:function(){a(".input-toupper").keyup(function(){a(this).val(a(this).val().toUpperCase())})},initSpinner:function(){a(".spinner-percentage").spinner({step:.1,start:0,min:0,max:100,numberFormat:"n",stop:function(b,c){_.isNull(this.value)||_.isUndefined(this.value)||_.isEmpty(this.value)||(!a.isNumeric(this.value)||this.value>100||this.value<0)&&a(this).spinner("value",0)}})},initValidator:function(){a('form[data-toggle="validator"]').each(function(){var b=a(this);a.fn.validator.call(b,b.data())})},initDatePicker:function(){a(".datepicker").datepicker({autoclose:!0,language:"es",format:"yyyy-mm-dd"})},initTimePicker:function(){a(".timepicker").timepicker({showInputs:!1,showMeridian:!1})}},a(function(){b.initComponent=new e,b.initComponent.initialize()})}(jQuery,this,this.document);