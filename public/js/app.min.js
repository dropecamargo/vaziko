/*! koi-frontend - v1.0.0 - 2016-09-26 */
!function(a,b,c,d){var e=function(a){};e.prototype={initialize:function(){},formToJson:function(b){var c={},e=[];return e=a.prototype.isPrototypeOf(b)?b.serializeArray():a(b).serializeArray(),a.each(e,function(){c[this.name]!==d?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=this.value||""}),c},isUrl:function(a){var b=/^(http[s]?:\/\/(www\.)?|ftp:\/\/(www\.)?|www\.){1}([0-9A-Za-z-\.@:%_\+~#=]+)+(\/(.)*)?(\?(.)*)?/i;return b.test(a)},urlFull:function(a){if(!this.isUrl(c.url))return a;a||(a="");var b=/^\//;return b.test(a)||(a="/"+a),c.url+a},parseErrors:function(b){var c="";if(_.isObject(b)){var d="<ul>";a.each(b,function(a,b){d+="<li>"+b[0]+"</li>"}),d+="</ul>",c=d}return c},setSpinner:function(b){b&&a(b).prepend('<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>')},removeSpinner:function(b){var c=a(b).find(".overlay");c.length&&c.remove()},dataTableES:function(){return{sProcessing:'<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>',sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}},redirect:function(a){a!==d&&""!=a?b.location=a:b.location.reload()},successRedirect:function(a,c){alertify.success(a),setTimeout(function(){b.Misc.redirect(c)},500)},currency:function(a){return accounting.formatMoney(a,"",2,".",",")},evaluateAccount:function(c){c||(c={});var d={callback:null,wrap:"body",cuenta:null,centrocosto:null},e={};e=a.extend({},d,c),a.ajax({url:b.Misc.urlFull(Route.route("plancuentas.search")),type:"GET",data:{plancuentas_cuenta:e.cuenta},beforeSend:function(){b.Misc.setSpinner(e.wrap)}}).done(function(a){if(b.Misc.removeSpinner(e.wrap),a.success){var c={actions:!1};_.isUndefined(a.plancuentas_tipo)||_.isNull(a.plancuentas_tipo)||"P"!=a.plancuentas_tipo||(c.actions=!0,c.action="facturap"),"Function"==={}.toString.call(e.callback).slice(8,-1)&&e.callback(c)}}).fail(function(a,c,d){b.Misc.removeSpinner(e.wrap),alertify.error(d)})},evaluateFacturap:function(c){c||(c={});var d={callback:null,wrap:"body",facturap:null,tercero:null,naturaleza:null},e={};e=a.extend({},d,c),a.ajax({url:b.Misc.urlFull(Route.route("facturap.search")),type:"GET",data:{facturap1_factura:e.facturap,tercero_nit:e.tercero},beforeSend:function(){b.Misc.setSpinner(e.wrap)}}).done(function(a){b.Misc.removeSpinner(e.wrap);var c={actions:!1};a.success?(c.actions=!0,c.facturap=a.id,c.action="quota"):"C"==e.naturaleza?(c.actions=!0,c.action="add"):"D"==e.naturaleza&&(c.message="Para realizar movimientos de naturaleza débito de ingresar un numero de factura existente."),"Function"==={}.toString.call(e.callback).slice(8,-1)&&e.callback(c)}).fail(function(a,c,d){b.Misc.removeSpinner(e.wrap),alertify.error(d)})}},b.Misc=new e,b.Misc.initialize()}(jQuery,this,this.document),app||(app={}),function(a,b,c){app.ActividadModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("actividades.index"))},idAttribute:"id",defaults:{actividad_codigo:"",actividad_nombre:"",actividad_tarifa:"0",actividad_categoria:""}})}(this,this.document),app||(app={}),function(a,b,c){app.AsientoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("asientos.index"))},idAttribute:"id",defaults:{asiento1_ano:moment().format("YYYY"),asiento1_mes:moment().format("M"),asiento1_dia:moment().format("D"),asiento1_folder:"",asiento1_documento:"",documento_tipo_consecutivo:"",asiento1_numero:"",asiento1_beneficiario:"",tercero_nit:"",tercero_nombre:"",asiento1_sucursal:"",asiento1_preguardado:"",asiento1_detalle:"",asiento1_fecha_elaboro:""}})}(this,this.document),app||(app={}),function(a,b,c){app.Asiento2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("asientos.detalle.index"))},idAttribute:"id",defaults:{asiento2_asiento:"",asiento2_cuenta:"",plancuentas_cuenta:"",plancuentas_nombre:"",asiento2_beneficiario:"",tercero_nit:"",tercero_nombre:"",asiento2_debito:0,asiento2_credito:0,asiento2_centro:"",centrocosto_nombre:"",asiento2_base:0,asiento2_detalle:""}})}(this,this.document),app||(app={}),function(a,b,c){app.CentroCostoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("centroscosto.index"))},idAttribute:"id",defaults:{centrocosto_codigo:"",centrocosto_centro:"",centrocosto_nombre:"",centrocosto_descripcion1:"",centrocosto_descripcion2:"",centrocosto_estructura:"N",centrocosto_tipo:"N",centrocosto_activo:!0}})}(this,this.document),app||(app={}),function(a,b,c){app.ContactoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("terceros.contactos.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.DocumentoModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("documentos.index"))},idAttribute:"id",defaults:{documento_codigo:"",documento_nombre:"",documento_folder:"",documento_tipo_consecutivo:"A"}})}(this,this.document),app||(app={}),function(a,b,c){app.EmpresaModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("empresa.index"))},idAttribute:"id",defaults:{tercero_nit:"",tercero_digito:"",tercero_regimen:"",tercero_tipo:"",tercero_persona:"",tercero_razonsocial:"",tercero_nombre1:"",tercero_nombre2:"",tercero_apellido1:"",tercero_apellido2:"",tercero_direccion:"",tercero_municipio:"",tercero_email:"",tercero_telefono1:"",tercero_telefono2:"",tercero_fax:"",tercero_celular:"",tercero_actividad:"",tercero_cc_representante:"",tercero_representante:"",tercero_responsable_iva:!1,tercero_autoretenedor_cree:!1,tercero_gran_contribuyente:!1,tercero_autoretenedor_renta:!1,tercero_autoretenedor_ica:!1,actividad_tarifa:"",empresa_niif:""}})}(this,this.document),app||(app={}),function(a,b,c){app.FacturapModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("facturap.index"))},idAttribute:"id",defaults:{}})}(this,this.document),app||(app={}),function(a,b,c){app.Facturap2Model=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("facturap.cuotas.index"))},idAttribute:"id",defaults:{facturap2_factura:"",facturap2_cuota:"",facturap2_vencimiento:"",facturap2_valor:0,facturap2_saldo:0}})}(this,this.document),app||(app={}),function(a,b,c){app.FolderModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("folders.index"))},idAttribute:"id",defaults:{folder_codigo:"",folder_nombre:""}})}(this,this.document),app||(app={}),function(a,b,c){app.PlanCuentaModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("plancuentas.index"))},idAttribute:"id",defaults:{plancuentas_cuenta:"",plancuentas_nivel:"",plancuentas_nombre:"",plancuentas_naturaleza:"D",plancuentas_centro:"",plancuentas_tercero:!1,plancuentas_tipo:"N",plancuentas_tasa:0}})}(this,this.document),app||(app={}),function(a,b,c){app.TerceroModel=Backbone.Model.extend({urlRoot:function(){return a.Misc.urlFull(Route.route("terceros.index"))},idAttribute:"id",defaults:{tercero_nit:"",tercero_digito:"",tercero_regimen:"",tercero_tipo:"",tercero_persona:"",tercero_razonsocial:"",tercero_nombre1:"",tercero_nombre2:"",tercero_apellido1:"",tercero_apellido2:"",tercero_direccion:"",tercero_municipio:"",tercero_email:"",tercero_telefono1:"",tercero_telefono2:"",tercero_fax:"",tercero_celular:"",tercero_actividad:"",tercero_cc_representante:"",tercero_representante:"",tercero_activo:!1,tercero_responsable_iva:!1,tercero_autoretenedor_cree:!1,tercero_gran_contribuyente:!1,tercero_autoretenedor_renta:!1,tercero_autoretenedor_ica:!1,tercero_socio:!1,tercero_cliente:!1,tercero_acreedor:!1,tercero_interno:!1,tercero_mandatario:!1,tercero_empleado:!1,tercero_proveedor:!1,tercero_extranjero:!1,tercero_afiliado:!1,tercero_otro:!1,tercero_cual:"",actividad_tarifa:""}})}(this,this.document),app||(app={}),function(a,b,c,d){app.CreateActividadView=Backbone.View.extend({el:"#actividad-create",template:_.template(a("#add-actividad-tpl").html()||""),events:{"submit #form-actividad":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-actividad"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initSpinner&&b.initComponent.initSpinner()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("actividades.show",{actividades:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainActividadView=Backbone.View.extend({el:"#actividades-main",initialize:function(){this.$actividadesSearchTable=this.$("#actividades-search-table"),this.$actividadesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("actividades.index")),columns:[{data:"actividad_codigo",name:"actividad_codigo"},{data:"actividad_nombre",name:"actividad_nombre"},{data:"actividad_categoria",name:"actividad_categoria"},{data:"actividad_tarifa",name:"actividad_tarifa"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nueva actividad',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("actividades.create")))}}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("actividades.show",{actividades:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AsientoCuentasListView=Backbone.View.extend({el:"#browse-detalle-asiento-list",events:{"click .item-asiento2-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$debitos=this.$("#total-debitos"),this.$creditos=this.$("#total-creditos"),this.$diferencia=this.$("#total-diferencia"),this.confCollection={reset:!0,data:{}},this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),_.isUndefined(this.parameters.dataFilter.asiento)||_.isNull(this.parameters.dataFilter.asiento)||(this.confCollection.data.asiento=this.parameters.dataFilter.asiento,this.collection.fetch(this.confCollection))},addOne:function(a){var b=new app.AsientoCuentasItemView({model:a,parameters:{edit:this.parameters.edit}});a.view=b,this.$el.append(b.render().el),this.totalize()},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(a){var c=this;b.Misc.setSpinner(this.parameters.wrapper);var d=new app.Asiento2Model;d.save(a,{success:function(a,d){if(!_.isUndefined(d.success)){b.Misc.removeSpinner(c.parameters.wrapper);var e=d.success?"":d.errors;if(_.isObject(d.errors)&&(e=b.Misc.parseErrors(d.errors)),!d.success)return void alertify.error(e);c.collection.add(a)}},error:function(a,d){b.Misc.removeSpinner(c.parameters.wrapper),alertify.error(d.statusText)}})},removeOne:function(c){c.preventDefault();var d=a(c.currentTarget).attr("data-resource"),e=this.collection.get(d),f=this;e instanceof Backbone.Model&&e.destroy({success:function(a,c){if(!_.isUndefined(c.success)){if(b.Misc.removeSpinner(f.parameters.wrapper),!c.success)return void alertify.error(c.errors);a.view.remove(),f.collection.remove(a),f.totalize()}}})},totalize:function(){var a=this.collection.totalize();this.$debitos.length&&this.$debitos.html(b.Misc.currency(a.debitos)),this.$creditos.length&&this.$creditos.html(b.Misc.currency(a.creditos)),this.$diferencia.length&&this.$diferencia.html(b.Misc.currency(a.diferencia))},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.AsientoCuentasItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#add-asiento2-item-tpl").html()||""),events:{},parameters:{edit:!1},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return a.edit=this.parameters.edit,this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateAsientoView=Backbone.View.extend({el:"#asientos-create",template:_.template(a("#add-asiento-tpl").html()||""),templateFp:_.template(a("#add-rfacturap-tpl").html()||""),events:{"change select#asiento1_documento":"documentoChanged","change input#asiento2_base":"baseChanged","submit #form-asientos":"onStore"},initialize:function(){this.$modalFactura=a("#modal-facturap-component"),this.$wraperForm=this.$("#render-form-asientos"),this.asientoCuentasList=new app.AsientoCuentasList,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();a.edit=!1,this.$wraperForm.html(this.template(a)),this.$numero=this.$("#asiento1_numero"),this.$form=this.$("#form-asientos"),this.$formItem=this.$("#form-item-asiento"),this.$inputTasa=this.$("#asiento2_tasa"),this.$inputValor=this.$("#asiento2_valor"),this.$inputBase=this.$("#asiento2_base"),this.referenceViews(),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker()},referenceViews:function(){this.cuentasListView=new app.AsientoCuentasListView({collection:this.asientoCuentasList,parameters:{wrapper:this.el,edit:!0,dataFilter:{asiento:this.model.get("id")}}})},documentoChanged:function(c){var d=this,e=a(c.currentTarget).val();d.$numero.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("documentos.show",{documentos:e})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),_.isObject(a)&&(_.isUndefined(a.documento_tipo_consecutivo)||_.isNull(a.documento_tipo_consecutivo)||(d.$numero.val(a.documento_consecutivo+1),"M"==a.documento_tipo_consecutivo?d.$numero.prop("readonly",!1):"A"==a.documento_tipo_consecutivo&&d.$numero.prop("readonly",!0)))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);c.asiento1_id=this.model.get("id"),b.Misc.evaluateAccount({cuenta:c.plancuentas_cuenta,centrocosto:c.asiento2_centro,wrap:this.$el,callback:function(a){return function(b){if(b.actions){var d={facturap:function(){a.createFacturapView instanceof Backbone.View&&(a.createFacturapView.stopListening(),a.createFacturapView.undelegateEvents()),c.tercero_nit=c.tercero_nit?c.tercero_nit:c.asiento1_beneficiario,c.tercero_nombre=c.tercero_nombre?c.tercero_nombre:c.asiento1_beneficiario_nombre,a.createFacturapView=new app.CreateFacturapView({model:a.model,collection:a.asientoCuentasList,parameters:{data:c}}),a.createFacturapView.render()}};d[b.action]&&d[b.action]()}else a.model.save(c,{patch:!0,silent:!0})}}(this)})}},baseChanged:function(a){var b=this.$inputTasa.val(),c=this.$inputBase.inputmask("unmaskedvalue");!_.isUndefined(b)&&!_.isNull(b)&&b>0?this.$inputValor.val(b*c/100):this.$inputValor.val("")},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);this.createFacturapView instanceof Backbone.View&&(this.createFacturapView.stopListening(),this.createFacturapView.undelegateEvents()),Backbone.history.navigate(Route.route("asientos.edit",{asientos:c.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateFacturapView=Backbone.View.extend({el:"#modal-facturap-component",template:_.template(a("#eval-rfacturap-tpl").html()||""),templateAdd:_.template(a("#add-rfacturap-tpl").html()||""),templateCuotas:_.template(a("#add-rfacturap2-tpl").html()||""),events:{"submit #form-create-facturap-component":"onStoreItem","change input#facturap1_factura":"facturapChanged"},parameters:{data:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.cuotasFPList=new app.CuotasFPList,this.listenTo(this.collection,"sync",this.responseServer),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.cuotasFPList,"reset",this.addAll)},render:function(){this.$el.find(".content-modal").html(this.template(this.parameters.data)),this.$wraper=this.$el.find(".modal-body"),this.$wraperForm=this.$("#content-invoice"),this.$wraperError=this.$("#error-eval-facturap"),this.$wraperError.hide().empty(),this.$el.modal("show")},onStoreItem:function(c){if(!c.isDefaultPrevented()){c.preventDefault();var e=a.extend({},this.parameters.data,b.Misc.formToJson(c.target));this.model.id!=d?this.collection.trigger("store",e):this.model.save(e,{patch:!0,silent:!0})}},facturapChanged:function(c){this.$wraperError.hide().empty(),this.$wraperForm.empty(),b.Misc.evaluateFacturap({facturap:a(c.currentTarget).val(),naturaleza:this.parameters.data.asiento2_naturaleza,tercero:this.parameters.data.tercero_nit,wrap:this.$wraper,callback:function(a){return function(b){if(b.actions){var c={add:function(){a.$wraperForm.html(a.templateAdd()),a.ready()},quota:function(){a.$wraperForm.html(a.templateCuotas()),a.$wraperCuotas=a.$("#browse-rfacturap2-list"),a.cuotasFPList.fetch({reset:!0,data:{facturap1:b.facturap}})}};c[b.action]&&c[b.action]()}else _.isUndefined(b.message)||_.isNull(b.message)||""==b.message||(a.$wraperError.empty().append(b.message),a.$wraperError.show())}}(this)})},addOne:function(a){var b=new app.CuotasFPListView({model:a});this.$wraperCuotas.append(b.render().el),this.ready()},addAll:function(){this.cuotasFPList.forEach(this.addOne,this)},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker()},responseServer:function(a,b,c){_.isUndefined(b.success)||b.success&&this.$el.modal("hide")}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.EditAsientoView=Backbone.View.extend({el:"#asientos-create",template:_.template(a("#add-asiento-tpl").html()||""),templateFp:_.template(a("#add-rfacturap-tpl").html()||""),events:{"change select#asiento1_documento":"documentoChanged","submit #form-item-asiento":"onStoreItem","change input#asiento2_base":"baseChanged","click .submit-asiento":"submitAsiento","submit #form-asientos":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-asientos"),this.asientoCuentasList=new app.AsientoCuentasList,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();a.edit=!0,this.$wraperForm.html(this.template(a)),this.$numero=this.$("#asiento1_numero"),this.$form=this.$("#form-asientos"),this.$formItem=this.$("#form-item-asiento"),this.$inputTasa=this.$("#asiento2_tasa"),this.$inputValor=this.$("#asiento2_valor"),this.$inputBase=this.$("#asiento2_base"),this.$inputDocumento=this.$("#asiento1_documento"),this.referenceViews(),this.ready(),"A"==this.model.get("documento_tipo_consecutivo")&&this.$inputDocumento.change()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initValidator&&b.initComponent.initValidator(),"function"==typeof b.initComponent.initDatePicker&&b.initComponent.initDatePicker(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask()},referenceViews:function(){this.cuentasListView=new app.AsientoCuentasListView({collection:this.asientoCuentasList,parameters:{wrapper:this.el,edit:!0,dataFilter:{asiento:this.model.get("id")}}})},documentoChanged:function(c){var d=this,e=a(c.currentTarget).val();d.$numero.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("documentos.show",{documentos:e})),type:"GET",beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),_.isObject(a)&&(_.isUndefined(a.documento_tipo_consecutivo)||_.isNull(a.documento_tipo_consecutivo)||(d.$numero.val(a.documento_consecutivo+1),"M"==a.documento_tipo_consecutivo?d.$numero.prop("readonly",!1):"A"==a.documento_tipo_consecutivo&&d.$numero.prop("readonly",!0)))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},submitAsiento:function(a){this.$form.submit()},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},onStoreItem:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);c.asiento1_id=this.model.get("id"),b.Misc.evaluateAccount({cuenta:c.plancuentas_cuenta,centrocosto:c.asiento2_centro,wrap:this.$el,callback:function(a){return function(b){if(b.actions){var d={facturap:function(){a.createFacturapView instanceof Backbone.View&&(a.createFacturapView.stopListening(),a.createFacturapView.undelegateEvents()),c.tercero_nit=c.tercero_nit?c.tercero_nit:a.model.get("tercero_nit"),c.tercero_nombre=c.tercero_nombre?c.tercero_nombre:a.model.get("tercero_nombre"),a.createFacturapView=new app.CreateFacturapView({model:a.model,collection:a.asientoCuentasList,parameters:{data:c}}),a.createFacturapView.render()}};d[b.action]&&d[b.action]()}else a.asientoCuentasList.trigger("store",c)}}(this)})}},baseChanged:function(a){var b=this.$inputTasa.val(),c=this.$inputBase.inputmask("unmaskedvalue");!_.isUndefined(b)&&!_.isNull(b)&&b>0?this.$inputValor.val(b*c/100):this.$inputValor.val("")},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("asientos.edit",{asientos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CuotasFPListView=Backbone.View.extend({tagName:"tr",template:_.template(a("#add-rfacturap2-item-tpl").html()||""),initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainAsientosView=Backbone.View.extend({el:"#asientos-main",initialize:function(){this.$asientosSearchTable=this.$("#asientos-search-table"),this.$asientosSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("asientos.index")),columns:[{data:"asiento1_numero",name:"asiento1_numero"},{data:"asiento1_ano",name:"asiento1_ano"},{data:"asiento1_mes",name:"asiento1_mes"},{data:"tercero_nit",name:"tercero_nit"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"tercero_razonsocial",name:"tercero_razonsocial"},{data:"tercero_nombre1",name:"tercero_nombre1"},{data:"tercero_nombre2",name:"tercero_nombre2"},{data:"tercero_apellido1",name:"tercero_apellido1"},{data:"tercero_apellido2",name:"tercero_apellido2"},{data:"asiento1_preguardado",name:"asiento1_preguardado"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nueva asiento',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("asientos.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return d.asiento1_preguardado?'<a href="'+b.Misc.urlFull(Route.route("asientos.edit",{asientos:d.id}))+'">'+a+' <span class="label label-warning">PRE</span></a>':'<a href="'+b.Misc.urlFull(Route.route("asientos.show",{asientos:d.id}))+'">'+a+"</a>"}},{targets:[1,2],width:"10%"},{targets:3,width:"15%"},{targets:4,searchable:!1},{targets:[5,6,7,8,9],visible:!1},{targets:10,visible:!1,searchable:!1}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ShowAsientoView=Backbone.View.extend({el:"#asientos-show",initialize:function(){this.model.id!=d&&(this.asientoCuentasList=new app.AsientoCuentasList,this.referenceViews())},referenceViews:function(){this.cuentasListView=new app.AsientoCuentasListView({collection:this.asientoCuentasList,parameters:{wrapper:this.el,dataFilter:{asiento:this.model.get("id")}}})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateCentroCostoView=Backbone.View.extend({el:"#centrocosto-create",template:_.template(a("#add-centrocosto-tpl").html()||""),events:{"submit #form-centrocosto":"onStore"},parameters:{callback:""},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.msgSuccess="Centro de costo guardado con exito!",this.$wraperForm=this.$("#render-form-centrocosto"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);var f=this,g={toShow:function(){b.Misc.redirect(b.Misc.urlFull(Route.route("centroscosto.show",{centroscosto:c.id})))},"default":function(){alertify.success(f.msgSuccess)}};g[this.parameters.callback]?g[this.parameters.callback]():g["default"]()}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainCentrosCostoView=Backbone.View.extend({el:"#centroscosto-main",initialize:function(){this.$centroscostoSearchTable=this.$("#centroscosto-search-table"),this.$centroscostoSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("centroscosto.index")),columns:[{data:"centrocosto_codigo",name:"centrocosto_codigo"},{data:"centrocosto_centro",name:"centrocosto_centro"},{data:"centrocosto_nombre",name:"centrocosto_nombre"},{data:"centrocosto_estructura",name:"centrocosto_estructura"},{data:"centrocosto_activo",name:"centrocosto_activo"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo centro de costo',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("centroscosto.create")))}}],columnDefs:[{targets:0,width:"10%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("centroscosto.show",{centroscosto:d.id}))+'">'+a+"</a>"}},{targets:3,width:"10%",render:function(a,b,c,d){return"S"==a?"Si":"No"}},{targets:[4],width:"10%",render:function(a,b,c,d){return a?"Si":"No"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentAddressView=Backbone.View.extend({el:"body",template:_.template(a("#koi-address-component-tpl").html()||""),events:{"click .btn-address-koi-component":"focusComponent","submit #form-address-component":"addAddress","change select#koi_nomenclatura1":"nomenclatura1Changed","change input#koi_numero1":"numero1Changed","change select#koi_alfabeto1":"alfabeto1Changed","change select#koi_bis":"bisChanged","change select#koi_alfabeto2":"alfabeto2Changed","change select#koi_cardinales1":"cardinales1Changed","change input#koi_numero2":"numero2Changed","change select#koi_alfabeto3":"alfabeto3Changed","change input#koi_numero3":"numero3Changed","change select#koi_cardinales2":"cardinales2Changed","click .btn-address-component-add-complement":"addComplement","click .btn-address-component-remove-item":"removeItem"},initialize:function(){this.$modalComponent=this.$("#modal-address-component")},focusComponent:function(b){a("#"+a(b.currentTarget).attr("data-field")).focus()},addressChanged:function(c){this.inputContent=a(c.currentTarget),this.$modalComponent.find(".content-modal").html(this.template({})),this.$addressField=this.$modalComponent.find("#koi_direccion"),this.$postalField=this.$modalComponent.find("#koi_postal"),this.$formComponent=this.$modalComponent.find("#form-address-component"),this.addressData=new Array(10),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),this.$formComponent.validator(),this.$modalComponent.modal("show")},addAddress:function(a){a.isDefaultPrevented()||(a.preventDefault(),this.inputContent.val(this.$addressField.val()),this.$modalComponent.modal("hide"))},nomenclatura1Changed:function(b){this.addressData[0]=a(b.currentTarget).val(),this.buildAddress()},numero1Changed:function(b){this.addressData[1]=a(b.currentTarget).val().trim(),this.buildAddress()},alfabeto1Changed:function(b){this.addressData[2]=a(b.currentTarget).val(),this.buildAddress()},bisChanged:function(b){this.addressData[3]=a(b.currentTarget).val(),this.buildAddress()},alfabeto2Changed:function(b){this.addressData[4]=a(b.currentTarget).val(),this.buildAddress()},cardinales1Changed:function(b){this.addressData[5]=a(b.currentTarget).val(),this.buildAddress()},numero2Changed:function(b){
this.addressData[6]=a(b.currentTarget).val().trim(),this.buildAddress()},alfabeto3Changed:function(b){this.addressData[7]=a(b.currentTarget).val(),this.buildAddress()},numero3Changed:function(b){this.addressData[8]=a(b.currentTarget).val().trim(),this.buildAddress()},cardinales2Changed:function(b){this.addressData[9]=a(b.currentTarget).val(),this.buildAddress()},addComplement:function(a){a.preventDefault(),_.isUndefined(this.$("#koi_complementos1").val())||_.isNull(this.$("#koi_complementos1").val())||""==this.$("#koi_complementos1").val()||(this.addressData.push(this.$("#koi_complementos1").val()),_.isUndefined(this.$("#koi_complementos2").val())||_.isNull(this.$("#koi_complementos2").val())||""==this.$("#koi_complementos2").val()||this.addressData.push(this.$("#koi_complementos2").val()),this.$("#koi_complementos1").val(""),this.$("#koi_complementos2").val(""),this.buildAddress())},removeItem:function(a){a.preventDefault(),this.addressData.pop(),this.buildAddress()},buildAddress:function(){var b=a.grep(this.addressData,Boolean).join(" ").trim();this.$addressField.val(b)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentCreateResourceView=Backbone.View.extend({el:"body",events:{"click .btn-add-resource-koi-component":"addResource","submit #form-create-resource-component":"onStore"},initialize:function(){this.$modalComponent=this.$("#modal-add-resource-component"),this.$wraperError=this.$("#error-resource-component"),this.$wraperContent=this.$("#content-create-resource-component").find(".modal-body")},addResource:function(b){this.resource=a(b.currentTarget).attr("data-resource"),this.$resourceField=a("#"+a(b.currentTarget).attr("data-field"));var c=this,d={centrocosto:function(){c.$modalComponent.find(".inner-title-modal").html("Centros de costo"),c.model=new app.CentroCostoModel;var b=_.template(a("#add-centrocosto-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},folder:function(){c.$modalComponent.find(".inner-title-modal").html("Folder"),c.model=new app.FolderModel;var b=_.template(a("#add-folder-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))},tercero:function(){c.$modalComponent.find(".inner-title-modal").html("Tercero"),c.model=new app.TerceroModel;var b=_.template(a("#add-tercero-tpl").html());c.$modalComponent.find(".content-modal").html(b(c.model.toJSON()))}};d[this.resource]&&(d[this.resource](),this.$wraperError.hide().empty(),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner),this.ready(),this.$modalComponent.modal("show"))},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},onStore:function(a){if(!a.isDefaultPrevented()){this.$wraperError.hide().empty(),a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.$wraperContent)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.$wraperContent);var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return this.$wraperError.empty().append(e),void this.$wraperError.show();var f=this,g={centrocosto:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("centrocosto_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},folder:function(){f.$resourceField.select2({data:[{id:f.model.get("id"),text:f.model.get("folder_nombre")}]}).trigger("change"),f.$resourceField.val(f.model.get("id")).trigger("change")},tercero:function(){f.$resourceField.val(f.model.get("tercero_nit")).trigger("change")}};g[this.resource]&&(g[this.resource](),this.$modalComponent.modal("hide"))}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentDocumentView=Backbone.View.extend({el:"body",events:{"change .select-filter-document-koi-component":"folderChanged"},initialize:function(){},folderChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper")),this.$inputDocument=this.$("#"+a(c.currentTarget).attr("data-documents"));var e=this.$inputContent.val();this.$inputDocument.find("option:gt(0)").remove(),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("documentos.filter")),type:"GET",data:{folder:e},beforeSend:function(){b.Misc.setSpinner(d.$wraperConten)}}).done(function(c){b.Misc.removeSpinner(d.$wraperConten),c.success&&_.isObject(c.documents)&&(a.each(c.documents,function(b,c){d.$inputDocument.append(a("<option></option>").attr("value",c.id).text(c.documento_nombre))}),d.$inputDocument.change())}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentReportView=Backbone.View.extend({el:"body",events:{"click .btn-export-pdf-koi-component":"onPdf","click .btn-export-xls-koi-component":"onXls"},initialize:function(){},onPdf:function(a){this.$("#type-report-koi-component").val("pdf")},onXls:function(a){this.$("#type-report-koi-component").val("xls")}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchCuentaView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-plancuenta-component-tpl").html()||""),events:{"change input.plancuenta-koi-component":"cuentaChanged","click .btn-koi-search-plancuenta-component":"searchCuenta","click .btn-search-koi-search-plancuenta-component":"search","click .btn-clear-koi-search-plancuenta-component":"clear","click .a-koi-search-plancuenta-component-table":"setCuenta"},initialize:function(){this.$modalComponent=this.$("#modal-search-component")},searchCuenta:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchCuenta=this.$("#koi_search_plancuentas_cuenta"),this.$searchName=this.$("#koi_search_plancuentas_nombre"),this.$plancuentasSearchTable=this.$modalComponent.find("#koi-search-plancuenta-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+this.$inputContent.attr("data-name")),this.$inputCentro=this.$("#"+this.$inputContent.attr("data-centro")),this.$inputBase=this.$("#"+this.$inputContent.attr("data-base")),this.$inputValor=this.$("#"+this.$inputContent.attr("data-valor")),this.$inputTasa=this.$("#"+this.$inputContent.attr("data-tasa")),this.plancuentasSearchTable=this.$plancuentasSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("plancuentas.index")),data:function(a){a.plancuentas_cuenta=d.$searchCuenta.val(),a.plancuentas_nombre=d.$searchName.val()}},columns:[{data:"plancuentas_cuenta",name:"plancuentas_cuenta"},{data:"plancuentas_nivel",name:"plancuentas_nivel"},{data:"plancuentas_nombre",name:"plancuentas_nombre"},{data:"plancuentas_naturaleza",name:"plancuentas_naturaleza"},{data:"plancuentas_tercero",name:"plancuentas_tercero"}],columnDefs:[{targets:0,width:"15%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-plancuenta-component-table">'+a+"</a>"}},{targets:1,width:"10%",searchable:!1},{targets:3,width:"10%",searchable:!1,render:function(a,b,c,d){return"D"==a?"Débito":"Crédito"}},{targets:4,width:"10%",searchable:!1,render:function(a,b,c,d){return a?"Si":"No"}}]}),this.ready(),this.$modalComponent.modal("show")},setCuenta:function(b){b.preventDefault();var c=this.plancuentasSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.plancuentas_cuenta),this.$inputName.val(c.plancuentas_nombre),this.$inputName.val(c.plancuentas_nombre),this.$inputCentro.length&&this.$inputCentro.val("").trigger("change"),this.$inputBase.length&&this.$inputBase.prop("readonly",!0),this.$modalComponent.modal("hide"),this.actions(c)},search:function(a){a.preventDefault(),this.plancuentasSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCuenta.val(""),this.$searchName.val(""),this.plancuentasSearchTable.ajax.reload()},cuentaChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$inputBase=this.$("#"+a(c.currentTarget).attr("data-base")),this.$inputTasa=this.$("#"+a(c.currentTarget).attr("data-tasa")),this.$inputValor=this.$("#"+a(c.currentTarget).attr("data-valor")),this.$inputCentro=this.$("#"+a(c.currentTarget).attr("data-centro")),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper"));var e=this.$inputContent.val();this.$inputName.val(""),this.$inputCentro.length&&this.$inputCentro.val("").trigger("change"),this.$inputBase.length&&this.$inputBase.prop("readonly",!0),this.$inputTasa.length&&this.$inputTasa.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("plancuentas.search")),type:"GET",data:{plancuentas_cuenta:e},beforeSend:function(){b.Misc.setSpinner(d.$wraperConten)}}).done(function(a){b.Misc.removeSpinner(d.$wraperConten),a.success&&(_.isUndefined(a.plancuentas_nombre)||_.isNull(a.plancuentas_nombre)||d.$inputName.val(a.plancuentas_nombre),d.actions(a))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})},actions:function(a){if(this.$inputBase.length)if(!_.isUndefined(a.plancuentas_tasa)&&!_.isNull(a.plancuentas_tasa)&&a.plancuentas_tasa>0){this.$inputBase.prop("readonly",!1);var b=this.$inputBase.inputmask("unmaskedvalue");this.$inputValor.val(a.plancuentas_tasa*b/100)}else this.$inputBase.val("");this.$inputCentro.length&&!_.isUndefined(a.plancuentas_centro)&&!_.isNull(a.plancuentas_centro)&&a.plancuentas_centro>0&&this.$inputCentro.val(a.plancuentas_centro).trigger("change"),this.$inputTasa.length&&(!_.isUndefined(a.plancuentas_tasa)&&!_.isNull(a.plancuentas_tasa)&&a.plancuentas_tasa>0?this.$inputTasa.val(a.plancuentas_tasa):this.$inputTasa.val(""))},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentSearchTerceroView=Backbone.View.extend({el:"body",template:_.template(a("#koi-search-tercero-component-tpl").html()||""),events:{"change input.tercero-koi-component":"terceroChanged","click .btn-koi-search-tercero-component-table":"searchTercero","click .btn-search-koi-search-tercero-component":"search","click .btn-clear-koi-search-tercero-component":"clear","click .a-koi-search-tercero-component-table":"setTercero"},initialize:function(){this.$modalComponent=this.$("#modal-search-component")},searchTercero:function(c){c.preventDefault();var d=this;this.$modalComponent.find(".content-modal").html(this.template({})),this.$searchNit=this.$("#koi_search_tercero_nit"),this.$searchName=this.$("#koi_search_tercero_nombre"),this.$tercerosSearchTable=this.$modalComponent.find("#koi-search-tercero-component-table"),this.$inputContent=this.$("#"+a(c.currentTarget).attr("data-field")),this.$inputName=this.$("#"+this.$inputContent.attr("data-name")),this.tercerosSearchTable=this.$tercerosSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("terceros.index")),data:function(a){a.tercero_nit=d.$searchNit.val(),a.tercero_nombre=d.$searchName.val()}},columns:[{data:"tercero_nit",name:"tercero_nit"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"tercero_razonsocial",name:"tercero_razonsocial"},{data:"tercero_nombre1",name:"tercero_nombre1"},{data:"tercero_nombre2",name:"tercero_nombre2"},{data:"tercero_apellido1",name:"tercero_apellido1"},{data:"tercero_apellido2",name:"tercero_apellido2"}],columnDefs:[{targets:0,width:"15%",searchable:!1,render:function(a,b,c,d){return'<a href="#" class="a-koi-search-tercero-component-table">'+a+"</a>"}},{targets:1,width:"85%",searchable:!1},{targets:[2,3,4,5,6],visible:!1,searchable:!1}]}),this.ready(),this.$modalComponent.modal("show")},setTercero:function(b){b.preventDefault();var c=this.tercerosSearchTable.row(a(b.currentTarget).parents("tr")).data();this.$inputContent.val(c.tercero_nit),this.$inputName.val(c.tercero_nombre),this.$modalComponent.modal("hide")},search:function(a){a.preventDefault(),this.tercerosSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchNit.val(""),this.$searchName.val(""),this.tercerosSearchTable.ajax.reload()},terceroChanged:function(c){var d=this;this.$inputContent=a(c.currentTarget),this.$inputName=this.$("#"+a(c.currentTarget).attr("data-name")),this.$wraperConten=this.$("#"+a(c.currentTarget).attr("data-wrapper"));var e=this.$inputContent.val();this.$inputName.val(""),_.isUndefined(e)||_.isNull(e)||""==e||a.ajax({url:b.Misc.urlFull(Route.route("terceros.search")),type:"GET",data:{tercero_nit:e},beforeSend:function(){d.$inputName.val(""),b.Misc.setSpinner(d.$wraperConten)}}).done(function(a){b.Misc.removeSpinner(d.$wraperConten),a.success&&(_.isUndefined(a.tercero_nombre)||_.isNull(a.tercero_nombre)||d.$inputName.val(a.tercero_nombre))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperConten),alertify.error(e)})},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ComponentTerceroView=Backbone.View.extend({el:"body",templateName:_.template(a("#tercero-name-tpl").html()||""),events:{"change .change-nit-koi-component":"nitChanged","change .change-actividad-koi-component":"actividadChanged"},initialize:function(){},nitChanged:function(c){var d=this;this.$dv=a("#"+a(c.currentTarget).attr("data-field")),this.$wraperContent=this.$("#tercero-create"),this.$wraperContent.length||(this.$modalComponent=this.$("#modal-add-resource-component"),this.$wraperContent=this.$modalComponent.find(".modal-body")),a.ajax({url:b.Misc.urlFull(Route.route("terceros.dv")),type:"GET",data:{tercero_nit:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.$wraperContent)}}).done(function(a){b.Misc.removeSpinner(d.$wraperContent),a.success&&d.$dv.val(a.dv)}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperContent),alertify.error(e)})},actividadChanged:function(c){var d=this;this.$retecree=a("#"+a(c.currentTarget).attr("data-field")),this.$wraperContent=this.$("#tercero-create"),this.$wraperContent.length||(this.$modalComponent=this.$("#modal-add-resource-component"),this.$wraperContent=this.$modalComponent.find(".modal-body")),a.ajax({url:b.Misc.urlFull(Route.route("terceros.rcree")),type:"GET",data:{tercero_actividad:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.$wraperContent)}}).done(function(a){b.Misc.removeSpinner(d.$wraperContent),a.success&&(_.isUndefined(a.rcree)||_.isNull(a.rcree)||d.$retecree.html(a.rcree))}).fail(function(a,c,e){b.Misc.removeSpinner(d.$wraperContent),alertify.error(e)})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainDepartamentoView=Backbone.View.extend({el:"#departamentos-main",initialize:function(){this.$departamentosSearchTable=this.$("#departamentos-search-table"),this.$departamentosSearchTable.DataTable({processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("departamentos.index")),columns:[{data:"departamento_codigo",name:"departamento_codigo"},{data:"departamento_nombre",name:"departamento_nombre"}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateDocumentoView=Backbone.View.extend({el:"#documento-create",template:_.template(a("#add-documento-tpl").html()||""),events:{"submit #form-documento":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-documento"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("documentos.show",{documentos:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainDocumentosView=Backbone.View.extend({el:"#documentos-main",initialize:function(){this.$documentosSearchTable=this.$("#documentos-search-table"),this.$documentosSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("documentos.index")),columns:[{data:"documento_codigo",name:"documento_codigo"},{data:"documento_nombre",name:"documento_nombre"},{data:"folder_codigo",name:"folder_codigo"},{data:"folder_id",name:"folder_id"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Nuevo documento',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("documentos.create")))}}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("documentos.show",{documentos:d.id}))+'">'+a+"</a>"}},{targets:1,width:"70%"},{targets:2,width:"15%",render:function(a,c,d,e){return _.isNull(d.folder_codigo)||_.isUndefined(d.folder_codigo)?"":'<a href="'+b.Misc.urlFull(Route.route("folders.show",{folders:d.folder_id}))+'">'+a+"</a>"}},{targets:3,visible:!1,searchable:!1}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateEmpresaView=Backbone.View.extend({el:"#empresa-create",template:_.template(a("#add-company-tpl").html()||""),templateName:_.template(a("#tercero-name-tpl").html()||""),events:{"change input#tercero_nit":"nitChanged","change select#tercero_persona":"personaChanged","change select#tercero_actividad":"actividadChanged","submit #form-create-empresa":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-empresa"),this.listenTo(this.model,"change:id",this.render),this.listenTo(this.model,"change:tercero_persona",this.renderName),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$dv=this.$("#tercero_digito"),this.$retecree=this.$("#tercero_retecree"),this.ready()},renderName:function(a,b,c){this.$("#content-render-name").html(this.templateName(this.model.toJSON())),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},nitChanged:function(c){var d=this;a.ajax({url:b.Misc.urlFull(Route.route("terceros.dv")),type:"GET",data:{tercero_nit:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),a.success&&d.$dv.val(a.dv)}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},personaChanged:function(b){this.model.set({tercero_persona:a(b.currentTarget).val()})},actividadChanged:function(c){var d=this;a.ajax({url:b.Misc.urlFull(Route.route("terceros.rcree")),type:"GET",data:{tercero_actividad:a(c.currentTarget).val()},beforeSend:function(){b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),a.success&&(_.isUndefined(a.rcree)||_.isNull(a.rcree)||d.$retecree.html(a.rcree))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);alertify.success("datos de empresa fueron actualizados con éxito.")}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateFolderView=Backbone.View.extend({el:"#folder-create",template:_.template(a("#add-folder-tpl").html()||""),events:{"submit #form-folder":"onStore"},parameters:{},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.$wraperForm=this.$("#render-form-folder"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper()},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("folders.show",{folders:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainFoldersView=Backbone.View.extend({el:"#folders-main",initialize:function(){this.$foldersSearchTable=this.$("#folders-search-table"),this.$foldersSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("folders.index")),columns:[{data:"folder_codigo",name:"folder_codigo"},{data:"folder_nombre",name:"folder_nombre"}],buttons:[{text:'<i class="fa fa-user-plus"></i> Agregar Folder',className:"btn-sm",action:function(a,c,d,e){b.Misc.redirect(b.Misc.urlFull(Route.route("folders.create")))}}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("folders.show",{folders:d.id}))+'">'+a+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.UserLoginView=Backbone.View.extend({el:"#login-box",initialize:function(){this.$loginForm=a("#form-login-account"),this.$loginForm.validator()},render:function(){}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainMunicipioView=Backbone.View.extend({el:"#municipios-main",initialize:function(){this.$municipiosSearchTable=this.$("#municipios-search-table"),this.$municipiosSearchTable.DataTable({processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:b.Misc.urlFull(Route.route("municipios.index")),columns:[{data:"departamento_codigo",name:"koi_departamento.departamento_codigo"},{data:"departamento_nombre",name:"departamento_nombre"},{data:"municipio_codigo",name:"municipio_codigo"},{data:"municipio_nombre",name:"municipio_nombre"},{data:"departamento_id",name:"departamento_id"}],columnDefs:[{targets:0,width:"15%"},{targets:1,width:"35%"},{targets:2,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("departamentos.show",{departamentos:d.departamento_id}))+'">'+a+"</a>"}},{targets:3,width:"35%"},{targets:4,visible:!1,searchable:!1}]})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreatePlanCuentaView=Backbone.View.extend({el:"#plancuentas-create",template:_.template(a("#add-plancuentas-tpl").html()||""),events:{"change input#plancuentas_cuenta":"cuentaChanged","submit #form-plancuentas":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-plancuentas"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.$nivel=this.$("#plancuentas_nivel"),"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2()},cuentaChanged:function(c){var d=this;a.ajax({url:b.Misc.urlFull(Route.route("plancuentas.nivel")),type:"GET",data:{plancuentas_cuenta:a(c.currentTarget).val()},beforeSend:function(){d.$nivel.val(""),b.Misc.setSpinner(d.el)}}).done(function(a){b.Misc.removeSpinner(d.el),a.success&&((_.isUndefined(a.nivel)||_.isNull(a.nivel)||!_.isNumber(a.nivel))&&alertify.error("Ocurrió un error definiendo el nivel de la cuenta, por favor verifique el número de caracteres."),d.$nivel.val(a.nivel))}).fail(function(a,c,e){b.Misc.removeSpinner(d.el),alertify.error(e)})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0,silent:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("plancuentas.show",{plancuentas:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainPlanCuentasView=Backbone.View.extend({el:"#plancuentas-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var a=this;this.$plancuentasSearchTable=this.$("#plancuentas-search-table"),this.$searchCuenta=this.$("#plancuentas_cuenta"),this.$searchName=this.$("#plancuentas_nombre"),this.plancuentasSearchTable=this.$plancuentasSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("plancuentas.index")),data:function(b){b.persistent=!0,b.plancuentas_cuenta=a.$searchCuenta.val(),b.plancuentas_nombre=a.$searchName.val()}},columns:[{data:"plancuentas_cuenta",name:"plancuentas_cuenta"},{data:"plancuentas_nivel",name:"plancuentas_nivel"},{data:"plancuentas_nombre",name:"plancuentas_nombre"},{data:"plancuentas_naturaleza",name:"plancuentas_naturaleza"},{data:"plancuentas_tercero",name:"plancuentas_tercero"}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("plancuentas.show",{plancuentas:d.id}))+'">'+a+"</a>"}},{targets:1,width:"10%"},{targets:3,width:"10%",render:function(a,b,c,d){return"D"==a?"Débito":"Crédito"}},{targets:4,width:"10%",render:function(a,b,c,d){return a?"Si":"No"}}]})},search:function(a){a.preventDefault(),this.plancuentasSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchCuenta.val(""),this.$searchName.val(""),this.plancuentasSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ContactItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#contact-item-list-tpl").html()||""),events:{},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ContactsListView=Backbone.View.extend({el:"#browse-contact-list",events:{},parameters:{dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{tercero_id:this.parameters.dataFilter.tercero_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.ContactItemView({model:a});this.$el.append(b.render().el)},addAll:function(){this.$el.html(""),this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.el)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.CreateTerceroView=Backbone.View.extend({el:"#tercero-create",template:_.template(a("#add-tercero-tpl").html()||""),events:{"submit #form-create-tercero":"onStore"},initialize:function(a){this.msgSuccess="Tercero guardado con exito!",this.$wraperForm=this.$("#render-form-tercero"),this.listenTo(this.model,"change:id",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var a=this.model.toJSON();this.$wraperForm.html(this.template(a)),this.model.id!=d&&(this.contactsList=new app.ContactsList,this.referenceViews()),this.ready()},ready:function(){"function"==typeof b.initComponent.initToUpper&&b.initComponent.initToUpper(),"function"==typeof b.initComponent.initInputMask&&b.initComponent.initInputMask(),"function"==typeof b.initComponent.initSelect2&&b.initComponent.initSelect2(),"function"==typeof b.initComponent.initICheck&&b.initComponent.initICheck()},referenceViews:function(){this.contactsListView=new app.ContactsListView({collection:this.contactsList,parameters:{dataFilter:{tercero_id:this.model.get("id")}}})},onStore:function(a){if(!a.isDefaultPrevented()){a.preventDefault();var c=b.Misc.formToJson(a.target);this.model.save(c,{patch:!0})}},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){if(b.Misc.removeSpinner(this.el),!_.isUndefined(c.success)){var e=c.success?"":c.errors;if(_.isObject(c.errors)&&(e=b.Misc.parseErrors(c.errors)),!c.success)return void alertify.error(e);b.Misc.redirect(b.Misc.urlFull(Route.route("terceros.show",{terceros:c.id})))}}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.FacturaptListView=Backbone.View.extend({el:"#browse-facturap-list",events:{},parameters:{dataFilter:{}},initialize:function(b){b!==d&&_.isObject(b.parameters)&&(this.parameters=a.extend({},this.parameters,b.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{tercero_id:this.parameters.dataFilter.tercero_id},reset:!0})},render:function(){},addOne:function(a){var b=new app.FacturaptItemView({model:a});this.$el.append(b.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},loadSpinner:function(a,c,d){b.Misc.setSpinner(this.el)},responseServer:function(a,c,d){b.Misc.removeSpinner(this.el)}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.FacturaptItemView=Backbone.View.extend({tagName:"tr",template:_.template(a("#facturapt-item-list-tpl").html()||""),events:{},initialize:function(){this.listenTo(this.model,"change",this.render);
},render:function(){var a=this.model.toJSON();return this.$el.html(this.template(a)),this}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.MainTerceroView=Backbone.View.extend({el:"#terceros-main",events:{"click .btn-search":"search","click .btn-clear":"clear"},initialize:function(){var a=this;this.$tercerosSearchTable=this.$("#terceros-search-table"),this.$searchNit=this.$("#tercero_nit"),this.$searchName=this.$("#tercero_nombre"),this.tercerosSearchTable=this.$tercerosSearchTable.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:b.Misc.dataTableES(),ajax:{url:b.Misc.urlFull(Route.route("terceros.index")),data:function(b){b.persistent=!0,b.tercero_nit=a.$searchNit.val(),b.tercero_nombre=a.$searchName.val()}},columns:[{data:"tercero_nit",name:"tercero_nit"},{data:"tercero_nombre",name:"tercero_nombre"},{data:"tercero_razonsocial",name:"tercero_razonsocial"},{data:"tercero_nombre1",name:"tercero_nombre1"},{data:"tercero_nombre2",name:"tercero_nombre2"},{data:"tercero_apellido1",name:"tercero_apellido1"},{data:"tercero_apellido2",name:"tercero_apellido2"}],columnDefs:[{targets:0,width:"15%",render:function(a,c,d,e){return'<a href="'+b.Misc.urlFull(Route.route("terceros.show",{terceros:d.id}))+'">'+a+"</a>"}},{targets:1,width:"85%",searchable:!1},{targets:[2,3,4,5,6],visible:!1}]})},search:function(a){a.preventDefault(),this.tercerosSearchTable.ajax.reload()},clear:function(a){a.preventDefault(),this.$searchNit.val(""),this.$searchName.val(""),this.tercerosSearchTable.ajax.reload()}})}(jQuery,this,this.document),app||(app={}),function(a,b,c,d){app.ShowTerceroView=Backbone.View.extend({el:"#terceros-main",initialize:function(){this.model.id!=d&&(this.contactsList=new app.ContactsList,this.facturaptList=new app.FacturaptList,this.referenceViews())},referenceViews:function(){this.contactsListView=new app.ContactsListView({collection:this.contactsList,parameters:{dataFilter:{tercero_id:this.model.get("id")}}}),this.facturaptListView=new app.FacturaptListView({collection:this.facturaptList,parameters:{dataFilter:{tercero_id:this.model.get("id")}}})}})}(jQuery,this,this.document),app||(app={}),function(a,b,c){app.AsientoCuentasList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("asientos.detalle.index"))},model:app.Asiento2Model,initialize:function(){},debitos:function(){return this.reduce(function(a,b){return a+parseFloat(b.get("asiento2_debito"))},0)},creditos:function(){return this.reduce(function(a,b){return a+parseFloat(b.get("asiento2_credito"))},0)},totalize:function(){var a=this.debitos(),b=this.creditos();return{debitos:a,creditos:b,diferencia:Math.abs(b-a)}}})}(this,this.document),app||(app={}),function(a,b,c){app.CuotasFPList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("facturap.cuotas.index"))},model:app.Facturap2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.ContactsList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("terceros.contactos.index"))},model:app.ContactoModel,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c){app.FacturaptList=Backbone.Collection.extend({url:function(){return a.Misc.urlFull(Route.route("terceros.facturap"))},model:app.Facturap2Model,initialize:function(){}})}(this,this.document),app||(app={}),function(a,b,c,d){app.AppRouter=new(Backbone.Router.extend({routes:{"login(/)":"getLogin","terceros(/)":"getTercerosMain","terceros/create(/)":"getTercerosCreate","terceros/:tercero(/)":"getTercerosShow","terceros/:tercero/edit(/)":"getTercerosEdit","empresa(/)":"getEmpresaEdit","municipios(/)":"getMunicipiosMain","departamentos(/)":"getDepartamentosMain","actividades(/)":"getActividadesMain","actividades/create(/)":"getActividadesCreate","actividades/:actividad/edit(/)":"getActividadesEdit","plancuentas(/)":"getPlanCuentasMain","plancuentas/create(/)":"getPlanCuentasCreate","plancuentas/:plancuenta/edit(/)":"getPlanCuentasEdit","centroscosto(/)":"getCentrosCostoMain","centroscosto/create(/)":"getCentrosCostoCreate","centroscosto/:centrocosto/edit(/)":"getCentrosCostoEdit","asientos(/)":"getAsientosMain","asientos/create(/)":"getAsientosCreate","asientos/:asientos(/)":"getAsientosShow","asientos/:asiento/edit(/)":"getAsientosEdit","documentos(/)":"getDocumentosMain","documentos/create(/)":"getDocumentosCreate","documentos/:documento/edit(/)":"getDocumentosEdit","folders(/)":"getFoldersMain","folders/create(/)":"getFoldersCreate","folders/:folder/edit(/)":"getFoldersEdit"},initialize:function(a){this.componentAddressView=new app.ComponentAddressView,this.componentCreateResourceView=new app.ComponentCreateResourceView,this.componentSearchTerceroView=new app.ComponentSearchTerceroView,this.componentSearchCuentaView=new app.ComponentSearchCuentaView,this.componentDocumentView=new app.ComponentDocumentView,this.componentReportView=new app.ComponentReportView,this.componentTerceroView=new app.ComponentTerceroView},start:function(){var a={pushState:!0};"-1"!=c.domain.search("localhost")&&(a.root="/vaziko/public/"),Backbone.history.start(a)},getLogin:function(){this.loginView instanceof Backbone.View&&(this.loginView.stopListening(),this.loginView.undelegateEvents()),this.loginView=new app.UserLoginView},getTercerosMain:function(){this.mainTerceroView instanceof Backbone.View&&(this.mainTerceroView.stopListening(),this.mainTerceroView.undelegateEvents()),this.mainTerceroView=new app.MainTerceroView},getTercerosCreate:function(){this.terceroModel=new app.TerceroModel,this.createTerceroView instanceof Backbone.View&&(this.createTerceroView.stopListening(),this.createTerceroView.undelegateEvents()),this.createTerceroView=new app.CreateTerceroView({model:this.terceroModel}),this.createTerceroView.render()},getTercerosShow:function(a){this.terceroModel=new app.TerceroModel,this.terceroModel.set({id:a},{silent:!0}),this.showTerceroView instanceof Backbone.View&&(this.showTerceroView.stopListening(),this.showTerceroView.undelegateEvents()),this.showTerceroView=new app.ShowTerceroView({model:this.terceroModel})},getTercerosEdit:function(a){this.terceroModel=new app.TerceroModel,this.terceroModel.set({id:a},{silent:!0}),this.createTerceroView instanceof Backbone.View&&(this.createTerceroView.stopListening(),this.createTerceroView.undelegateEvents()),this.createTerceroView=new app.CreateTerceroView({model:this.terceroModel}),this.terceroModel.fetch()},getEmpresaEdit:function(){this.empresaModel=new app.EmpresaModel,this.createEmpresaView instanceof Backbone.View&&(this.createEmpresaView.stopListening(),this.createEmpresaView.undelegateEvents()),this.createEmpresaView=new app.CreateEmpresaView({model:this.empresaModel}),this.empresaModel.fetch()},getMunicipiosMain:function(){this.mainMunicipioView instanceof Backbone.View&&(this.mainMunicipioView.stopListening(),this.mainMunicipioView.undelegateEvents()),this.mainMunicipioView=new app.MainMunicipioView},getDepartamentosMain:function(){this.mainDepartamentoView instanceof Backbone.View&&(this.mainDepartamentoView.stopListening(),this.mainDepartamentoView.undelegateEvents()),this.mainDepartamentoView=new app.MainDepartamentoView},getActividadesMain:function(){this.mainActividadView instanceof Backbone.View&&(this.mainActividadView.stopListening(),this.mainActividadView.undelegateEvents()),this.mainActividadView=new app.MainActividadView},getActividadesCreate:function(){this.actividadModel=new app.ActividadModel,this.createActividadView instanceof Backbone.View&&(this.createActividadView.stopListening(),this.createActividadView.undelegateEvents()),this.createActividadView=new app.CreateActividadView({model:this.actividadModel}),this.createActividadView.render()},getActividadesEdit:function(a){this.actividadModel=new app.ActividadModel,this.actividadModel.set({id:a},{silent:!0}),this.createActividadView instanceof Backbone.View&&(this.createActividadView.stopListening(),this.createActividadView.undelegateEvents()),this.createActividadView=new app.CreateActividadView({model:this.actividadModel}),this.actividadModel.fetch()},getPlanCuentasMain:function(){this.mainPlanCuentasView instanceof Backbone.View&&(this.mainPlanCuentasView.stopListening(),this.mainPlanCuentasView.undelegateEvents()),this.mainPlanCuentasView=new app.MainPlanCuentasView},getPlanCuentasCreate:function(){this.planCuentaModel=new app.PlanCuentaModel,this.createPlanCuentaView instanceof Backbone.View&&(this.createPlanCuentaView.stopListening(),this.createPlanCuentaView.undelegateEvents()),this.createPlanCuentaView=new app.CreatePlanCuentaView({model:this.planCuentaModel}),this.createPlanCuentaView.render()},getPlanCuentasEdit:function(a){this.planCuentaModel=new app.PlanCuentaModel,this.planCuentaModel.set({id:a},{silent:!0}),this.createPlanCuentaView instanceof Backbone.View&&(this.createPlanCuentaView.stopListening(),this.createPlanCuentaView.undelegateEvents()),this.createPlanCuentaView=new app.CreatePlanCuentaView({model:this.planCuentaModel}),this.planCuentaModel.fetch()},getCentrosCostoMain:function(){this.mainCentrosCostoView instanceof Backbone.View&&(this.mainCentrosCostoView.stopListening(),this.mainCentrosCostoView.undelegateEvents()),this.mainCentrosCostoView=new app.MainCentrosCostoView},getCentrosCostoCreate:function(){this.centroCostoModel=new app.CentroCostoModel,this.createCentroCostoView instanceof Backbone.View&&(this.createCentroCostoView.stopListening(),this.createCentroCostoView.undelegateEvents()),this.createCentroCostoView=new app.CreateCentroCostoView({model:this.centroCostoModel,parameters:{callback:"toShow"}}),this.createCentroCostoView.render()},getCentrosCostoEdit:function(a){this.centroCostoModel=new app.CentroCostoModel,this.centroCostoModel.set({id:a},{silent:!0}),this.createCentroCostoView instanceof Backbone.View&&(this.createCentroCostoView.stopListening(),this.createCentroCostoView.undelegateEvents()),this.createCentroCostoView=new app.CreateCentroCostoView({model:this.centroCostoModel,parameters:{callback:"toShow"}}),this.centroCostoModel.fetch()},getAsientosMain:function(){this.mainAsientosView instanceof Backbone.View&&(this.mainAsientosView.stopListening(),this.mainAsientosView.undelegateEvents()),this.mainAsientosView=new app.MainAsientosView},getAsientosCreate:function(){this.asientoModel=new app.AsientoModel,this.createAsientoView instanceof Backbone.View&&(this.createAsientoView.stopListening(),this.createAsientoView.undelegateEvents()),this.createAsientoView=new app.CreateAsientoView({model:this.asientoModel}),this.createAsientoView.render()},getAsientosShow:function(a){this.asientoModel=new app.AsientoModel,this.asientoModel.set({id:a},{silent:!0}),this.showAsientoView instanceof Backbone.View&&(this.showAsientoView.stopListening(),this.showAsientoView.undelegateEvents()),this.showAsientoView=new app.ShowAsientoView({model:this.asientoModel})},getAsientosEdit:function(a){this.asientoModel=new app.AsientoModel,this.asientoModel.set({id:a},{silent:!0}),this.editAsientoView instanceof Backbone.View&&(this.editAsientoView.stopListening(),this.editAsientoView.undelegateEvents()),this.createAsientoView instanceof Backbone.View&&(this.createAsientoView.stopListening(),this.createAsientoView.undelegateEvents()),this.editAsientoView=new app.EditAsientoView({model:this.asientoModel}),this.asientoModel.fetch()},getFoldersMain:function(){this.mainFoldersView instanceof Backbone.View&&(this.mainFoldersView.stopListening(),this.mainFoldersView.undelegateEvents()),this.mainFoldersView=new app.MainFoldersView},getFoldersCreate:function(){this.folderModel=new app.FolderModel,this.createFolderView instanceof Backbone.View&&(this.createFolderView.stopListening(),this.createFolderView.undelegateEvents()),this.createFolderView=new app.CreateFolderView({model:this.folderModel}),this.createFolderView.render()},getFoldersEdit:function(a){this.folderModel=new app.FolderModel,this.folderModel.set({id:a},{silent:!0}),this.createFolderView instanceof Backbone.View&&(this.createFolderView.stopListening(),this.createFolderView.undelegateEvents()),this.createFolderView=new app.CreateFolderView({model:this.folderModel}),this.folderModel.fetch()},getDocumentosMain:function(){this.mainDocumentosView instanceof Backbone.View&&(this.mainDocumentosView.stopListening(),this.mainDocumentosView.undelegateEvents()),this.mainDocumentosView=new app.MainDocumentosView},getDocumentosCreate:function(){this.documentoModel=new app.DocumentoModel,this.createDocumentoView instanceof Backbone.View&&(this.createDocumentoView.stopListening(),this.createDocumentoView.undelegateEvents()),this.createDocumentoView=new app.CreateDocumentoView({model:this.documentoModel}),this.createDocumentoView.render()},getDocumentosEdit:function(a){this.documentoModel=new app.DocumentoModel,this.documentoModel.set({id:a},{silent:!0}),this.createDocumentoView instanceof Backbone.View&&(this.createDocumentoView.stopListening(),this.createDocumentoView.undelegateEvents()),this.createDocumentoView=new app.CreateDocumentoView({model:this.documentoModel}),this.documentoModel.fetch()}}))}(jQuery,this,this.document);var app=app||{};!function(a,b,c,d){var e=function(){a.ajaxSetup({cache:!1,headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}})};e.prototype={initialize:function(){this.initApp(),this.initICheck(),this.initAlertify(),this.initInputMask(),this.initSelect2(),this.initToUpper(),this.initSpinner(),this.initDatePicker()},initApp:function(){b.app.AppRouter.start()},initICheck:function(){a("input").iCheck({checkboxClass:"icheckbox_minimal-green",radioClass:"iradio_minimal-green"})},initAlertify:function(){alertify.logPosition("bottom right")},initInputMask:function(){a("[data-mask]").inputmask(),a("[data-currency]").inputmask({radixPoint:",",alias:"currency",removeMaskOnSubmit:!0,unmaskAsNumber:!0,min:0})},initSelect2:function(){a(".select2-default").select2({language:"es",placeholder:"Seleccione"}),a(".select2-default-clear").select2({language:"es",placeholder:"Seleccione",allowClear:!0})},initToUpper:function(){a(".input-toupper").keyup(function(){a(this).val(a(this).val().toUpperCase())})},initSpinner:function(){a(".spinner-percentage").spinner({step:.1,start:0,min:0,max:100,numberFormat:"n",stop:function(b,c){_.isNull(this.value)||_.isUndefined(this.value)||_.isEmpty(this.value)||(!a.isNumeric(this.value)||this.value>100||this.value<0)&&a(this).spinner("value",0)}})},initValidator:function(){a('form[data-toggle="validator"]').each(function(){var b=a(this);a.fn.validator.call(b,b.data())})},initDatePicker:function(){a(".datepicker").datepicker({autoclose:!0,language:"es",format:"yyyy-mm-dd"})}},a(function(){b.initComponent=new e,b.initComponent.initialize()})}(jQuery,this,this.document);